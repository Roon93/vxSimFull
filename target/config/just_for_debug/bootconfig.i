ccpentium -c -mcpu=pentium -march=pentium -ansi  -O2 -fvolatile -nostdlib -fno-builtin -fno-defer-pop -Wall -I/h   -I. -Id:\Tornado2.2\target\config\all -Id:\Tornado2.2\target/h -Id:\Tornado2.2\target/src/config -Id:\Tornado2.2\target/src/drv -DCPU=PENTIUM -DTOOL_FAMILY=gnu -DTOOL=gnu   -E   d:\Tornado2.2\target\config\all\bootConfig.c
# 1 "d:/Tornado2.2/target/config/all/bootConfig.c"
 

 

 
# 200 "d:/Tornado2.2/target/config/all/bootConfig.c"

 
# 211 "d:/Tornado2.2/target/config/all/bootConfig.c"

# 1 "d:/Tornado2.2/target/h/vxWorks.h" 1
 

 

 
# 53 "d:/Tornado2.2/target/h/vxWorks.h"





































 




 




 





 




 





 









 







 






 




























 





# 1 "d:/Tornado2.2/target/h/types/vxCpu.h" 1
 

 

 








 
# 75 "d:/Tornado2.2/target/h/types/vxCpu.h"

 













 

 










 






























































































# 207 "d:/Tornado2.2/target/h/types/vxCpu.h"




















































# 273 "d:/Tornado2.2/target/h/types/vxCpu.h"










# 296 "d:/Tornado2.2/target/h/types/vxCpu.h"


# 306 "d:/Tornado2.2/target/h/types/vxCpu.h"























 
# 338 "d:/Tornado2.2/target/h/types/vxCpu.h"











# 178 "d:/Tornado2.2/target/h/vxWorks.h" 2
# 1 "d:/Tornado2.2/target/h/types/vxArch.h" 1
 

 

 
# 32 "d:/Tornado2.2/target/h/types/vxArch.h"

 








































































# 1 "d:/Tornado2.2/target/h/arch/i86/archI86.h" 1
 

 
 
# 14 "d:/Tornado2.2/target/h/arch/i86/archI86.h"






















# 60 "d:/Tornado2.2/target/h/arch/i86/archI86.h"


 








# 107 "d:/Tornado2.2/target/h/types/vxArch.h" 2


























 















 











# 179 "d:/Tornado2.2/target/h/vxWorks.h" 2

# 1 "d:/Tornado2.2/target/h/types/vxParams.h" 1
 

 

 
# 15 "d:/Tornado2.2/target/h/types/vxParams.h"

 













































# 181 "d:/Tornado2.2/target/h/vxWorks.h" 2
# 1 "d:/Tornado2.2/target/h/types/vxTypesBase.h" 1
 

 

 
# 24 "d:/Tornado2.2/target/h/types/vxTypesBase.h"

 
















# 1 "d:/Tornado2.2/host/x86-win32/lib/gcc-lib/i586-wrs-vxworks/2.9-PentiumIII-010221/include/stddef.h" 1 3
 
# 19 "d:/Tornado2.2/host/x86-win32/lib/gcc-lib/i586-wrs-vxworks/2.9-PentiumIII-010221/include/stddef.h" 3

 






 








 







 

 




 


 





 



# 91 "d:/Tornado2.2/host/x86-win32/lib/gcc-lib/i586-wrs-vxworks/2.9-PentiumIII-010221/include/stddef.h" 3

 





 


















 





 

 





















typedef long int ptrdiff_t;









 




 

 


































typedef long unsigned int size_t;






















 




 





























 
# 267 "d:/Tornado2.2/host/x86-win32/lib/gcc-lib/i586-wrs-vxworks/2.9-PentiumIII-010221/include/stddef.h" 3

















typedef short unsigned int wchar_t;
























typedef unsigned int wint_t;




 

 

# 346 "d:/Tornado2.2/host/x86-win32/lib/gcc-lib/i586-wrs-vxworks/2.9-PentiumIII-010221/include/stddef.h" 3



 













 








# 43 "d:/Tornado2.2/target/h/types/vxTypesBase.h" 2

 






struct __timer;































































 






 




















 










































































 






















































































































 






 
































# 182 "d:/Tornado2.2/target/h/vxWorks.h" 2
# 1 "d:/Tornado2.2/target/h/types/vxTypes.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/types/vxTypes.h"

 
# 56 "d:/Tornado2.2/target/h/types/vxTypes.h"








# 1 "d:/Tornado2.2/target/h/types/vxANSI.h" 1
 

 

 








 
# 25 "d:/Tornado2.2/target/h/types/vxANSI.h"








 










# 1 "d:/Tornado2.2/target/h/types/vxCpu.h" 1
 

 

 








 
# 75 "d:/Tornado2.2/target/h/types/vxCpu.h"

 







# 348 "d:/Tornado2.2/target/h/types/vxCpu.h"

# 45 "d:/Tornado2.2/target/h/types/vxANSI.h" 2
# 1 "d:/Tornado2.2/target/h/types/vxArch.h" 1
 

 

 
# 32 "d:/Tornado2.2/target/h/types/vxArch.h"

 








# 160 "d:/Tornado2.2/target/h/types/vxArch.h"

# 46 "d:/Tornado2.2/target/h/types/vxANSI.h" 2
# 1 "d:/Tornado2.2/target/h/types/vxParams.h" 1
 

 

 
# 15 "d:/Tornado2.2/target/h/types/vxParams.h"

 







# 61 "d:/Tornado2.2/target/h/types/vxParams.h"

# 47 "d:/Tornado2.2/target/h/types/vxANSI.h" 2
# 1 "d:/Tornado2.2/target/h/types/vxTypesBase.h" 1
 

 

 
# 24 "d:/Tornado2.2/target/h/types/vxTypesBase.h"

 








# 376 "d:/Tornado2.2/target/h/types/vxTypesBase.h"

# 48 "d:/Tornado2.2/target/h/types/vxANSI.h" 2







# 65 "d:/Tornado2.2/target/h/types/vxTypes.h" 2


typedef int ssize_t;




typedef unsigned long time_t;




typedef long fpos_t;




typedef signed char int8_t;




typedef unsigned char uint8_t;




typedef short int16_t;




typedef unsigned short uint16_t;




typedef long int32_t;




typedef unsigned long uint32_t;




typedef long long int64_t;




typedef unsigned long long uint64_t;



 

typedef unsigned char	uchar_t;
typedef unsigned short	ushort_t;
typedef unsigned int	uint_t;
typedef unsigned long	ulong_t;

typedef	struct	_quad { long val[2]; } quad;
typedef	long	daddr_t;
typedef	char *	caddr_t;
typedef	char *	addr_t;
typedef	long	swblk_t;

 

typedef short		dev_t;
typedef unsigned short	gid_t;
typedef	unsigned long	ino_t;
typedef int		mode_t;
typedef unsigned long	nlink_t;
typedef long		off_t;
typedef int		pid_t;
typedef unsigned short	uid_t;







# 183 "d:/Tornado2.2/target/h/vxWorks.h" 2
# 1 "d:/Tornado2.2/target/h/types/vxTypesOld.h" 1
 

 

 
# 58 "d:/Tornado2.2/target/h/types/vxTypesOld.h"

 
# 72 "d:/Tornado2.2/target/h/types/vxTypesOld.h"








# 1 "d:/Tornado2.2/target/h/sys/types.h" 1
 

 
 








 
# 31 "d:/Tornado2.2/target/h/sys/types.h"








# 1 "d:/Tornado2.2/target/h/types/vxTypes.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/types/vxTypes.h"

 
# 56 "d:/Tornado2.2/target/h/types/vxTypes.h"


# 150 "d:/Tornado2.2/target/h/types/vxTypes.h"

# 40 "d:/Tornado2.2/target/h/sys/types.h" 2







# 81 "d:/Tornado2.2/target/h/types/vxTypesOld.h" 2

 

typedef	char		INT8;
typedef	short		INT16;
typedef	int		INT32;
typedef	long long	INT64;

typedef	unsigned char	UINT8;
typedef	unsigned short	UINT16;
typedef	unsigned int	UINT32;
typedef	unsigned long long UINT64;

typedef	unsigned char	UCHAR;
typedef unsigned short	USHORT;
typedef	unsigned int	UINT;
typedef unsigned long	ULONG;

typedef	int		BOOL;
typedef	int		STATUS;
typedef int 		ARGINT;

typedef void		VOID;







typedef int 		(*FUNCPTR) ();	    
typedef void 		(*VOIDFUNCPTR) ();  
typedef double 		(*DBLFUNCPTR) ();   
typedef float 		(*FLTFUNCPTR) ();   



 




typedef union
    {
    long pm_int;
    void *pm_v;
    const void *pm_cv;
    char *pm_c;
    unsigned char *pm_uc;

    signed char *pm_sc;
    const char *pm_cc;
    const unsigned char *pm_cuc;
    const signed char *pm_csc;
    short *pm_s;
    ushort_t *pm_us;
    const short *pm_cs;
    const ushort_t *pm_cus;
    int *pm_i;
    uint_t *pm_ui;
    const int *pm_ci;
    const uint_t *pm_cui;
    long *pm_l;
    ulong_t *pm_ul;
    const long *pm_cl;
    const ulong_t *pm_cul;

    int8_t *pm_i8;
    uint8_t *pm_ui8;
    const int8_t *pm_ci8;
    const uint8_t *pm_cui8;
    int16_t *pm_i16;
    uint16_t *pm_ui16;
    const int16_t *pm_ci16;
    const uint16_t *pm_cui16;
    int32_t *pm_i32;
    uint32_t *pm_ui32;
    const int32_t *pm_ci32;
    const uint32_t *pm_cui32;








    } pointer_mix_t;













 





 
# 198 "d:/Tornado2.2/target/h/types/vxTypesOld.h"





typedef long	fd_mask;





typedef	struct fd_set
    {
    fd_mask	fds_bits[((unsigned int)(((2048)+(( (sizeof(fd_mask) * 8))-1)))/(unsigned int)( (sizeof(fd_mask) * 8)))];
    } fd_set;







 

typedef	unsigned char	u_char;
typedef	unsigned short	u_short;
typedef	unsigned int	u_int;
typedef	unsigned long	u_long;
typedef	unsigned short	ushort;


 

typedef char		TBOOL;		 


 
















typedef	unsigned char INSTR;		 
























 


# 293 "d:/Tornado2.2/target/h/types/vxTypesOld.h"












# 184 "d:/Tornado2.2/target/h/vxWorks.h" 2













 












 





 

# 1 "d:/Tornado2.2/target/h/tool/gnu/toolMacros.h" 1
 

 

 


















 









 













# 219 "d:/Tornado2.2/target/h/vxWorks.h" 2



 



















# 213 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/bootEcoffLib.h" 1
 

 

 













 



extern STATUS bootEcoffInit ();













# 214 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/bootElfLib.h" 1
 

 

 












 



extern STATUS bootElfInit ();













# 215 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/bootLib.h" 1
 

 

 
# 27 "d:/Tornado2.2/target/h/bootLib.h"








 
















typedef struct				 
    {
    char bootDev [40];	 
    char hostName [20];	 
    char targetName [20];	 
    char ead [50];	 
    char bad [50];	 
    char had [30];		 
    char gad [30];		 
    char bootFile [160];	 
    char startupScript [160];	 
    char usr [20];		 
    char passwd [20];	 
    char other [80];	 
    int  procNum;			 
    int  flags;				 
    int  unitNum;                        
    } BOOT_PARAMS;

 



extern STATUS 	bootBpAnchorExtract (char *string, char ** pAnchorAdrs);
extern STATUS 	bootLeaseExtract (char *string, u_long *pLeaseLen, 
                                  u_long *pLeaseStart);
extern STATUS 	bootNetmaskExtract (char *string, int *pNetmask);
extern STATUS 	bootScanNum (char ** ppString, int *pValue, BOOL hex);
extern STATUS 	bootStructToString (char *paramString, BOOT_PARAMS
		*pBootParams);
extern char *	bootStringToStruct (char *bootString, BOOT_PARAMS *pBootParams);
extern void 	bootParamsErrorPrint (char *bootString, char *pError);
extern void 	bootParamsPrompt (char *string);
extern void 	bootParamsShow (char *paramString);


# 100 "d:/Tornado2.2/target/h/bootLib.h"







# 216 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/bootLoadLib.h" 1
 

 

 















# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"








 











































































































































 











# 22 "d:/Tornado2.2/target/h/bootLoadLib.h" 2
# 1 "d:/Tornado2.2/target/h/symLib.h" 1
 

 

 
# 48 "d:/Tornado2.2/target/h/symLib.h"









# 1 "d:/Tornado2.2/target/h/symbol.h" 1
 

 

 
# 24 "d:/Tornado2.2/target/h/symbol.h"








# 1 "d:/Tornado2.2/target/h/private/symbolP.h" 1
 

 

 













# 1 "d:/Tornado2.2/target/h/sllLib.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/sllLib.h"









 

typedef struct slnode		 
    {
    struct slnode *next;	 
    } SL_NODE;


 

typedef struct			 
    {
    SL_NODE *head;	 
    SL_NODE *tail;	 
    } SL_LIST;

 


 
# 61 "d:/Tornado2.2/target/h/sllLib.h"






 
# 79 "d:/Tornado2.2/target/h/sllLib.h"






 
# 97 "d:/Tornado2.2/target/h/sllLib.h"






 
# 113 "d:/Tornado2.2/target/h/sllLib.h"







 



extern SL_LIST *sllCreate (void);
extern SL_NODE *sllEach (SL_LIST *pList, FUNCPTR routine, int routineArg);
extern SL_NODE *sllGet (SL_LIST *pList);
extern SL_NODE *sllPrevious (SL_LIST *pList, SL_NODE *pNode);
extern STATUS 	sllDelete (SL_LIST *pList);
extern STATUS 	sllInit (SL_LIST *pList);
extern STATUS 	sllTerminate (SL_LIST *pList);
extern int 	sllCount (SL_LIST *pList);
extern void 	sllPutAtHead (SL_LIST *pList, SL_NODE *pNode);
extern void 	sllPutAtTail (SL_LIST *pList, SL_NODE *pNode);
extern void 	sllRemove (SL_LIST *pList, SL_NODE *pDeleteNode,
			   SL_NODE *pPrevNode);


# 152 "d:/Tornado2.2/target/h/sllLib.h"







# 20 "d:/Tornado2.2/target/h/private/symbolP.h" 2

typedef unsigned char SYM_TYPE;		 

typedef struct			 
    {
    SL_NODE	nameHNode;	 
    char	*name;		 
    void	*value;		 
    UINT16	group;		 
    SYM_TYPE	type;		 
    } SYMBOL;

typedef SYMBOL * SYMBOL_ID;








# 33 "d:/Tornado2.2/target/h/symbol.h" 2

 














 















# 58 "d:/Tornado2.2/target/h/symLib.h" 2
# 1 "d:/Tornado2.2/target/h/classLib.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/classLib.h"










# 1 "d:/Tornado2.2/target/h/objLib.h" 1
 

 

 
# 33 "d:/Tornado2.2/target/h/objLib.h"









# 1 "d:/Tornado2.2/target/h/errno.h" 1
 

 

 







 
# 36 "d:/Tornado2.2/target/h/errno.h"










 








































 



 

	 












	 


















 






 



 










 


 




 




extern int *	__errno(void);






# 176 "d:/Tornado2.2/target/h/errno.h"














# 43 "d:/Tornado2.2/target/h/objLib.h" 2



 









 

typedef struct obj_core  *OBJ_ID;		 


 
# 75 "d:/Tornado2.2/target/h/objLib.h"


# 91 "d:/Tornado2.2/target/h/objLib.h"


 



extern STATUS 	objShow (OBJ_ID objId, int showType);















# 32 "d:/Tornado2.2/target/h/classLib.h" 2
# 1 "d:/Tornado2.2/target/h/memLib.h" 1
 

 

 
# 49 "d:/Tornado2.2/target/h/memLib.h"











 







 



typedef struct mem_part *PART_ID;

 

typedef struct
    {

    unsigned long numBytesFree,	    
		  numBlocksFree,    
		  maxBlockSizeFree, 
		  numBytesAlloc,    
		  numBlocksAlloc;   

    }  MEM_PART_STATS;


 

 



 




 




 






 









 

 

extern PART_ID memSysPartId;

 

extern FUNCPTR  smMemPartOptionsSetRtn;
extern FUNCPTR  smMemPartFindMaxRtn;
extern FUNCPTR  smMemPartReallocRtn;
extern FUNCPTR  smMemPartShowRtn;

 



extern STATUS 	memInit (char *pPool, unsigned poolSize);
extern STATUS 	memPartLibInit (char *pPool, unsigned poolSize);
extern PART_ID 	memPartCreate (char *pPool, unsigned poolSize);
extern void 	memPartInit (PART_ID partId, char *pPool, unsigned poolSize);
extern STATUS 	memPartAddToPool (PART_ID partId, char *pPool,
				  unsigned poolSize);
extern void 	memAddToPool (char *pPool, unsigned poolSize);
extern void *	memPartAlloc (PART_ID partId, unsigned nBytes);
extern void *   memPartAlignedAlloc (PART_ID partId, unsigned nBytes,
				     unsigned alignment);
extern void *	memalign (unsigned alignment, unsigned size);
extern void *   valloc (unsigned size);
extern STATUS 	memPartFree (PART_ID partId, char *pBlock);
extern STATUS 	memPartOptionsSet (PART_ID partId, unsigned options);
extern int 	memFindMax (void);
extern int 	memPartFindMax (PART_ID partId);
extern void *	memPartRealloc (PART_ID partId, char *pBlock, unsigned nBytes);
extern void 	memOptionsSet (unsigned options);
extern STATUS 	cfree (char *pBlock);
extern void 	memShowInit (void);
extern void 	memShow (int type);
extern STATUS 	memPartShow (PART_ID partId, int type);
extern STATUS   memPartInfoGet (PART_ID	partId, MEM_PART_STATS * ppartStats);


# 187 "d:/Tornado2.2/target/h/memLib.h"









# 33 "d:/Tornado2.2/target/h/classLib.h" 2

 






typedef struct obj_class *CLASS_ID;		 

extern CLASS_ID classClassId;			 

 



extern STATUS 	classLibInit (void);
extern STATUS 	classMemPartIdSet (CLASS_ID classId, PART_ID memPartId);
extern void 	classShowInit (void);
extern STATUS 	classShow (CLASS_ID classId, int level);


















# 59 "d:/Tornado2.2/target/h/symLib.h" 2

# 1 "d:/Tornado2.2/target/h/hashLib.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/hashLib.h"











# 1 "d:/Tornado2.2/target/h/private/objLibP.h" 1
 

 

 
















# 1 "d:/Tornado2.2/target/h/objLib.h" 1
 

 

 
# 33 "d:/Tornado2.2/target/h/objLib.h"


# 112 "d:/Tornado2.2/target/h/objLib.h"

# 23 "d:/Tornado2.2/target/h/private/objLibP.h" 2
# 1 "d:/Tornado2.2/target/h/classLib.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/classLib.h"


# 70 "d:/Tornado2.2/target/h/classLib.h"

# 24 "d:/Tornado2.2/target/h/private/objLibP.h" 2








typedef struct obj_core		 
    {
    struct obj_class *pObjClass;	 
    } OBJ_CORE;






 



extern OBJ_ID 	objCreate (CLASS_ID classId, ...);
extern STATUS 	objInit (CLASS_ID classId, OBJ_ID objId, ...);
extern STATUS 	objDelete (OBJ_ID objId);
extern STATUS 	objDestroy (OBJ_ID objId, BOOL dealloc, int timeout);
extern STATUS 	objFree (CLASS_ID classId, char *pObject);
extern STATUS 	objTerminate (OBJ_ID objId);
extern void *	objAlloc (CLASS_ID classId);
extern void *	objAllocExtra (CLASS_ID classId, unsigned nExtraBytes,
			       void ** ppExtra);
extern void 	objCoreInit (OBJ_CORE *pObjCore, CLASS_ID pObjClass);
extern void 	objCoreTerminate (OBJ_CORE *pObjCore);


# 72 "d:/Tornado2.2/target/h/private/objLibP.h"









# 33 "d:/Tornado2.2/target/h/hashLib.h" 2


 




 

 

typedef struct hashtbl		 
    {
    OBJ_CORE	objCore;		 
    int		elements;		 
    FUNCPTR	keyCmpRtn;		 
    FUNCPTR	keyRtn;			 
    int		keyArg;			 
    SL_LIST	*pHashTbl;		 
    } HASH_TBL;

typedef SL_NODE HASH_NODE;	 

typedef HASH_TBL *HASH_ID;

 

 

typedef struct			 
    {
    HASH_NODE	node;			 
    int		key;			 
    int		data;			 
    } H_NODE_INT;

typedef struct			 
    {
    HASH_NODE	node;			 
    char	*string;		 
    int		data;			 
    } H_NODE_STRING;


 

extern CLASS_ID hashClassId;		 


 



extern BOOL 		hashKeyCmp (H_NODE_INT *pMatchHNode,
				    H_NODE_INT *pHNode, int keyCmpArg);
extern BOOL 		hashKeyStrCmp (H_NODE_STRING *pMatchHNode,
				       H_NODE_STRING *pHNode, int keyCmpArg);
extern HASH_ID 		hashTblCreate (int sizeLog2, FUNCPTR keyCmpRtn,
				       FUNCPTR keyRtn, int keyArg);
extern HASH_NODE *	hashTblEach (HASH_ID hashId, FUNCPTR routine,
				     int routineArg);
extern HASH_NODE *	hashTblFind (HASH_ID hashId, HASH_NODE *pMatchNode,
				     int keyCmpArg);
extern STATUS 		hashLibInit (void);
extern STATUS 		hashTblDelete (HASH_ID hashId);
extern STATUS 		hashTblDestroy (HASH_ID hashId, BOOL dealloc);
extern STATUS 		hashTblInit (HASH_TBL *pHashTbl, SL_LIST *pTblMem,
				     int sizeLog2, FUNCPTR keyCmpRtn,
				     FUNCPTR keyRtn, int keyArg);
extern STATUS 		hashTblPut (HASH_ID hashId, HASH_NODE *pHashNode);
extern STATUS 		hashTblRemove (HASH_ID hashId, HASH_NODE *pHashNode);
extern STATUS 		hashTblTerminate (HASH_ID hashId);
extern int 		hashFuncIterScale (int elements, H_NODE_STRING *pHNode,
					   int seed);
extern int 		hashFuncModulo (int elements, H_NODE_INT *pHNode,
					int divisor);
extern int 		hashFuncMultiply (int elements, H_NODE_INT *pHNode,
					  int multiplier);


# 131 "d:/Tornado2.2/target/h/hashLib.h"







# 61 "d:/Tornado2.2/target/h/symLib.h" 2
# 1 "d:/Tornado2.2/target/h/private/semLibP.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/private/semLibP.h"










# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 31 "d:/Tornado2.2/target/h/private/semLibP.h" 2
# 1 "d:/Tornado2.2/target/h/semLib.h" 1
 

 

 
# 34 "d:/Tornado2.2/target/h/semLib.h"









# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 44 "d:/Tornado2.2/target/h/semLib.h" 2

 






 











 

typedef enum		 
    {
    SEM_EMPTY,			 
    SEM_FULL			 
    } SEM_B_STATE;

typedef struct semaphore *SEM_ID;

 



extern STATUS 	semGive (SEM_ID semId);
extern STATUS 	semTake (SEM_ID semId, int timeout);
extern STATUS 	semFlush (SEM_ID semId);
extern STATUS 	semDelete (SEM_ID semId);
extern int 	semInfo (SEM_ID semId, int idList[], int maxTasks);
extern STATUS 	semBLibInit (void);
extern SEM_ID 	semBCreate (int options, SEM_B_STATE initialState);
extern STATUS 	semCLibInit (void);
extern SEM_ID 	semCCreate (int options, int initialCount);
extern STATUS 	semMLibInit (void);
extern SEM_ID 	semMCreate (int options);
extern STATUS   semMGiveForce (SEM_ID semId);
extern STATUS 	semOLibInit (void);
extern SEM_ID 	semCreate (void);
extern void 	semShowInit (void);
extern STATUS 	semShow (SEM_ID semId, int level);


# 115 "d:/Tornado2.2/target/h/semLib.h"








# 32 "d:/Tornado2.2/target/h/private/semLibP.h" 2
# 1 "d:/Tornado2.2/target/h/qLib.h" 1
 

 

 
# 28 "d:/Tornado2.2/target/h/qLib.h"









# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 38 "d:/Tornado2.2/target/h/qLib.h" 2
# 1 "d:/Tornado2.2/target/h/qClass.h" 1
 

 

 
# 22 "d:/Tornado2.2/target/h/qClass.h"












 

typedef struct q_class		 
    {
    FUNCPTR createRtn;		 
    FUNCPTR initRtn;		 
    FUNCPTR deleteRtn;		 
    FUNCPTR terminateRtn;	 
    FUNCPTR putRtn;		 
    FUNCPTR getRtn;		 
    FUNCPTR removeRtn;		 
    FUNCPTR resortRtn;		 
    FUNCPTR advanceRtn;		 
    FUNCPTR getExpiredRtn;	 
    FUNCPTR keyRtn;		 
    FUNCPTR calibrateRtn;	 
    FUNCPTR infoRtn;		 
    FUNCPTR eachRtn;		 
    struct q_class *valid;	 
    } Q_CLASS;

typedef Q_CLASS *Q_CLASS_ID;	 

 

 
# 70 "d:/Tornado2.2/target/h/qClass.h"

















# 39 "d:/Tornado2.2/target/h/qLib.h" 2

 





 

extern Q_CLASS_ID		qFifoClassId;
extern Q_CLASS_ID		qPriListClassId;
extern Q_CLASS_ID		qPriListFromTailClassId;
extern Q_CLASS_ID		qPriDeltaClassId;
extern Q_CLASS_ID		qPriHeapClassId;
extern Q_CLASS_ID		qPriBMapClassId;

 








 

 








typedef struct		 
    {
    UINT     qPriv1;			 
    UINT     qPriv2;			 
    UINT     qPriv3;			 
    UINT     qPriv4;			 
    } Q_NODE;


 








typedef struct		 
    {
    Q_NODE  *pFirstNode;		 
    UINT     qPriv1;			 
    UINT     qPriv2;			 
    Q_CLASS *pQClass;			 
    } Q_HEAD;





 


 
# 121 "d:/Tornado2.2/target/h/qLib.h"




 
# 134 "d:/Tornado2.2/target/h/qLib.h"





 
# 152 "d:/Tornado2.2/target/h/qLib.h"





 












 
# 179 "d:/Tornado2.2/target/h/qLib.h"





 
# 194 "d:/Tornado2.2/target/h/qLib.h"





 
# 215 "d:/Tornado2.2/target/h/qLib.h"





 
# 232 "d:/Tornado2.2/target/h/qLib.h"





 
# 246 "d:/Tornado2.2/target/h/qLib.h"





 
# 266 "d:/Tornado2.2/target/h/qLib.h"





 
# 290 "d:/Tornado2.2/target/h/qLib.h"







extern Q_HEAD *	qCreate (Q_CLASS *pQClass, ...);
extern Q_NODE *	qEach (Q_HEAD *pQHead, FUNCPTR routine, int routineArg);
extern Q_NODE *	qFirst (Q_HEAD *pQHead);
extern Q_NODE *	qGet (Q_HEAD *pQHead);
extern Q_NODE *	qGetExpired (Q_HEAD *pQHead);
extern STATUS 	qDelete (Q_HEAD *pQHead);
extern STATUS 	qInit (Q_HEAD *pQHead, Q_CLASS *pQClass, ...);
extern STATUS 	qTerminate (Q_HEAD *pQHead);
extern ULONG 	qKey (Q_HEAD *pQHead, Q_NODE *pQNode, int keyType);
extern int 	qInfo (Q_HEAD *pQHead, Q_NODE *nodeArray [ ], int maxNodes);
extern void 	qAdvance (Q_HEAD *pQHead);
extern void 	qCalibrate (Q_HEAD *pQHead, ULONG keyDelta);
extern void 	qPut (Q_HEAD *pQHead, Q_NODE *pQNode, ULONG key);
extern STATUS 	qRemove (Q_HEAD *pQHead, Q_NODE *pQNode);
extern void 	qResort (Q_HEAD *pQHead, Q_NODE *pQNode, ULONG newKey);


# 332 "d:/Tornado2.2/target/h/qLib.h"









# 33 "d:/Tornado2.2/target/h/private/semLibP.h" 2
# 1 "d:/Tornado2.2/target/h/private/classLibP.h" 1
 

 
 
# 13 "d:/Tornado2.2/target/h/private/classLibP.h"










# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 24 "d:/Tornado2.2/target/h/private/classLibP.h" 2
# 1 "d:/Tornado2.2/target/h/memLib.h" 1
 

 

 
# 49 "d:/Tornado2.2/target/h/memLib.h"


# 195 "d:/Tornado2.2/target/h/memLib.h"

# 25 "d:/Tornado2.2/target/h/private/classLibP.h" 2
# 1 "d:/Tornado2.2/target/h/classLib.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/classLib.h"


# 70 "d:/Tornado2.2/target/h/classLib.h"

# 26 "d:/Tornado2.2/target/h/private/classLibP.h" 2
# 1 "d:/Tornado2.2/target/h/private/objLibP.h" 1
 

 

 









# 80 "d:/Tornado2.2/target/h/private/objLibP.h"

# 27 "d:/Tornado2.2/target/h/private/classLibP.h" 2

 









typedef struct obj_class	 
    {
    OBJ_CORE		objCore;	 
    struct mem_part	*objPartId;	 
    unsigned		objSize;	 
    unsigned		objAllocCnt;	 
    unsigned		objFreeCnt;	 
    unsigned		objInitCnt;	 
    unsigned		objTerminateCnt; 
    int			coreOffset;	 
    FUNCPTR		createRtn;	 
    FUNCPTR		initRtn;	 
    FUNCPTR		destroyRtn;	 
    FUNCPTR		showRtn;	 
    FUNCPTR		instRtn;	 
    } OBJ_CLASS;


 



extern CLASS_ID	classCreate (unsigned objectSize, int coreOffset,
			     FUNCPTR createRtn, FUNCPTR initRtn,
			     FUNCPTR destroyRtn);
extern STATUS	classInit (OBJ_CLASS *pObjClass, unsigned objectSize,
			   int coreOffset, FUNCPTR createRtn, FUNCPTR initRtn,
			   FUNCPTR destroyRtn);
extern STATUS	classDestroy (CLASS_ID classId);
extern STATUS	classInstConnect (CLASS_ID classId, FUNCPTR instRtn);
extern STATUS	classShowConnect (CLASS_ID classId, FUNCPTR showRtn);
extern STATUS   classInstrument ( OBJ_CLASS * pObjClass, 
				  OBJ_CLASS * pObjInstClass );



# 83 "d:/Tornado2.2/target/h/private/classLibP.h"








   







# 34 "d:/Tornado2.2/target/h/private/semLibP.h" 2
# 1 "d:/Tornado2.2/target/h/private/objLibP.h" 1
 

 

 









# 80 "d:/Tornado2.2/target/h/private/objLibP.h"

# 35 "d:/Tornado2.2/target/h/private/semLibP.h" 2
# 1 "d:/Tornado2.2/target/h/private/eventLibP.h" 1
 

 

 






















extern VOIDFUNCPTR eventEvtRtn;  

 

typedef struct eventsCb
    {
    UINT32 wanted;	 
    volatile UINT32 received;	 
    UINT8  options;	 
    UINT8  sysflags;	 
    UINT8  pad[2];	 
    } EVENTS;		 

 



 




 

typedef struct eventsResourceCb
    {
    UINT32 registered;	 
    int    taskId;	 
    UINT8  options;	 
    UINT8  pad[3];	 
    } EVENTS_RSRC;	 





 














extern void 	eventLibInit	(void);
extern void 	eventInit	(EVENTS_RSRC * pEvRsrc);
extern void 	eventTerminate 	(const EVENTS_RSRC * pEvRsrc);
extern void 	semEvLibInit	(void);
extern void 	msgQEvLibInit	(void);
extern STATUS 	eventStart	(OBJ_ID objId, EVENTS_RSRC * pEvRsrc,
				 FUNCPTR isRsrcFree, UINT32 events,
				 UINT8 options);
extern STATUS	eventRsrcSend	(int taskId, UINT32 events);
extern STATUS	eventRsrcShow	(EVENTS_RSRC * pEvRsrc);
extern STATUS   eventTaskShow	(EVENTS	* pEvents);


# 104 "d:/Tornado2.2/target/h/private/eventLibP.h"
















# 36 "d:/Tornado2.2/target/h/private/semLibP.h" 2





 













typedef struct semaphore  
    {
    OBJ_CORE	objCore;	 
    UINT8	semType;	 
    UINT8	options;	 
    UINT16	recurse;	 
    Q_HEAD	qHead;		 
    union
	{
	UINT		 count;	 
	struct windTcb	*owner;	 
	} state;
    EVENTS_RSRC	events;		 

    } SEMAPHORE;




 
# 84 "d:/Tornado2.2/target/h/private/semLibP.h"



 
# 97 "d:/Tornado2.2/target/h/private/semLibP.h"







 

extern OBJ_CLASS	semClass;		 
extern OBJ_CLASS	semInstClass;		 
extern CLASS_ID		semClassId;		 
extern CLASS_ID		semInstClassId;		 
extern FUNCPTR		semGiveTbl [];		 
extern FUNCPTR		semTakeTbl [];		 
extern FUNCPTR		semFlushTbl [];		 
extern FUNCPTR		semGiveDeferTbl [];	 
extern FUNCPTR		semFlushDeferTbl [];	 
extern int		semMGiveKernWork;	 

extern FUNCPTR  semSmShowRtn;	 
extern FUNCPTR  semSmInfoRtn;	 

 



extern STATUS	semLibInit (void);
extern STATUS	semTerminate (SEM_ID semId);
extern STATUS	semDestroy (SEM_ID semId, BOOL dealloc);
extern STATUS	semGiveDefer (SEM_ID semId);
extern STATUS	semFlushDefer (SEM_ID semId);
extern STATUS	semInvalid (SEM_ID semId);
extern STATUS	semIntRestrict (SEM_ID semId);
extern STATUS	semQInit (SEMAPHORE *pSemaphore, int options);
extern STATUS	semQFlush (SEM_ID semId);
extern void	semQFlushDefer (SEM_ID semId);
extern STATUS	semBInit (SEMAPHORE *pSem,int options,SEM_B_STATE initialState);
extern STATUS	semBCoreInit (SEMAPHORE *pSemaphore, int options,
			      SEM_B_STATE initialState);
extern STATUS	semBGive (SEM_ID semId);
extern STATUS	semBTake (SEM_ID semId, int timeout);
extern void	semBGiveDefer (SEM_ID semId);
extern STATUS	semMInit (SEMAPHORE *pSem, int options);
extern STATUS	semMCoreInit (SEMAPHORE *pSemaphore, int options);
extern STATUS	semMGive (SEM_ID semId);
extern STATUS	semMTake (SEM_ID semId, int timeout);
extern STATUS	semMGiveKern (SEM_ID semId);
extern STATUS	semMPendQPut (SEM_ID semId, int timeout);
extern STATUS	semCInit (SEMAPHORE *pSem,int options,int initialCount);
extern STATUS	semCCoreInit (SEMAPHORE *pSemaphore, int options,
			      int initialCount);
extern STATUS	semCGive (SEM_ID semId);
extern STATUS	semCTake (SEM_ID semId, int timeout);
extern void	semCGiveDefer (SEM_ID semId);
extern STATUS	semOTake (SEM_ID semId);


# 185 "d:/Tornado2.2/target/h/private/semLibP.h"


# 201 "d:/Tornado2.2/target/h/private/semLibP.h"












# 62 "d:/Tornado2.2/target/h/symLib.h" 2
# 1 "d:/Tornado2.2/target/h/private/objLibP.h" 1
 

 

 









# 80 "d:/Tornado2.2/target/h/private/objLibP.h"

# 63 "d:/Tornado2.2/target/h/symLib.h" 2
# 1 "d:/Tornado2.2/target/h/private/symLibP.h" 1
 

 

 












# 1 "d:/Tornado2.2/target/h/private/symbolP.h" 1
 

 

 






# 39 "d:/Tornado2.2/target/h/private/symbolP.h"


# 19 "d:/Tornado2.2/target/h/private/symLibP.h" 2

 

typedef struct symtab	 
    {
    OBJ_CORE	objCore;	 
    HASH_ID	nameHashId;	 
    SEMAPHORE	symMutex;	 
    PART_ID	symPartId;	 
    BOOL	sameNameOk;	 
    int		nsymbols;	 
    } SYMTAB;

typedef SYMTAB *SYMTAB_ID;

 

extern STATUS symFindSymbol
    (
    SYMTAB_ID   symTblId,        
    char *      name,            
    void *	value,		 
    SYM_TYPE    type,            
    SYM_TYPE    mask,            
    SYMBOL_ID * pSymbolId        
    );

extern STATUS symByCNameFind
    (
    SYMTAB_ID   symTblId,	 
    char *	name,		 
    char **	pValue,		 
    SYM_TYPE *	pType		 
    );

extern STATUS symNameGet
    (
    SYMBOL_ID  symbolId,
    char **    pName
    );

extern STATUS symValueGet 
    (
    SYMBOL_ID  symbolId,
    void **    pValue
    );

extern STATUS symTypeGet 
    (
    SYMBOL_ID  symbolId,
    SYM_TYPE * pType
    );








# 64 "d:/Tornado2.2/target/h/symLib.h" 2

 






 







 

extern CLASS_ID symTblClassId;		 

 

extern UINT16	symGroupDefault;
extern FUNCPTR	syncSymAddRtn;
extern FUNCPTR	syncSymRemoveRtn;

 

extern STATUS 	symLibInit (void);
extern SYMBOL *	symEach (SYMTAB_ID symTblId, FUNCPTR routine, int routineArg);
extern char *	symName (SYMTAB_ID symTbl, char *value);
extern void 	symShowInit (void);
extern STATUS 	symShow (SYMTAB_ID pSymTbl, char *substr);
extern STATUS 	symTblDelete (SYMTAB_ID symTblId);
extern STATUS 	symTblTerminate (SYMTAB_ID symTblId);
extern STATUS 	symTblDestroy (SYMTAB_ID symTblId, BOOL dealloc);
extern STATUS 	symFree (SYMTAB_ID symTblId, SYMBOL *pSymbol);
extern STATUS   symSAdd (SYMTAB_ID symTblId, char *name, char *value,
			SYM_TYPE type, UINT16 group);
extern STATUS   symAdd (SYMTAB_ID symTblId, char *name, char *value,
			SYM_TYPE type, UINT16 group);
extern STATUS 	symTblAdd (SYMTAB_ID symTblId, SYMBOL *pSymbol);
extern STATUS 	symRemove (SYMTAB_ID symTblId, char *name, SYM_TYPE type);
extern STATUS 	symTblRemove (SYMTAB_ID symTblId, SYMBOL *pSymbol);
extern STATUS 	symInit (SYMBOL *pSymbol, char *name, char *value,
		         SYM_TYPE type, UINT16 group);
extern SYMBOL *	symAlloc (SYMTAB_ID symTblId, char *name, char *value,
			  SYM_TYPE type, UINT16 group);
extern STATUS 	symTblInit (SYMTAB *pSymTbl, BOOL sameNameOk,
			    PART_ID symPartId, HASH_ID symHashTblId);
extern SYMTAB_ID symTblCreate (int hashSizeLog2, BOOL sameNameOk,
			       PART_ID symPartId);
extern STATUS 	symFindByName (SYMTAB_ID symTblId, char *name, char **pValue,
			       SYM_TYPE *pType);
extern STATUS 	symFindByValue (SYMTAB_ID symTblId, UINT value, char *name,
				int *pValue, SYM_TYPE *pType);
extern STATUS 	symFindByCName (SYMTAB_ID symTblId, char *name, char **pValue,
				SYM_TYPE *pType);
extern STATUS 	symFindByNameAndType (SYMTAB_ID symTblId, char *name,
				      char **pValue, SYM_TYPE *pType,
				      SYM_TYPE sType, SYM_TYPE mask);
extern STATUS 	symFindByValueAndType (SYMTAB_ID symTblId, UINT value,
				       char *name, int *pValue, SYM_TYPE *pType,
				       SYM_TYPE sType, SYM_TYPE mask);
extern STATUS 	symByValueFind (SYMTAB_ID symTblId, UINT value, char **pName,
				int *pValue, SYM_TYPE *pType);
extern STATUS 	symByValueAndTypeFind (SYMTAB_ID symTblId, UINT value,
				       char **pName, int *pValue, 
				       SYM_TYPE *pType,SYM_TYPE sType, 
				       SYM_TYPE mask);











# 23 "d:/Tornado2.2/target/h/bootLoadLib.h" 2

 



 

extern FUNCPTR bootLoadRoutine;

 



extern STATUS 	bootLoadModule (int fd, FUNCPTR *pEntry);













# 217 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/bootpLib.h" 1
 

 

 
# 25 "d:/Tornado2.2/target/h/bootpLib.h"








 

# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 36 "d:/Tornado2.2/target/h/bootpLib.h" 2
# 1 "d:/Tornado2.2/target/h/netinet/in.h" 1
 

 
# 37 "d:/Tornado2.2/target/h/netinet/in.h"

 
# 49 "d:/Tornado2.2/target/h/netinet/in.h"










# 1 "d:/Tornado2.2/target/h/net/if.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/net/if.h"

 
# 60 "d:/Tornado2.2/target/h/net/if.h"









# 1 "d:/Tornado2.2/target/h/sys/socket.h" 1
 

 

 

 
# 41 "d:/Tornado2.2/target/h/sys/socket.h"

 
# 71 "d:/Tornado2.2/target/h/sys/socket.h"














 



 








 















 














 






struct opthdr {
	long 	level;			 
	long	name;			 
	long	len;			 
};




 


struct	linger {
	int	l_onoff;		 
	int	l_linger;		 
};

 




 





































 



struct sockaddr {
	u_char	sa_len;			 
	u_char	sa_family;		 
	char	sa_data[14];		 
};

typedef struct sockaddr SOCKADDR;

 



struct sockproto {
	u_short	sp_family;		 
	u_short	sp_protocol;		 
};

 

































 










# 289 "d:/Tornado2.2/target/h/sys/socket.h"

 



















 




 



struct msghdr {
	caddr_t	msg_name;		 
	u_int	msg_namelen;		 
	struct	iovec *msg_iov;		 
	u_int	msg_iovlen;		 
	caddr_t	msg_control;		 
	u_int	msg_controllen;		 
 


	int	msg_flags;		 
};
















 





struct cmsghdr {
	u_int	cmsg_len;		 
	int	cmsg_level;		 
	int	cmsg_type;		 
 
};

 



 








 












# 70 "d:/Tornado2.2/target/h/net/if.h" 2
# 1 "d:/Tornado2.2/target/h/net/if_arp.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/net/if_arp.h"

 
# 49 "d:/Tornado2.2/target/h/net/if_arp.h"











 
# 70 "d:/Tornado2.2/target/h/net/if_arp.h"
struct	arphdr {
	u_short	ar_hrd;		 


	u_short	ar_pro;		 
	u_char	ar_hln;		 
	u_char	ar_pln;		 
	u_short	ar_op;		 






 









};

 


struct arpreq {
	struct	sockaddr arp_pa;		 
	struct	sockaddr arp_ha;		 
	int	arp_flags;			 
};
 

















# 71 "d:/Tornado2.2/target/h/net/if.h" 2
# 1 "d:/Tornado2.2/target/h/net/route.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/net/route.h"

 
# 52 "d:/Tornado2.2/target/h/net/route.h"








# 1 "d:/Tornado2.2/target/h/net/socketvar.h" 1
 

 
 
# 17 "d:/Tornado2.2/target/h/net/socketvar.h"

 
# 46 "d:/Tornado2.2/target/h/net/socketvar.h"










# 1 "d:/Tornado2.2/target/h/selectLib.h" 1
 

 

 
# 32 "d:/Tornado2.2/target/h/selectLib.h"









# 1 "d:/Tornado2.2/target/h/sys/times.h" 1
 

 

 
# 23 "d:/Tornado2.2/target/h/sys/times.h"












 




struct timeval
    {
    long tv_sec;	 
    long tv_usec;	 
    };

struct timezone
    {
    int	tz_minuteswest;	 
    int	tz_dsttime;	 
    };













# 42 "d:/Tornado2.2/target/h/selectLib.h" 2

 





typedef enum
    {
    SELREAD,
    SELWRITE
    } SELECT_TYPE;

# 1 "d:/Tornado2.2/target/h/private/selectLibP.h" 1
 

 

 













# 1 "d:/Tornado2.2/target/h/lstLib.h" 1
 

 

 
# 28 "d:/Tornado2.2/target/h/lstLib.h"












 

typedef struct node		 
    {
    struct node *next;		 
    struct node *previous;	 
    } NODE;


 

typedef struct			 
    {
    NODE node;			 
    int count;			 
    } LIST;

 


 




extern void	lstLibInit (void);
extern NODE *	lstFirst (LIST *pList);
extern NODE *	lstGet (LIST *pList);
extern NODE *	lstLast (LIST *pList);
extern NODE *	lstNStep (NODE *pNode, int nStep);
extern NODE *	lstNext (NODE *pNode);
extern NODE *	lstNth (LIST *pList, int nodenum);
extern NODE *	lstPrevious (NODE *pNode);
extern int 	lstCount (LIST *pList);
extern int 	lstFind (LIST *pList, NODE *pNode);
extern void 	lstAdd (LIST *pList, NODE *pNode);
extern void 	lstConcat (LIST *pDstList, LIST *pAddList);
extern void 	lstDelete (LIST *pList, NODE *pNode);
extern void 	lstExtract (LIST *pSrcList, NODE *pStartNode, NODE *pEndNode,
	  		    LIST *pDstList);
extern void 	lstFree (LIST *pList);
extern void 	lstInit (LIST *pList);
extern void 	lstInsert (LIST *pList, NODE *pPrev, NODE *pNode);


# 105 "d:/Tornado2.2/target/h/lstLib.h"









# 20 "d:/Tornado2.2/target/h/private/selectLibP.h" 2
# 1 "d:/Tornado2.2/target/h/private/semLibP.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/private/semLibP.h"


# 212 "d:/Tornado2.2/target/h/private/semLibP.h"

# 21 "d:/Tornado2.2/target/h/private/selectLibP.h" 2

typedef struct selWkNode
    {
    NODE		linkedListHooks; 
    BOOL		dontFree;	 
    int			taskId;		 
    int			fd;		 
    SELECT_TYPE		type;		 
    } SEL_WAKEUP_NODE;

typedef struct
    {
    SEMAPHORE		listMutex;	 
    SEL_WAKEUP_NODE	firstNode;	 
    LIST		wakeupList;	 
    } SEL_WAKEUP_LIST;

typedef struct selContext
    {
    SEMAPHORE	wakeupSem;		 
    BOOL     	pendedOnSelect;		 

    fd_set     *pReadFds;		 
    fd_set     *pWriteFds;		 

     

    fd_set     *pOrigReadFds;		 
    fd_set     *pOrigWriteFds;		 
    int		width;			 

     
# 63 "d:/Tornado2.2/target/h/private/selectLibP.h"

    } SEL_CONTEXT;


 



extern void	selectInit		(int numFiles);
extern void	selTaskDeleteHookAdd 	(void);
















# 56 "d:/Tornado2.2/target/h/selectLib.h" 2

 



extern SELECT_TYPE  selWakeupType 	(SEL_WAKEUP_NODE *pWakeupNode);
extern STATUS 	    selNodeAdd 	      	(SEL_WAKEUP_LIST *pWakeupList,
			    		 SEL_WAKEUP_NODE *pWakeupNode);
extern STATUS 	    selNodeDelete 	(SEL_WAKEUP_LIST *pWakeupList,
			       		 SEL_WAKEUP_NODE *pWakeupNode);
extern int 	    selWakeupListLen 	(SEL_WAKEUP_LIST *pWakeupList);
extern void 	    selWakeup 		(SEL_WAKEUP_NODE *pWakeupNode);
extern void 	    selWakeupAll 	(SEL_WAKEUP_LIST *pWakeupList, 
					 SELECT_TYPE type);
extern void 	    selWakeupListInit 	(SEL_WAKEUP_LIST *pWakeupList);
extern void 	    selWakeupListTerm 	(SEL_WAKEUP_LIST *pWakeupList);
extern int	    select 		(int width, fd_set *pReadFds, 
					 fd_set *pWriteFds, fd_set *pExceptFds,
					 struct timeval *pTimeOut);


# 89 "d:/Tornado2.2/target/h/selectLib.h"







# 57 "d:/Tornado2.2/target/h/net/socketvar.h" 2
# 1 "d:/Tornado2.2/target/h/net/uio.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/net/uio.h"

 





















struct iovec {
	caddr_t	iov_base;
	int	iov_len;
};

enum	uio_rw { UIO_READ, UIO_WRITE };

 
enum uio_seg {
	UIO_USERSPACE,		 
	UIO_SYSSPACE,		 
	UIO_USERISPACE		 
};

struct uio {
	struct	iovec *uio_iov;
	int	uio_iovcnt;
	off_t	uio_offset;
	int	uio_resid;
	enum	uio_seg uio_segflg;
	enum	uio_rw uio_rw;



};
















# 58 "d:/Tornado2.2/target/h/net/socketvar.h" 2
# 1 "d:/Tornado2.2/target/h/net/mbuf.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/net/mbuf.h"

 
# 62 "d:/Tornado2.2/target/h/net/mbuf.h"










# 1 "d:/Tornado2.2/target/h/net/unixLib.h" 1
 

 
 
# 15 "d:/Tornado2.2/target/h/net/unixLib.h"














 

















 































            
 



extern int 	splnet (void);
extern int 	splimp (void);
extern void 	splx (int x);
extern void 	panic (char *msg);
extern void 	wakeup (SEM_ID semId);
extern void 	ksleep (SEM_ID semId);
extern char *	_netMalloc (int bufSize, UCHAR type, int canWait); 
extern void	_netFree (char * pBuf); 
extern void * 	hashinit (int 	elements, int type, u_long * hashmask);


# 107 "d:/Tornado2.2/target/h/net/unixLib.h"








# 73 "d:/Tornado2.2/target/h/net/mbuf.h" 2

# 1 "d:/Tornado2.2/target/h/memLib.h" 1
 

 

 
# 49 "d:/Tornado2.2/target/h/memLib.h"


# 195 "d:/Tornado2.2/target/h/memLib.h"

# 75 "d:/Tornado2.2/target/h/net/mbuf.h" 2
# 1 "d:/Tornado2.2/target/h/string.h" 1
 

 

 
# 19 "d:/Tornado2.2/target/h/string.h"











# 40 "d:/Tornado2.2/target/h/string.h"



extern void *	memchr (const void *__s, int __c, size_t __n);
extern int 	memcmp (const void *__s1, const void *__s2, size_t __n);
extern void *	memcpy (void *__s1, const void *__s2, size_t __n);
extern void *	memmove (void *__s1, const void *__s2, size_t __n);
extern void *	memset (void *__s, int __c, size_t __n);

extern char *	strcat (char *__s1, const char *__s2);
extern char *	strchr (const char *__s, int __c);
extern int 	strcmp (const char *__s1, const char *__s2);
extern int 	strcoll (const char *__s1, const char *__s2);
extern char *	strcpy (char *__s1, const char *__s2);
extern size_t 	strcspn (const char *__s1, const char *__s2);
extern size_t 	strlen (const char *__s);
extern char *	strncat (char *__s1, const char *__s2, size_t __n);
extern int 	strncmp (const char *__s1, const char *__s2, size_t __n);
extern char *	strncpy (char *__s1, const char *__s2, size_t __n);
extern char *	strpbrk (const char *__s1, const char *__s2);
extern char *	strrchr (const char *__s, int __c);
extern size_t 	strspn (const char *__s1, const char *__s2);
extern char *	strstr (const char *__s1, const char *__s2);
extern char *	strtok (char *__s, const char *__sep);
extern size_t 	strxfrm (char *__s1, const char *__s2, size_t __n);
extern char *	strerror(int __errcode);


extern char *	strtok_r (char *__s, const char *__sep, char **__ppLast);



extern int	strerror_r (int __errcode, char *__buf);
extern void 	bcopy (const char *source, char *dest, int nbytes);
extern void 	bcopyBytes (char *source, char *dest, int nbytes);
extern void 	bcopyWords (char *source, char *dest, int nwords);
extern void 	bcopyLongs (char *source, char *dest, int nlongs);
extern void 	bfill (char *buf, int nbytes, int ch);
extern void 	bfillBytes (char *buf, int nbytes, int ch);
extern void 	bzero (char *buffer, int nbytes);
extern int 	bcmp (char *buf1, char *buf2, int nbytes);
extern void 	binvert (char *buf, int nbytes);
extern void 	bswap (char *buf1, char *buf2, int nbytes);
extern void 	uswab (char *source, char *destination, int nbytes);
extern void 	swab (char *source, char *dest, int nbytes);
extern char *	index (const char *s, int c);
extern char *	rindex (const char *s, int c);



# 138 "d:/Tornado2.2/target/h/string.h"







# 76 "d:/Tornado2.2/target/h/net/mbuf.h" 2
# 1 "d:/Tornado2.2/target/h/netBufLib.h" 1
 

 

 
# 26 "d:/Tornado2.2/target/h/netBufLib.h"












 


















 






























 













 
 
 
 

























 











 







































 























 






 






 










 




 



 








 



 



 



 





    











                    











                    



                    








 
# 314 "d:/Tornado2.2/target/h/netBufLib.h"

typedef struct
    {
    int		mBlkNum;		 
    int		clBlkNum;		 
    char * 	memArea;		 
    int		memSize;		 
    } M_CL_CONFIG;

 







typedef struct clDesc
    {
    int		clSize;			 
    int		clNum;			 
    char *	memArea;		 
    int		memSize;		 
    } CL_DESC; 

 

typedef struct clBuff
    {
    struct clBuff *	pClNext; 	 
    } CL_BUF;

typedef CL_BUF * CL_BUF_ID; 

 

typedef struct clPool
    {
    int			clSize;		 
    int			clLg2;		 
    int			clNum; 		 
    int			clNumFree; 	 
    int			clUsage;	 
    CL_BUF_ID		pClHead;	 
    struct netPool *	pNetPool;	 
    } CL_POOL; 

typedef CL_POOL * CL_POOL_ID; 

 

typedef struct mHdr
    {
    struct mBlk *	mNext;		 
    struct mBlk *	mNextPkt;	 
    char *		mData;		 
    int			mLen;		 
    UCHAR		mType;		 
    UCHAR		mFlags;		 
    USHORT		reserved; 
    } M_BLK_HDR;

 

typedef struct	pktHdr
    {
    struct ifnet *	rcvif;		 
    int			len;		 
    } M_PKT_HDR;

typedef union clBlkList
    {
    struct clBlk * 	pClBlkNext;	 
    char * 		pClBuf;		 
    } CL_BLK_LIST;
    
 

typedef struct clBlk
    {
    CL_BLK_LIST 	clNode;		 
    UINT		clSize;		 
    int			clRefCnt;	 
    FUNCPTR		pClFreeRtn;	 
    int			clFreeArg1;	 
    int			clFreeArg2;	 
    int			clFreeArg3;	 
    struct netPool *	pNetPool;	 
    } CL_BLK;

 

typedef struct mBlk
    {
    M_BLK_HDR 	mBlkHdr; 		 
    M_PKT_HDR	mBlkPktHdr;		 
    CL_BLK *	pClBlk;			 
    } M_BLK;

 

typedef struct mbstat
    {
    ULONG	mNum;			 
    ULONG	mDrops;			 
    ULONG	mWait;			 
    ULONG	mDrain;			 
    ULONG	mTypes[256];		 
    } M_STAT;

typedef M_BLK * 	M_BLK_ID;
typedef CL_BLK *	CL_BLK_ID;
typedef struct netPool 	NET_POOL;
typedef struct poolFunc POOL_FUNC;
typedef NET_POOL * 	NET_POOL_ID;

struct	poolFunc			 
    {
     
    STATUS	(*pInitRtn) (NET_POOL_ID pNetPool, M_CL_CONFIG * pMclBlkConfig,
                             CL_DESC * pClDescTbl, int clDescTblNumEnt,
			     BOOL fromKheap);

     
    void	(*pMblkFreeRtn) (NET_POOL_ID pNetPool, M_BLK_ID pMblk);

     
    void	(*pClBlkFreeRtn) (CL_BLK_ID pClBlk);

     
    void	(*pClFreeRtn) (NET_POOL_ID pNetPool, char * pClBuf);

     
    M_BLK_ID 	(*pMblkClFreeRtn) (NET_POOL_ID pNetPool, M_BLK_ID pMblk);

     
    M_BLK_ID	(*pMblkGetRtn) (NET_POOL_ID pNetPool, int canWait, UCHAR type);

     
    CL_BLK_ID	(*pClBlkGetRtn) (NET_POOL_ID pNetPool, int canWait);
    
     
    char *	(*pClGetRtn) (NET_POOL_ID pNetPool, CL_POOL_ID pClPool);

     
    STATUS	(*pMblkClGetRtn) (NET_POOL_ID pNetPool, M_BLK_ID pMblk,
                                  int bufSize, int canWait, BOOL bestFit);

     
    CL_POOL_ID	(*pClPoolIdGetRtn) (NET_POOL_ID pNetPool, int	bufSize,
                                    BOOL bestFit);
    };

struct netPool				 
    {
    M_BLK_ID	pmBlkHead;		 
    CL_BLK_ID	pClBlkHead;		 
    int		mBlkCnt;		 
    int		mBlkFree;		 
    int		clMask;			 
    int		clLg2Max;		 
    int		clSizeMax;		 
    int		clLg2Min;		 
    int		clSizeMin;		 
    CL_POOL * 	clTbl [((16 - 6) + 1)];	 
    M_STAT *	pPoolStat;		 
    POOL_FUNC *	pFuncTbl;		 
    };

                     
                    
extern STATUS 		netBufLibInit (void);
extern STATUS 		netPoolInit (NET_POOL_ID pNetPool,
                                     M_CL_CONFIG * pMclBlkConfig,
                                     CL_DESC * pClDescTbl, int clDescTblNumEnt,
                                     POOL_FUNC * pFuncTbl);
extern STATUS		netPoolDelete (NET_POOL_ID);
extern void		netMblkFree (NET_POOL_ID pNetPool, M_BLK_ID pMblk);
extern void		netClBlkFree (NET_POOL_ID pNetPool, CL_BLK_ID pClBlk);
extern void 		netClFree (NET_POOL_ID pNetPool, UCHAR * pClBuf);
extern M_BLK_ID 	netMblkClFree (M_BLK_ID pMblk);
extern void		netMblkClChainFree (M_BLK_ID pMblk);
extern M_BLK_ID 	netMblkGet (NET_POOL_ID pNetPool, int canWait,
                                    UCHAR type);
extern CL_BLK_ID	netClBlkGet (NET_POOL_ID pNetPool, int canWait);
extern char *	 	netClusterGet (NET_POOL_ID pNetPool,
                                       CL_POOL_ID pClPool);
extern STATUS 	 	netMblkClGet (NET_POOL_ID pNetPool, M_BLK_ID pMblk,
                                      int bufSize, int canWait, BOOL bestFit);
extern M_BLK_ID 	netTupleGet (NET_POOL_ID pNetPool, int bufSize,
                                     int canWait, UCHAR type, BOOL bestFit);

extern M_BLK_ID 	netTupleGet2 (NET_POOL_ID, int, int);

extern CL_BLK_ID  	netClBlkJoin (CL_BLK_ID pClBlk, char * pClBuf,
                                      int size, FUNCPTR pFreeRtn, int arg1,
                                      int arg2, int arg3);
extern M_BLK_ID  	netMblkClJoin (M_BLK_ID pMblk, CL_BLK_ID pClBlk);
extern CL_POOL_ID 	netClPoolIdGet (NET_POOL_ID pNetPool, int bufSize,
                                        BOOL bestFit);

extern int 		netMblkToBufCopy (M_BLK_ID pMblk, char * pBuf,
                                          FUNCPTR pCopyRtn);
extern int		netMblkOffsetToBufCopy (M_BLK_ID pMblk, int offset,
                                                char * pBuf, int len,
                                                FUNCPTR	pCopyRtn);
extern M_BLK_ID 	netMblkDup (M_BLK_ID pSrcMblk, M_BLK_ID	pDestMblk);
extern M_BLK_ID 	netMblkChainDup (NET_POOL_ID pNetPool, M_BLK_ID	pMblk,
                                         int offset, int len, int canWait);












# 77 "d:/Tornado2.2/target/h/net/mbuf.h" 2





 























 



 


 













 





 





 





 





 






 








# 176 "d:/Tornado2.2/target/h/net/mbuf.h"

# 194 "d:/Tornado2.2/target/h/net/mbuf.h"

 










 








 















 

 
# 242 "d:/Tornado2.2/target/h/net/mbuf.h"




 
# 269 "d:/Tornado2.2/target/h/net/mbuf.h"
        




    
 















 

extern struct mbstat 	mbstat;			 
extern M_CL_CONFIG	mClBlkConfig;		 
extern CL_DESC 		clDescTbl [];		 
extern int		clDescTblNumEnt; 	 
extern M_CL_CONFIG	sysMclBlkConfig;	 
extern CL_DESC 		sysClDescTbl [];	 
extern int		sysClDescTblNumEnt; 	 


extern NET_POOL_ID	_pNetDpool;		 
extern NET_POOL_ID	_pNetSysPool;		 


 

extern int max_linkhdr;		 
extern int max_protohdr;	 
extern int max_hdr;		 
extern int max_datalen;		 

extern struct	mBlk *netMblkClFree(struct mBlk *);
extern struct	mBlk *m_getclr (int, UCHAR, int, BOOL);
extern struct	mBlk *m_prepend (struct mBlk *, int, int);
extern struct	mBlk *m_pullup (struct mBlk *, int);
extern void	m_adj (struct mBlk *, int);
extern void	netMblkClChainFree(struct mBlk *);
extern void 	m_cat (struct mBlk *, struct mBlk *);
extern struct 	mBlk *m_devget (char *, int, int, struct ifnet *,
				void (*copy)());
struct mBlk *	mBufClGet (int, UCHAR, register int, BOOL); 
struct mBlk * 	mHdrClGet (int, UCHAR, register int, BOOL); 

extern struct mBlk * bcopy_to_mbufs (u_char * buf, int totlen, int off0,
                                     struct ifnet * ifp, int width);
extern struct mBlk * build_cluster (u_char * buf, int totlen,
                                    struct ifnet * ifp, u_char ctype,
                                    u_char * pRefcnt, FUNCPTR freeRtn,
                                    int arg1, int arg2, int arg3);
extern int	copyFromMbufs (char * pIobuf, struct mBlk * pMbuf, int width);







# 59 "d:/Tornado2.2/target/h/net/socketvar.h" 2





 






struct socket
    {
    short	so_type;		 
    short	so_options;		 
    short	so_linger;		 
    short	so_state;		 
    caddr_t	so_pcb;			 
    struct	protosw *so_proto;	 

     



    int		so_userArg;		 
    SEM_ID	so_timeoSem;		 
    int		so_fd;			 

     
# 99 "d:/Tornado2.2/target/h/net/socketvar.h"

    struct	socket *so_head;	 
    struct	socket *so_q0;		 
    struct	socket *so_q;		 
    short	so_q0len;		 
    short	so_qlen;		 
    short	so_qlimit;		 
    short	so_timeo;		 
    u_short	so_error;		 
    short	so_pgrp;		 
    u_long	so_oobmark;		 

     

    struct	sockbuf
	{
	u_long		sb_cc;		 
	u_long		sb_hiwat;	 
	u_long		sb_mbcnt;	 
	u_long		sb_mbmax;	 
	u_long		sb_lowat;	 
	struct		mBlk *sb_mb;	 
	struct		proc *sb_sel;	 
	short		sb_timeo;	 
	short		sb_flags;	 

	SEM_ID		sb_Sem;		 
	int		sb_want;	 
	} so_rcv, so_snd;










    void	(*so_upcall) (struct socket *so, caddr_t arg, int waitf);
    caddr_t	so_upcallarg;		 
    BOOL 	selectFlag; 		 
    SEL_WAKEUP_LIST so_selWakeupList;  
    int         vsid;                  
    };






 















 



 









 



 





 







 







 







 








 















extern VOIDFUNCPTR sowakeupHook;

extern u_long	sb_max;

 


 
extern	char netio[], netcon[], netcls[];

 


extern int soo_ioctl (struct socket * so, int cmd, caddr_t data);
extern int soo_select (struct socket *so, SEL_WAKEUP_NODE *wakeupNode);
extern int soo_unselect (struct socket *so, SEL_WAKEUP_NODE *wakeupNode); 

struct mBlk;
struct sockaddr;

extern void	sbappend (struct sockbuf *sb, struct mBlk *m);
extern int	sbappendaddr (struct sockbuf *sb, struct sockaddr *asa,
	    struct mBlk *m0, struct mBlk *control);
extern int	sbappendcontrol (struct sockbuf *sb, struct mBlk *m0,
	    struct mBlk *control);
extern void	sbappendrecord (struct sockbuf *sb, struct mBlk *m0);
extern void	sbcheck (struct sockbuf *sb);
extern void	sbcompress (struct sockbuf *sb, struct mBlk *m, struct mBlk *n);
extern void	sbdrop (struct sockbuf *sb, int len);
extern void	sbdroprecord (struct sockbuf *sb);
extern void	sbflush (struct sockbuf *sb);
extern void	sbinsertoob (struct sockbuf *sb, struct mBlk *m0);
extern void	sbrelease (struct sockbuf *sb);
extern int	sbreserve (struct sockbuf *sb, u_long cc);
extern void	sbwait (struct sockbuf *sb);
extern void	sbwakeup(struct socket *so, struct sockbuf *sb,
			 SELECT_TYPE wakeupType);
extern int	sb_lock (struct sockbuf *sb);
extern int	soabort (struct socket *so);
extern int	soaccept (struct socket *so, struct mBlk *nam);
extern int	sobind (struct socket *so, struct mBlk *nam);
extern void	socantrcvmore (struct socket *so);
extern void	socantsendmore (struct socket *so);
extern int	soclose (struct socket *so);
extern int	soconnect (struct socket *so, struct mBlk *nam);
extern int	soconnect2 (struct socket *so1, struct socket *so2);
extern int	socreate (int dom, struct socket **aso, int type, int proto);
extern int	sodisconnect (struct socket *so);
extern void	sofree (struct socket *so);
extern int	sogetopt (struct socket *so, int level, int optname,
	    struct mBlk **mp);
extern void	sohasoutofband (struct socket *so);
extern void	soisconnected (struct socket *so);
extern void	soisconnecting (struct socket *so);
extern void	soisdisconnected (struct socket *so);
extern void	soisdisconnecting (struct socket *so);
extern int	solisten (struct socket *so, int backlog);
extern struct socket *
	sonewconn1 (struct socket *head, int connstatus);
extern void	soqinsque (struct socket *head, struct socket *so, int q);
extern int	soqremque (struct socket *so, int q);
extern int	soreceive (struct socket *so, struct mBlk **paddr, 
			   struct uio *pUio, struct mBlk **mp0, struct mBlk **
			   controlp, int *flagsp);
extern int	soreserve (struct socket *so, u_long sndcc, u_long rcvcc);
extern void	sorflush (struct socket *so);
extern int	sosend (struct socket *so, struct mBlk *addr, struct uio *uio,
	    struct mBlk *top, struct mBlk *control, int flags);
extern int	sosetopt (struct socket *so, int level, int optname,
	    struct mBlk *m0);
extern int	soshutdown (struct socket *so, int how);
extern void	sowakeup (struct socket *so, struct sockbuf *sb, 
			  SELECT_TYPE wakeupType);







# 61 "d:/Tornado2.2/target/h/net/route.h" 2
# 1 "d:/Tornado2.2/target/h/net/radix.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/net/radix.h"

 





















 



struct radix_node {
	struct	radix_mask *rn_mklist;	 
	struct	radix_node *rn_p;	 
	short	rn_b;			 
	char	rn_bmask;		 
	u_char	rn_flags;		 



	union {
		struct {			 
			caddr_t	rn_Key;	 
			caddr_t	rn_Mask;	 
			struct	radix_node *rn_Dupedkey;
		} rn_leaf;
		struct {			 
			int	rn_Off;		 
			struct	radix_node *rn_L; 
			struct	radix_node *rn_R; 
		}rn_node;
	}		rn_u;





};








 



extern struct radix_mask {
	short	rm_b;			 
	char	rm_unused;		 
	u_char	rm_flags;		 
	struct	radix_mask *rm_mklist;	 
	union	{
		caddr_t	rmu_mask;		 
		struct	radix_node *rmu_leaf;	 
	}	rm_rmu;
	int	rm_refs;		 
} *rn_mkfreelist;













struct radix_node_head {
	struct	radix_node *rnh_treetop;
	int	rnh_addrsize;		 
	int	rnh_pktsize;		 
	struct	radix_node *(*rnh_addaddr)	 
		(void *v, void *mask,
		     struct radix_node_head *head, struct radix_node nodes[]);
	struct	radix_node *(*rnh_addpkt)	 
		(void *v, void *mask,
		     struct radix_node_head *head, struct radix_node nodes[]);
	struct	radix_node *(*rnh_deladdr)	 
		(void *v, void *mask, struct radix_node_head *head);
	struct	radix_node *(*rnh_delpkt)	 
		(void *v, void *mask, struct radix_node_head *head);
	struct	radix_node *(*rnh_matchaddr)	 
		(void *v, struct radix_node_head *head);
        struct  radix_node *(*rnh_lookup)        
                (void *v, void *mask, struct radix_node_head *head);
	struct	radix_node *(*rnh_matchpkt)	 
		(void *v, struct radix_node_head *head);
	int	(*rnh_walktree)			 
		(struct radix_node_head *head, int (*f)(), void *w);
	struct	radix_node rnh_nodes[3];	 
};















void	 rn_init (void);

int	 rn_inithead (struct radix_node_head **, int);
int	 rn_destroyhead (struct radix_node_head *);
int	 rn_refines (void *, void *);
int	 rn_walksubtree (struct radix_node_head *, void *, void *,
                         int (*)(), void *);
int	 rn_walktree (struct radix_node_head *, int (*)(), void *);
struct radix_node
	 *rn_addmask (void *, int, int),
	 *rn_addroute (void *, void *, struct radix_node_head *,
			struct radix_node [2]),
	 *rn_delete (void *, void *, struct radix_node_head *),
	 *rn_insert (void *, struct radix_node_head *, int *,
			struct radix_node [2]),
	 *rn_match (void *, struct radix_node_head *),
	 *rn_newpair (void *, int, struct radix_node[2]),
	 *rn_search (void *, struct radix_node *),
	 *rn_search_m (void *, struct radix_node *, void *);








# 62 "d:/Tornado2.2/target/h/net/route.h" 2






 






 




struct route
    {
    struct	rtentry *ro_rt;
    struct	sockaddr ro_dst;
    };

 



struct rt_metrics {
	u_long	rmx_locks;	 
	u_long	rmx_mtu;	 
	u_long	rmx_expire;	 
	u_long	rmx_recvpipe;	 
	u_long	rmx_sendpipe;	 
	u_long	rmx_ssthresh;	 
	u_long	rmx_rtt;	 
	u_long	rmx_rttvar;	 
	u_short	rmx_hopcount;	 
        u_short rmx_mss; 	 

         

        long 	value1;
        long 	value2;
        long 	value3;
        long 	value4;
        long 	value5;
        long 	routeTag;
        u_char  weight;
};

 






struct sockaddr_gate
    {
    u_char         gate_len;
    u_char         gate_family;
    u_char         routeProto;
    u_char         weight;
    u_long         gate_addr;
    long           value1;
    long           value2;
    long           value3;
    long           value4;
    long           value5;
    long           routeTag;
    };

 







 










struct rtentry {
	struct	radix_node rt_nodes[2];	 


	struct	sockaddr *rt_gateway;	 
	short	rt_flags;		 
	short	rt_refcnt;		 
	u_long	rt_use;			 
	struct	ifnet *rt_ifp;		 
	struct	ifaddr *rt_ifa;		 
	struct	sockaddr *rt_genmask;	 
	caddr_t	rt_llinfo;		 
	struct	rtentry *rt_gwroute;	 
        int	rt_mod;			  
	struct	rt_metrics rt_rmx;	 
        struct  rtentry *rt_parent;      
};

 



struct ortentry {
	u_long	rt_hash;		 
	struct	sockaddr rt_dst;	 
	struct	sockaddr rt_gateway;	 
	short	rt_flags;		 
	short	rt_refcnt;		 
	u_long	rt_use;			 
	struct	ifnet *rt_ifp;		 
        int	rt_mod;			 
};
























 

struct	rtstat
    {
    short	rts_badredirect;	 
    short	rts_dynamic;		 
    short	rts_newgateway;		 
    short	rts_unreach;		 
    short	rts_wildcard;		 
    };

 


struct rt_msghdr {
	u_short	rtm_msglen;	 
	u_char	rtm_version;	 
	u_char	rtm_type;	 
	u_short	rtm_index;	 
	int	rtm_flags;	 
	int	rtm_addrs;	 
	pid_t	rtm_pid;	 
	int	rtm_seq;	 
	int	rtm_errno;	 
	int	rtm_use;	 
	u_long	rtm_inits;	 
	struct	rt_metrics rtm_rmx;  
};



















# 271 "d:/Tornado2.2/target/h/net/route.h"











# 294 "d:/Tornado2.2/target/h/net/route.h"

 











 












struct rt_addrinfo {
	int	rti_addrs;
	struct	sockaddr *rti_info[8];
};

struct route_cb {
	int	ip_count;
	int	ns_count;
	int	iso_count;
	int	any_count;
};











extern	struct	rtstat	rtstat;
extern	struct	radix_node_head *rt_tables[];
extern  int	rtmodified; 




int	 route_init (void);

void	 rt_maskedcopy (struct sockaddr *,
	    struct sockaddr *, struct sockaddr *);
int	 rt_setgate (struct rtentry *,
	    struct sockaddr *, struct sockaddr *);
void	 rtable_init (void **);
void	 rtalloc (struct route *);
struct rtentry *
	 rtalloc1 (struct sockaddr *, int);
void	 rtfree (struct rtentry *);
int	 rtinit (struct ifaddr *, int, int);
int	 rtioctl (int, caddr_t);
int	 rtredirect (struct sockaddr *, struct sockaddr *,
	    struct sockaddr *, int, struct sockaddr *, struct rtentry **);
int	 rtrequest (int, struct sockaddr *,
	    struct sockaddr *, struct sockaddr *, int, struct rtentry **);







# 72 "d:/Tornado2.2/target/h/net/if.h" 2
# 1 "d:/Tornado2.2/target/h/ifLib.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/ifLib.h"









 


extern STATUS   ifAddrAdd (char *interfaceName, char *interfaceAddress,
                           char *broadcastAddress, int subnetMask);
extern STATUS 	ifAddrSet (char *interfaceName, char *interfaceAddress);
extern STATUS 	ifAddrDelete (char *interfaceName, char *interfaceAddress);
extern STATUS 	ifAddrGet (char *interfaceName, char *interfaceAddress);
extern STATUS 	ifBroadcastSet (char *interfaceName, char *broadcastAddress);
extern STATUS 	ifBroadcastGet (char *interfaceName, char *broadcastAddress);
extern STATUS 	ifDstAddrSet (char *interfaceName, char *dstAddress);
extern STATUS 	ifDstAddrGet (char *interfaceName, char *dstAddress);
extern STATUS 	ifMaskSet (char *interfaceName, int netMask);
extern STATUS 	ifMaskGet (char *interfaceName, int *netMask);
extern STATUS 	ifFlagChange (char *interfaceName, int flags, BOOL on);
extern STATUS 	ifFlagSet (char *interfaceName, int flags);
extern STATUS 	ifFlagGet (char *interfaceName, int *flags);
extern STATUS 	ifMetricSet (char *interfaceName, int metric);
extern STATUS 	ifMetricGet (char *interfaceName, int *pMetric);
extern int 	ifRouteDelete (char *ifName, int unit);
extern struct 	ifnet *ifunit (char *ifname);
extern struct	ifnet *ifIndexToIfpNoLock (int ifIndex);
extern struct	ifnet *ifIndexToIfp (int ifIndex);
extern unsigned short	ifNameToIfIndex (char *ifname);
extern STATUS	ifIndexToIfName (unsigned short ifIndex, char *ifname);
extern STATUS	ifUnnumberedSet(char *, char *, char *, char *);
extern int 	ifAllRoutesDelete (char *, int);

# 79 "d:/Tornado2.2/target/h/ifLib.h"






# 73 "d:/Tornado2.2/target/h/net/if.h" 2





 
# 102 "d:/Tornado2.2/target/h/net/if.h"

struct	ifqueue {
	struct	mBlk *ifq_head;
	struct	mBlk *ifq_tail;
	int	ifq_len;
	int	ifq_maxlen;
	int	ifq_drops;
};

struct mBlk;
struct proc;
struct rtentry;
struct socket;
struct ether_header;

 



struct	if_data {
	 
	u_char	ifi_type;		 
	u_char	ifi_addrlen;		 
	u_char	ifi_hdrlen;		 
	u_long	ifi_mtu;		 
	u_long	ifi_metric;		 
	u_long	ifi_baudrate;		 
	 
	u_long	ifi_ipackets;		 
	u_long	ifi_ierrors;		 
	u_long	ifi_opackets;		 
	u_long	ifi_oerrors;		 
	u_long	ifi_collisions;		 
	u_long	ifi_ibytes;		 
	u_long	ifi_obytes;		 
	u_long	ifi_imcasts;		 
	u_long	ifi_omcasts;		 
	u_long	ifi_iqdrops;		 
	u_long	ifi_noproto;		 
	u_long  ifi_lastchange;		 
};

 





struct ifnet {
	char	*if_name;		 
	struct	ifnet *if_next;		 
	struct	ifaddr *if_addrlist;	 
	int	if_pcount;		 
	caddr_t	if_bpf;			 
	u_short	if_index;		 
	short	if_unit;		 
	short	if_timer;		 
	short	if_flags;		 
	struct	if_data if_data;	 
	struct	mBlk *	pInmMblk; 	 
	int	(*if_init) 
		(int unit);		 
	int	(*if_output)		 
		(struct ifnet *, struct mBlk *, struct sockaddr *, 
		 struct rtentry *);	
	int	(*if_start) 		 
    		(struct ifnet *);
	int	(*if_ioctl)		 
		(struct ifnet *, int cmd, caddr_t data);
	int	(*if_reset)		 
		(int unit);	
	int	(*if_resolve)();	 
	void	(*if_watchdog)		 
		(int unit);
	struct	ifqueue if_snd;		 
        void * 	pCookie; 		 



};







































 






 








# 245 "d:/Tornado2.2/target/h/net/if.h"








 






# 268 "d:/Tornado2.2/target/h/net/if.h"

# 283 "d:/Tornado2.2/target/h/net/if.h"

# 294 "d:/Tornado2.2/target/h/net/if.h"


# 304 "d:/Tornado2.2/target/h/net/if.h"




 





struct ifaddr {
	struct	sockaddr *ifa_addr;	 
	struct	sockaddr *ifa_dstaddr;	 

	struct	sockaddr *ifa_netmask;	 
	struct	ifnet *ifa_ifp;		 
	struct	ifaddr *ifa_next;	 
	void	(*ifa_rtrequest)();	 
	u_short	ifa_flags;		 
	short	ifa_refcnt;		 
	int	ifa_metric;		 
};


 



struct if_msghdr {
	u_short	ifm_msglen;	 
	u_char	ifm_version;	 
	u_char	ifm_type;	 
	int	ifm_addrs;	 
	int	ifm_flags;	 
	u_short	ifm_index;	 
	struct	if_data ifm_data; 
};

 



struct ifa_msghdr {
	u_short	ifam_msglen;	 
	u_char	ifam_version;	 
	u_char	ifam_type;	 
	int	ifam_addrs;	 
	int	ifam_flags;	 
	u_short	ifam_index;	 
	int	ifam_metric;	 
};

 





struct	ifreq {

	char	ifr_name[16];		 
	union {
		struct	sockaddr ifru_addr;
		struct	sockaddr ifru_dstaddr;
		struct	sockaddr ifru_broadaddr;
		short	ifru_flags;
		int	ifru_metric;
		caddr_t	ifru_data;
	} ifr_ifru;






};

struct ifaliasreq {
	char	ifra_name[16];		 
	struct	sockaddr ifra_addr;
	struct	sockaddr ifra_broadaddr;
	struct	sockaddr ifra_mask;
};

 



struct	ifmreq {

	char	ifr_name[16];		 
	int	ifr_tableLen;
	char 	*ifr_table;
};

 





struct	ifconf {
	int	ifc_len;		 
	union {
		caddr_t	ifcu_buf;
		struct	ifreq *ifcu_req;
	} ifc_ifcu;


};

 




typedef struct mtuQuery_t 
	{
	UCHAR family;
	UINT32 dstIpAddr;
	UINT32 mtu;
	} MTU_QUERY;











extern struct ifnet * 	ifnet;		 
extern struct ifqueue 	rawintrq;	 

extern STATUS		if_attach (struct ifnet *);
extern void		if_down (struct ifnet *);
extern void		if_qflush (struct ifqueue *);


extern void		if_slowtimo (void);




extern void		if_up (struct ifnet *);
extern int		ifconf (int, caddr_t);
extern void		ifinit (void);
extern int		ifioctl (struct socket *, u_long, caddr_t);
extern int		ifpromisc (struct ifnet *, int);
extern struct ifaddr *	ifa_ifwithaddr (struct sockaddr *);
extern struct ifaddr *	ifa_ifwithaf (int);
extern struct ifaddr *	ifa_ifwithdstaddr (struct sockaddr *);
extern struct ifaddr *	ifa_ifwithnet (struct sockaddr *);
extern struct ifaddr *	ifaof_ifpforaddr (struct sockaddr *, struct ifnet *);
extern struct ifaddr *	ifa_ifwithroute(int, struct sockaddr *, 
					struct sockaddr*);
extern void		ifafree (struct ifaddr *);
extern void		link_rtrequest (int, struct rtentry *,
                                        struct sockaddr *);







# 60 "d:/Tornado2.2/target/h/netinet/in.h" 2






 




 




















 









 


struct in_addr {
	u_long s_addr;
};

 










































 


struct sockaddr_in {
	u_char	sin_len;
	u_char	sin_family;
	u_short	sin_port;
	struct	in_addr sin_addr;
	char	sin_zero[8];
};

 





struct sockaddr_rt {
	u_char	srt_len;
	u_char	srt_family;
        u_char  srt_proto;
        u_char  srt_tos;          
	struct	in_addr srt_addr;
	char	sin_zero[8];
        };












 






struct ip_opts {
	struct	in_addr ip_dst;		 
	char	opts[40];		 
};

 

















 






 


struct ip_mreq {
	struct	in_addr imr_multiaddr;	 
	struct	in_addr imr_interface;	 
};





 








# 271 "d:/Tornado2.2/target/h/netinet/in.h"

 



















 



# 308 "d:/Tornado2.2/target/h/netinet/in.h"
































extern	struct domain inetdomain;
extern  BOOL inet_netmatch(struct sockaddr_in *sin1, struct sockaddr_in *sin2);
extern  void in_makeaddr_b(u_long net, u_long host, struct in_addr * pAddr);
extern 	u_long in_lnaof();
extern	void in_ifaddr_remove();
extern	int in_broadcast (struct in_addr, struct ifnet *);
extern	int in_canforward (struct in_addr);
extern	int in_cksum (struct mBlk *, int);
extern	int in_localaddr (struct in_addr);
extern	u_long in_netof (struct in_addr);
extern	void in_socktrim (struct sockaddr_in *);
extern  struct in_ifaddr *in_iaonnetof(u_long net);







# 37 "d:/Tornado2.2/target/h/bootpLib.h" 2

 
						 














 




 






















                                                 
typedef struct bootp_msg
    {
    unsigned char	bp_op;			 
    unsigned char	bp_htype;       	 
    unsigned char	bp_hlen;		 
    unsigned char	bp_hops;		 
    unsigned long	bp_xid;			 
    unsigned short	bp_secs;		 
    unsigned short	bp_unused;
    struct in_addr	bp_ciaddr;		 
    struct in_addr	bp_yiaddr;		 
    struct in_addr	bp_siaddr;		 
    struct in_addr	bp_giaddr;		 
    unsigned char	bp_chaddr [16]; 	 
    unsigned char	bp_sname [64]; 	 
    unsigned char	bp_file [128];	 
    unsigned char	bp_vend [64];	 
    } BOOTP_MSG;



struct in_addr_list
    {
    unsigned char 	num;
    struct in_addr * 	addrlist;
    };

struct ushort_list
    {
    unsigned char 	num;
    unsigned short * 	shortlist;
    };

struct bootpParams 	 
    {
    struct in_addr * 		netmask;
    unsigned short *		timeOffset;
    struct in_addr_list * 	routers;
    struct in_addr_list * 	timeServers;
    struct in_addr_list * 	nameServers;
    struct in_addr_list * 	dnsServers;
    struct in_addr_list * 	logServers;
    struct in_addr_list * 	cookieServers;
    struct in_addr_list * 	lprServers;
    struct in_addr_list * 	impressServers;
    struct in_addr_list * 	rlpServers;
    char * 			clientName;
    unsigned short *		filesize;
    char * 			dumpfile; 
    char * 			domainName;
    struct in_addr * 		swapServer;
    char * 			rootPath;
    char * 			extoptPath;
    unsigned char *		ipForward;
    unsigned char *		nonlocalSourceRoute;
    struct in_addr_list * 	policyFilter;
    unsigned short *		maxDgramSize;
    unsigned char *		ipTTL;
    unsigned long *		mtuTimeout;
    struct ushort_list * 	mtuTable;
    unsigned short * 		intfaceMTU;
    unsigned char * 		allSubnetsLocal;
    struct in_addr * 		broadcastAddr;
    unsigned char * 		maskDiscover;
    unsigned char * 		maskSupplier;
    unsigned char * 		routerDiscover;
    struct in_addr * 		routerDiscAddr;
    struct in_addr_list * 	staticRoutes;
    unsigned char * 		arpTrailers;
    unsigned long * 		arpTimeout;
    unsigned char * 		etherPacketType;
    unsigned char * 		tcpTTL;
    unsigned long * 		tcpInterval;
    unsigned char * 		tcpGarbage;
    char * 			nisDomain;
    struct in_addr_list * 	nisServers;
    struct in_addr_list * 	ntpServers;
    char * 			vendString;
    struct in_addr_list * 	nbnServers;
    struct in_addr_list * 	nbddServers;
    unsigned char * 		nbNodeType;
    char * 			nbScope;
    struct in_addr_list * 	xFontServers;
    struct in_addr_list * 	xDisplayManagers; 
    char * 			nispDomain;
    struct in_addr_list * 	nispServers;
    struct in_addr_list * 	ipAgents;
    struct in_addr_list * 	smtpServers;
    struct in_addr_list * 	pop3Servers;
    struct in_addr_list * 	nntpServers;
    struct in_addr_list * 	wwwServers;
    struct in_addr_list * 	fingerServers;
    struct in_addr_list * 	ircServers;
    struct in_addr_list * 	stServers;
    struct in_addr_list * 	stdaServers;
    };







































































 











 


STATUS 	bootpLibInit (int);
STATUS 	bootpParamsGet (struct ifnet *, u_int, struct in_addr *,
                        struct in_addr *, char *, char *,
                        struct bootpParams *);
STATUS 	bootpMsgGet (struct ifnet *, struct in_addr *, USHORT, USHORT,
                     BOOTP_MSG *, u_int);














# 218 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/bsdSockLib.h" 1
 

 

 
# 14 "d:/Tornado2.2/target/h/bsdSockLib.h"








 

# 1 "d:/Tornado2.2/target/h/sockFunc.h" 1
 

 

 
# 15 "d:/Tornado2.2/target/h/sockFunc.h"








 




 

 





typedef struct sockFunc			 
    {
    FUNCPTR	libInitRtn;		 
    FUNCPTR	acceptRtn;		 
    FUNCPTR	bindRtn;		 
    FUNCPTR	connectRtn;		 
    FUNCPTR	connectWithTimeoutRtn;	 
    FUNCPTR	getpeernameRtn;		 
    FUNCPTR	getsocknameRtn;		 
    FUNCPTR	listenRtn;		 
    FUNCPTR	recvRtn;		 
    FUNCPTR	recvfromRtn;		 
    FUNCPTR	recvmsgRtn;		 
    FUNCPTR	sendRtn;		 
    FUNCPTR	sendtoRtn;		 
    FUNCPTR	sendmsgRtn;		 
    FUNCPTR	shutdownRtn;		 
    FUNCPTR	socketRtn;		 
    FUNCPTR	getsockoptRtn;		 
    FUNCPTR	setsockoptRtn;		 
    FUNCPTR     zbufRtn;		 
    } SOCK_FUNC;

 

typedef struct sockLibMap
    {
    int			domainMap;	 
    int			domainReal;	 
    SOCK_FUNC *		pSockFunc;	 
    struct sockLibMap *	pNext;		 
    } SOCK_LIB_MAP;
    




 







# 25 "d:/Tornado2.2/target/h/bsdSockLib.h" 2

 





 



extern SOCK_FUNC *bsdSockLibInit (void);
extern STATUS 	bsdBind (int s, struct sockaddr *name, int namelen);
extern STATUS 	bsdConnect (int s, struct sockaddr *name, int namelen);
extern STATUS 	bsdConnectWithTimeout (int sock, struct sockaddr *adrs,
				    int adrsLen, struct timeval *timeVal);
extern STATUS 	bsdGetpeername (int s, struct sockaddr *name, int *namelen);
extern STATUS 	bsdGetsockname (int s, struct sockaddr *name, int *namelen);
extern STATUS 	bsdGetsockopt (int s, int level, int optname, char *optval,
			    int *optlen);
extern STATUS 	bsdListen (int s, int backlog);
extern STATUS 	bsdSetsockopt (int s, int level, int optname, char *optval,
			    int optlen);
extern STATUS 	bsdShutdown (int s, int how);
extern int 	bsdAccept (int s, struct sockaddr *addr, int *addrlen);
extern int 	bsdRecv (int s, char *buf, int bufLen, int flags);
extern int 	bsdRecvfrom (int s, char *buf, int bufLen, int flags,
			  struct sockaddr *from, int *pFromLen);
extern int 	bsdRecvmsg (int sd, struct msghdr *mp, int flags);
extern int 	bsdSend (int s, char *buf, int bufLen, int flags);
extern int 	bsdSendmsg (int sd, struct msghdr *mp, int flags);
extern int 	bsdSendto (int s, caddr_t buf, int bufLen, int flags,
			struct sockaddr *to, int tolen);
extern int 	bsdSocket (int domain, int type, int protocol);
extern STATUS   bsdZbufSockRtn ( void );


# 84 "d:/Tornado2.2/target/h/bsdSockLib.h"







# 219 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/cacheLib.h" 1
 

 

 
# 49 "d:/Tornado2.2/target/h/cacheLib.h"









# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 59 "d:/Tornado2.2/target/h/cacheLib.h" 2
# 1 "d:/Tornado2.2/target/h/limits.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/limits.h"










 








# 1 "d:/Tornado2.2/target/h/tool/gnu/limits.h" 1



 



 



 




 





 



 












 

 




 



 








 



 













 




# 96 "d:/Tornado2.2/target/h/tool/gnu/limits.h"




# 37 "d:/Tornado2.2/target/h/limits.h" 2


































# 60 "d:/Tornado2.2/target/h/cacheLib.h" 2

 









 












 



 






typedef enum				 
    {







    INSTRUCTION_CACHE = 0,
    DATA_CACHE        = 1
    } CACHE_TYPE;

typedef	UINT	CACHE_MODE;		 

typedef	struct				 
    {
    FUNCPTR	enableRtn;		 
    FUNCPTR	disableRtn;		 
    FUNCPTR	lockRtn;		 
    FUNCPTR	unlockRtn;		 
    FUNCPTR	flushRtn;		 
    FUNCPTR	invalidateRtn;		 
    FUNCPTR	clearRtn;		 

    FUNCPTR	textUpdateRtn;		 
    FUNCPTR	pipeFlushRtn;		 
    FUNCPTR	dmaMallocRtn;		 
    FUNCPTR	dmaFreeRtn;		 
    FUNCPTR	dmaVirtToPhysRtn;	 
    FUNCPTR	dmaPhysToVirtRtn;	 
    } CACHE_LIB;

 

typedef	struct				 
    {
    FUNCPTR	flushRtn;		 
    FUNCPTR	invalidateRtn;		 
    FUNCPTR	virtToPhysRtn;		 
    FUNCPTR	physToVirtRtn;		 
    } CACHE_FUNCS;


 


































































 

extern CACHE_LIB	cacheLib;
extern CACHE_FUNCS	cacheNullFuncs;	 
extern CACHE_FUNCS	cacheDmaFuncs;	 
extern CACHE_FUNCS	cacheUserFuncs;	 

extern FUNCPTR		cacheDmaMallocRtn;
extern FUNCPTR		cacheDmaFreeRtn;
extern CACHE_MODE	cacheDataMode;	 
extern BOOL		cacheDataEnabled;
extern BOOL		cacheMmuAvailable;

 



extern STATUS	cacheLibInit (CACHE_MODE inst, CACHE_MODE data);

extern STATUS	cacheArchLibInit (CACHE_MODE inst, CACHE_MODE data);

extern STATUS	cacheEnable (CACHE_TYPE cache);
extern STATUS	cacheDisable (CACHE_TYPE cache);
extern STATUS	cacheLock (CACHE_TYPE cache, void * adrs, size_t bytes);
extern STATUS	cacheUnlock (CACHE_TYPE cache, void * adrs, size_t bytes);
extern STATUS	cacheFlush (CACHE_TYPE cache, void * adrs, size_t bytes);
extern STATUS	cacheInvalidate (CACHE_TYPE cache, void *adrs, size_t bytes);
extern STATUS	cacheClear (CACHE_TYPE cache, void * adrs, size_t bytes);
extern STATUS	cacheTextUpdate (void * adrs, size_t bytes);
extern STATUS	cachePipeFlush (void);

extern void *	cacheDmaMalloc (size_t bytes);
extern STATUS	cacheDmaFree (void * pBuf);

extern STATUS	cacheDrvFlush (CACHE_FUNCS * pFuncs, void * adrs, size_t bytes);
extern STATUS	cacheDrvInvalidate (CACHE_FUNCS * pFuncs, void * adrs,
				    size_t bytes);
extern void *   cacheDrvVirtToPhys (CACHE_FUNCS * pFuncs, void * adrs);
extern void *   cacheDrvPhysToVirt (CACHE_FUNCS * pFuncs, void * adrs);

extern void	cacheFuncsSet (void);


# 272 "d:/Tornado2.2/target/h/cacheLib.h"



 


























# 1 "d:/Tornado2.2/target/h/arch/i86/cacheI86Lib.h" 1
 

 
 
# 14 "d:/Tornado2.2/target/h/arch/i86/cacheI86Lib.h"



















extern STATUS cacheArchEnable (CACHE_TYPE cache);
extern STATUS cacheArchDisable (CACHE_TYPE cache);
extern STATUS cacheArchLock (CACHE_TYPE cache, void * address, size_t bytes);
extern STATUS cacheArchUnlock (CACHE_TYPE cache,
				void * address, size_t bytes);
extern STATUS cacheArchClear (CACHE_TYPE cache, void * address, size_t bytes);
extern STATUS cacheArchFlush (CACHE_TYPE cache, void * address, size_t bytes);
extern void * cacheArchDmaMalloc (size_t bytes);
extern STATUS cacheArchDmaFree (void * pBuf);
extern STATUS cacheArchTextUpdate (void * address, size_t bytes);
extern STATUS cacheArchClearEntry (CACHE_TYPE cache, void * address);

extern void cacheI86Reset (void);
extern void cacheI86Enable (void);
extern void cacheI86Disable (void);
extern void cacheI86Lock (void);
extern void cacheI86Unlock (void);
extern void cacheI86Clear (void);
extern void cacheI86Flush (void);
extern void cachePen4Clear (CACHE_TYPE cache, void * address, size_t bytes);
extern void cachePen4Flush (CACHE_TYPE cache, void * address, size_t bytes);


# 79 "d:/Tornado2.2/target/h/arch/i86/cacheI86Lib.h"









# 303 "d:/Tornado2.2/target/h/cacheLib.h" 2




















# 220 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/cbioLib.h" 1
 

 

 
# 19 "d:/Tornado2.2/target/h/cbioLib.h"








 
# 1 "d:/Tornado2.2/target/h/blkIo.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/blkIo.h"










typedef struct		 
    {
    FUNCPTR		bd_blkRd;		 
    FUNCPTR		bd_blkWrt;		 
    FUNCPTR		bd_ioctl;		 
    FUNCPTR		bd_reset;		 
    FUNCPTR		bd_statusChk;		 
    BOOL		bd_removable;		 
    ULONG		bd_nBlocks;		 
    ULONG		bd_bytesPerBlk;		 
    ULONG		bd_blksPerTrack;	 
    ULONG		bd_nHeads;		 
    int			bd_retry;		 
    int			bd_mode;		 
    BOOL		bd_readyChanged;	 
    } BLK_DEV;







# 29 "d:/Tornado2.2/target/h/cbioLib.h" 2

 



typedef	unsigned long block_t ;		 
typedef	unsigned long cookie_t ;	 
typedef struct cbioDev * CBIO_DEV_ID ;   

typedef enum                             
        {CBIO_READ, CBIO_WRITE}          
        CBIO_RW;


typedef struct cbioParams	 
    {
    BOOL	cbioRemovable;	 
    block_t 	nBlocks;	 
    size_t 	bytesPerBlk;	 
    size_t	blockOffset;	 
    short	blocksPerTrack;	 
    short	nHeads;		 
    short	retryCnt;	 
    block_t 	lastErrBlk;	 
    int 	lastErrno;	 
    } CBIO_PARAMS;


 



 
extern STATUS cbioLibInit
    (
    void
    );

 
extern	STATUS cbioBlkRW		
    (
    CBIO_DEV_ID		dev,
    block_t		startBlock,
    block_t		numBlocks,
    addr_t		buffer,
    CBIO_RW		rw,
    cookie_t *		pCookie
    );


 
extern STATUS cbioBytesRW		
    (
    CBIO_DEV_ID 	dev,
    block_t		startBlock,
    off_t		offset,
    addr_t		buffer,
    size_t		nBytes,
    CBIO_RW		rw,
    cookie_t *		pCookie
    );


 
extern STATUS cbioBlkCopy		
    (
    CBIO_DEV_ID 	dev,
    block_t		srcBlock,
    block_t		dstBlock,
    block_t		numBlocks
    );


 
extern STATUS cbioIoctl			
    (
    CBIO_DEV_ID		dev,
    int			command,
    addr_t		arg
    );


 
extern int cbioModeGet  
    (
    CBIO_DEV_ID dev
    );


 
extern STATUS cbioModeSet  
    (
    CBIO_DEV_ID dev,
    int mode
    );


 
extern int cbioRdyChgdGet 
    (
    CBIO_DEV_ID dev
    );


 
extern STATUS cbioRdyChgdSet  
    (
    CBIO_DEV_ID dev,
    BOOL status
    );


 
extern STATUS cbioLock  
    (
    CBIO_DEV_ID	dev,
    int		timeout	 
    );


 
extern STATUS cbioUnlock 
    (
    CBIO_DEV_ID	dev
    );


 
extern STATUS cbioParamsGet		
    (
    CBIO_DEV_ID dev,
    CBIO_PARAMS * pCbioParams		
    );


 
extern STATUS cbioShow	
    (
    CBIO_DEV_ID dev
    );

              
extern STATUS cbioDevVerify                     
    (                                           
    CBIO_DEV_ID device                          
    );                                          
                                                
        
extern CBIO_DEV_ID cbioWrapBlkDev               
    (                                           
    BLK_DEV * pDevice                            
    );                                          

 












 











# 221 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/ctype.h" 1
 

 

 
# 18 "d:/Tornado2.2/target/h/ctype.h"












extern int      isalnum(int __c);
extern int      isalpha(int __c);
extern int      iscntrl(int __c);
extern int      isdigit(int __c);
extern int      isgraph(int __c);
extern int      islower(int __c);
extern int      isprint(int __c);
extern int      ispunct(int __c);
extern int      isspace(int __c);
extern int      isupper(int __c);
extern int      isxdigit(int __c);
extern int      tolower(int __c);
extern int      toupper(int __c);


# 61 "d:/Tornado2.2/target/h/ctype.h"











extern  const unsigned char *__ctype;










































# 222 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/dosFsLib.h" 1
 

 

 
# 30 "d:/Tornado2.2/target/h/dosFsLib.h"












 


 











 




 




 








 

 
 

typedef struct           
    {                            
    enum
        { _AUTO=0, _FAT12=12, _FAT16=16, _FAT32=32 }
                fatType;         
    const char * sysId ;         
    int         secPerClust;     
    short       nResrvd;         
    short       maxRootEnts;     
    char        nFats;           
    ULONG       secPerFat;       
    ULONG       nClust;          
    ULONG       nHidden;         
    ULONG       volSerial ;      
    int         secPerTrack;     
    char        nHeads;          
    char        mediaByte;       
    char        volLabel[ 11 ];  
    } DOS_VOL_CONFIG;

  




typedef struct DOS_VOLUME_DESC *        DOS_VOLUME_DESC_ID;

 








 
 



































 

 

 

extern STATUS dosFsLibInit( int ignored );
extern STATUS dosFsDevCreate ( char * pDevName, CBIO_DEV_ID cbio,
			       u_int maxFiles, u_int autoChkLevel );
extern STATUS dosFsVolUnmount ( void * pDev );
extern STATUS dosFsShow( void * dev, u_int level );
extern STATUS dosFsVolFormat( void * pDev, int opt, FUNCPTR pPromptFunc );
extern void dosFsFmtLibInit( void );
extern void dosChkLibInit( void );
extern STATUS dosDirOldLibInit( void );
extern STATUS dosVDirLibInit ( void );
extern STATUS dosFsFatInit ( void );
extern DOS_VOLUME_DESC_ID dosFsVolDescGet (void * pDevNameOrPVolDesc, 
                                           u_char **   ppTail);

extern STATUS dosFsLastAccessDateEnable (DOS_VOLUME_DESC_ID dosVolDescId, 
                                  BOOL enable);

extern STATUS dosSetVolCaseSens  
    (
    DOS_VOLUME_DESC_ID pVolDesc,
    BOOL sensitivity  
    );

 








 


# 206 "d:/Tornado2.2/target/h/dosFsLib.h"


# 220 "d:/Tornado2.2/target/h/dosFsLib.h"






 


typedef	void * DOS_VOL_DESC ;

 

typedef struct		 
    {
    UINT8		dospt_status;		 
    UINT8		dospt_startHead;	 
    short		dospt_startSec;		 
    UINT8		dospt_type;		 
    UINT8		dospt_endHead;		 
    short		dospt_endSec;		 
    ULONG		dospt_absSec;		 
    ULONG		dospt_nSectors;		 
    } __attribute__((packed, aligned(2))) DOS_PART_TBL;


 
 
typedef struct           
    {
    int         dosdt_year;              
    int         dosdt_month;             
    int         dosdt_day;               
    int         dosdt_hour;              
    int         dosdt_minute;            
    int         dosdt_second;            
    } DOS_DATE_TIME;

 




 


 





 
extern DOS_VOL_DESC *	dosFsDevInit (char *pDevName, BLK_DEV *pBlkDev,
		                      DOS_VOL_CONFIG *pConfig);
extern STATUS 		dosFsInit (int maxFiles);
extern DOS_VOL_DESC *	dosFsMkfs (char *pVolName, BLK_DEV *pBlkDev);

 








# 223 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/dpartCbio.h" 1
 

 

 
# 14 "d:/Tornado2.2/target/h/dpartCbio.h"








 
typedef struct
    {
    u_long	offset ;	 
    u_long	nBlocks ;	 
    int		flags ;		 
    int		spare ;		 
    } PART_TABLE_ENTRY ;

 


 
extern CBIO_DEV_ID dpartDevCreate(CBIO_DEV_ID subDev,
	int nPart, FUNCPTR pPartDecodeFunc);
extern CBIO_DEV_ID dpartPartGet (CBIO_DEV_ID masterHandle, int partNum);








# 224 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/errno.h" 1
 

 

 







 
# 36 "d:/Tornado2.2/target/h/errno.h"


# 189 "d:/Tornado2.2/target/h/errno.h"

# 225 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/errnoLib.h" 1
 

 

 
# 25 "d:/Tornado2.2/target/h/errnoLib.h"









# 1 "d:/Tornado2.2/target/h/errno.h" 1
 

 

 







 
# 36 "d:/Tornado2.2/target/h/errno.h"


# 189 "d:/Tornado2.2/target/h/errno.h"

# 35 "d:/Tornado2.2/target/h/errnoLib.h" 2

 





extern STATUS   errnoOfTaskSet (int taskId, int errorValue);
extern STATUS   errnoSet (int errorValue);
extern int      errnoGet (void);
extern int      errnoOfTaskGet (int taskId);
















# 226 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/fcntl.h" 1
 

 

 
# 15 "d:/Tornado2.2/target/h/fcntl.h"









# 1 "d:/Tornado2.2/target/h/sys/fcntlcom.h" 1
 

 
 





 

















 























 









 












 









 










 










 


 



















 









 
struct flock {
	short	l_type;		 
	short	l_whence;	 
	long	l_start;	 
	long	l_len;		 
	short	l_pid;		 
	short	l_xxx;		 
};


 
struct eflock {
	short	l_type;		 
	short	l_whence;	 
	long	l_start;	 
	long	l_len;		 
	short	l_pid;		 
	short	l_xxx;		 
	long	l_rpid;		 
	long	l_rsys;		 
};



 







# 25 "d:/Tornado2.2/target/h/fcntl.h" 2





extern int      open (const char *name, int flags, int mode );
extern int      creat (const char *name, int mode );














# 227 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/fioLib.h" 1
 

 

 
# 30 "d:/Tornado2.2/target/h/fioLib.h"









# 1 "d:/Tornado2.2/host/x86-win32/lib/gcc-lib/i586-wrs-vxworks/2.9-PentiumIII-010221/include/stdarg.h" 1 3
 
# 19 "d:/Tornado2.2/host/x86-win32/lib/gcc-lib/i586-wrs-vxworks/2.9-PentiumIII-010221/include/stdarg.h" 3

 






 











 



typedef __builtin_va_list __gnuc_va_list;


 



 












 
 














# 96 "d:/Tornado2.2/host/x86-win32/lib/gcc-lib/i586-wrs-vxworks/2.9-PentiumIII-010221/include/stdarg.h" 3

 




 

 

 

typedef __gnuc_va_list va_list;

























# 40 "d:/Tornado2.2/target/h/fioLib.h" 2


 



extern void 	fioLibInit (void);
extern void 	fioFltInstall (FUNCPTR formatRtn, FUNCPTR scanRtn);
extern int 	fioFormatV (const char *fmt, va_list vaList,
			    FUNCPTR outRoutine, int outarg);
extern char *	nindex (char *buffer, int c, int n);
extern int 	fioScanV (const char *fmt, FUNCPTR getRtn, int getArg,
			  int *pUnget, va_list vaList);
extern int 	fioRead (int fd, char *buffer, int maxbytes);
extern int 	fioRdString (int fd, char string[], int maxbytes);
extern void 	printExc (char* fmt, int arg1, int arg2, int arg3,
			  int arg4, int arg5);


# 70 "d:/Tornado2.2/target/h/fioLib.h"







# 228 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/ftpLib.h" 1
 

 

 
# 31 "d:/Tornado2.2/target/h/ftpLib.h"








 






 

 







 





 






 





 





 





 





 








 

 





























 

extern BOOL ftplDebug;         

 

extern BOOL ftplPasvModeDisable; 

 



extern STATUS ftpLogin (int ctrlSock, char *user, char *passwd, char *account);
extern STATUS ftpXfer (char *host, char *user, char *passwd, char *acct,
                       char *cmd, char *dirname, char *filename,
                       int *pCtrlSock, int *pDataSock);
extern int ftpCommand (int ctrlSock, char *fmt, int arg1, int arg2,
                       int arg3, int arg4, int arg5, int arg6);
extern int ftpCommandEnhanced (int ctrlSock, char *fmt, int arg1, int arg2,
                               int arg3, int arg4, int arg5, int arg6,
                               char *replyString,
                               int replyStringLength);
extern int ftpDataConnGet (int dataSock);
extern int ftpDataConnInit (int ctrlSock);
extern int ftpDataConnInitPassiveMode (int ctrlSock);
extern int ftpHookup (char *host);
extern void ftpLibDebugOptionsSet (UINT32 options);
extern int ftpReplyGet (int ctrlSock, BOOL expecteof);
extern int ftpReplyGetEnhanced (int ctrlSock, BOOL expecteof, char *replyString,
                                int replyStringLength);
extern STATUS ftpTransientConfigSet (UINT32 maxRetryCount, UINT32 retryInterval);
extern STATUS ftpTransientConfigGet (UINT32 *maxRetryCount, UINT32 *retryInterval);
extern STATUS ftpTransientFatalInstall (FUNCPTR configlette);

# 187 "d:/Tornado2.2/target/h/ftpLib.h"







# 229 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/hostLib.h" 1
 

 

 
# 26 "d:/Tornado2.2/target/h/hostLib.h"













 









typedef struct hostname_struct
    {
    struct hostname_struct *link;
    char *name;
    } HOSTNAME;

typedef struct
    {
    NODE node;
    HOSTNAME hostName;
    struct in_addr netAddr;
    } HOSTENTRY;





 



extern STATUS 	hostAdd (char *hostName, char *hostAddr);
extern STATUS 	hostDelete (char *name, char *addr);
extern STATUS 	hostGetByAddr (int addr, char *name);
extern int 	gethostname (char *name, int nameLen);
extern int 	hostGetByName (char *name);
extern int 	sethostname (char *name, int nameLen);
extern void 	hostTblInit (void);
extern int      hostTblSearchByName (char *name);
extern STATUS   hostTblSearchByAddr (int addr, char *name);




# 95 "d:/Tornado2.2/target/h/hostLib.h"







# 230 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/icmpLib.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/icmpLib.h"








 

# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 28 "d:/Tornado2.2/target/h/icmpLib.h" 2

# 1 "d:/Tornado2.2/target/h/netinet/ip.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/netinet/ip.h"

 
# 51 "d:/Tornado2.2/target/h/netinet/ip.h"










 





# 80 "d:/Tornado2.2/target/h/netinet/ip.h"

 









 






struct ip {

	u_int	ip_hl:4,		 
		ip_v:4,			 





		ip_tos:8,		 
		ip_len:16;		 
	u_short	ip_id;			 
	short	ip_off;			 



	u_char	ip_ttl;			 
	u_char	ip_p;			 
	u_short	ip_sum;			 
	struct	in_addr ip_src,ip_dst;	 
};



 







 











 






















 








struct	ipt_ta {
	struct in_addr ipt_addr;
	u_long ipt_time;
};

 


struct	ip_timestamp {
        u_int	ipt_code:8,		 
		ipt_len:8,		 
		ipt_ptr:8,		 

		ipt_flg:4,		 
		ipt_oflw:4;		 





	union ipt_timestamp {
		u_long	ipt_time[1];
		struct	ipt_ta ipt_ta[1];
	} ipt_timestamp;
};





 




 








 

















# 30 "d:/Tornado2.2/target/h/icmpLib.h" 2

 






 



STATUS    icmpMaskGet  (char *ifName, char *src, char *dst, int *pSubnet);
void 	  ipHeaderCreate (int proto, struct in_addr *pSrcAddr,
		          struct in_addr *pDstAddr, struct ip *pih,
			  int length);
u_char * ipHeaderVerify (struct ip *pih, int length, int proto);
STATUS   etherSend (struct ifnet *pIf, struct ip *pDatagram, int length);

















# 231 "d:/Tornado2.2/target/config/all/bootConfig.c" 2

# 1 "d:/Tornado2.2/target/h/if_sl.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/if_sl.h"














extern STATUS	slipInit (int unit, char *devName, char *myAddr,
		    char *peerAddr, int baud, BOOL compressEnable,
		    BOOL compressAllow, int mtu);
extern STATUS	slipBaudSet (int unit, int baud);














# 233 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/inetLib.h" 1
 

 

 
# 28 "d:/Tornado2.2/target/h/inetLib.h"








# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 37 "d:/Tornado2.2/target/h/inetLib.h" 2


# 1 "d:/Tornado2.2/target/h/arpa/inet.h" 1
 

 

 
# 24 "d:/Tornado2.2/target/h/arpa/inet.h"

 
# 38 "d:/Tornado2.2/target/h/arpa/inet.h"








 






extern 	unsigned long 	inet_addr (char *);
extern 	char * 		inet_ntoa (struct in_addr);
extern 	struct in_addr 	inet_makeaddr (int, int);
extern 	unsigned long 	inet_network (char *);
















# 40 "d:/Tornado2.2/target/h/inetLib.h" 2

 




 



 




extern int 	inet_lnaof (int inetAddress);
extern int 	inet_netof (struct in_addr inetAddress);
extern void 	inet_makeaddr_b (int netAddr, int hostAddr,
				 struct in_addr *pInetAddr);
extern void 	inet_netof_string (char *inetString, char *netString);
extern void 	inet_ntoa_b (struct in_addr inetAddress, char *pString);
extern STATUS   inet_aton (char * pString, struct in_addr * inetAddress);



# 74 "d:/Tornado2.2/target/h/inetLib.h"







# 234 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/intLib.h" 1
 

 

 
# 48 "d:/Tornado2.2/target/h/intLib.h"









# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 58 "d:/Tornado2.2/target/h/intLib.h" 2
# 1 "d:/Tornado2.2/target/h/regs.h" 1
 

 

 
# 41 "d:/Tornado2.2/target/h/regs.h"

















































# 1 "d:/Tornado2.2/target/h/arch/i86/regsI86.h" 1
 

 

 
# 22 "d:/Tornado2.2/target/h/arch/i86/regsI86.h"














typedef struct			 
    {
    ULONG edi;			 
    ULONG esi;			 
    ULONG ebp;			 
    ULONG esp;			 
    ULONG ebx;			 
    ULONG edx;			 
    ULONG ecx;			 
    ULONG eax;			 
    ULONG eflags;		 
    INSTR *pc;			 
    } REG_SET;

typedef struct cpuid		 
    {
    int highestValue;		 
    int vendorId[3];		 
    int signature;		 
    int featuresEbx;		 
    int featuresEcx;		 
    int featuresEdx;		 
    int cacheEax;		 
    int cacheEbx;		 
    int cacheEcx;		 
    int cacheEdx;		 
    int serialNo64[2];		 
    int brandString[12];	 
    } CPUID;

typedef struct mtrr_fix		 
    {
    char type[8];
    } MTRR_FIX;

typedef struct mtrr_var		 
    {
    long long int base;
    long long int mask;
    } MTRR_VAR;

typedef struct mtrr		 
    {
    int cap[2];			 
    int deftype[2];		 
    MTRR_FIX fix[11];		 
    MTRR_VAR var[8];		 
    } MTRR;
typedef MTRR *		MTRR_ID;

typedef struct gdt		 
    {
    unsigned short	limit00;
    unsigned short	base00;
    unsigned char	base01;
    unsigned char	type;
    unsigned char	limit01;
    unsigned char	base02;
    } GDT;

typedef struct tss		 
    {
    UINT16 link;		 
    UINT16 link_pad;
    UINT32 esp0;		 
    UINT16 ss0;			 
    UINT16 ss0_pad;
    UINT32 esp1;		 
    UINT16 ss1;			 
    UINT16 ss1_pad;
    UINT32 esp2;		 
    UINT16 ss2;			 
    UINT16 ss2_pad;
    UINT32 cr3;			 
    INSTR * eip;		 
    UINT32 eflags;		 
    UINT32 eax;			 
    UINT32 ecx;			 
    UINT32 edx;			 
    UINT32 ebx;			 
    UINT32 esp;			 
    UINT32 ebp;			 
    UINT32 esi;			 
    UINT32 edi;			 
    UINT16 es;			 
    UINT16 es_pad;
    UINT16 cs;			 
    UINT16 cs_pad;
    UINT16 ss;			 
    UINT16 ss_pad;
    UINT16 ds;			 
    UINT16 ds_pad;
    UINT16 fs;			 
    UINT16 fs_pad;
    UINT16 gs;			 
    UINT16 gs_pad;
    UINT16 ldt;			 
    UINT16 ldt_pad;
    UINT16 tflag;		 
    UINT16 iomapb;		 
    UINT32 iobmap[32 + 1];
    UINT32 reserved0;		 
    UINT32 reserved1;
    UINT32 reserved2;
    UINT32 reserved3;
    UINT32 reserved4;
    UINT32 reserved5;
    UINT32 reserved6;
    UINT32 reserved7;
    } TSS;

typedef struct segdesc		 
    {
    UINT16	limitLW;	 
    UINT16	baseLW;		 
    UCHAR	baseMB;		 
    UCHAR	type;		 
    UCHAR	limitUB;	 
    UCHAR	baseUB;		 
    } SEGDESC;

typedef struct callGate		 
    {
    UINT16	offsetLo;
    UINT16	selector;
    UCHAR 	params;
    UCHAR 	type;
    UINT16	offsetHi;
    } CALL_GATE;


 














 










 












 












 















 











 














 













 













































 














 

 








 

















































































 
















































































 































































































 







 









 



 









 





 

 










 









 

 











































































 










































































 












 














 










 








 




 






 



 




 




 



 




 



 




 

































 
















# 91 "d:/Tornado2.2/target/h/regs.h" 2















typedef struct regindex
    {
    char	*regName;	 
    int		regOff;		 







    } REG_INDEX;








# 59 "d:/Tornado2.2/target/h/intLib.h" 2


 





 

extern int intCnt;		 


 



 
# 85 "d:/Tornado2.2/target/h/intLib.h"






 



extern STATUS 	intConnect (VOIDFUNCPTR *vector, VOIDFUNCPTR routine,
	       	    	    int parameter);
extern FUNCPTR 	intHandlerCreate (FUNCPTR routine, int parameter);
extern void 	intLockLevelSet (int newLevel);
extern int 	intLockLevelGet (void);
extern BOOL 	intContext (void);
extern int 	intCount (void);
extern void 	intVecBaseSet (FUNCPTR *baseAddr);
extern FUNCPTR *intVecBaseGet (void);
extern void 	intVecSet (FUNCPTR *vector, FUNCPTR function);
extern FUNCPTR 	intVecGet (FUNCPTR *vector);
extern int 	intLevelSet (int level);
extern int 	intLock (void);
extern int 	intUnlock (int oldSR);
extern int 	intRegsLock (REG_SET *pRegs);
extern void 	intRegsUnlock (REG_SET *pRegs, int lockKey);
extern STATUS   intVecTableWriteProtect (void);

























extern int	intDisable (int);
extern int	intEnable (int);







# 1 "d:/Tornado2.2/target/h/arch/i86/intI86Lib.h" 1
 

 

 














 
















extern FUNCPTR 	intHandlerCreateI86 (FUNCPTR routine, int parameter,
				     FUNCPTR routineBoi, int parameterBoi,
				     FUNCPTR routineEoi, int parameterEoi);
extern void 	intVecSet2 (FUNCPTR * vector, FUNCPTR function,
			    int idtGate, int idtSelector);
extern void	intVecGet2 (FUNCPTR * vector, FUNCPTR * pFunction, 
			    int * pIdtGate, int * pIdtSelector);
















# 147 "d:/Tornado2.2/target/h/intLib.h" 2







# 206 "d:/Tornado2.2/target/h/intLib.h"







# 235 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/ioLib.h" 1
 

 

 
# 89 "d:/Tornado2.2/target/h/ioLib.h"








# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 98 "d:/Tornado2.2/target/h/ioLib.h" 2



# 1 "d:/Tornado2.2/target/h/unistd.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/unistd.h"
















 









 



extern STATUS 		unlink (char *name);
extern STATUS 		close (int fd);
extern int 		read (int fd, char *buffer, size_t maxbytes);
extern int 		write (int fd, char *buffer, size_t nbytes);
extern int 		lseek (int fd, long offset, int whence);
extern STATUS 		chdir (char *pathname);
extern STATUS 		pause (void);
extern BOOL 		isatty (int fd);
extern STATUS 		rmdir (const char *dirName);
extern char *		getcwd (char *buffer, int size);
extern int    		ftruncate (int fildes, off_t length);
extern unsigned int	sleep (unsigned int);
extern unsigned int	alarm (unsigned int);


# 79 "d:/Tornado2.2/target/h/unistd.h"







# 102 "d:/Tornado2.2/target/h/ioLib.h" 2









 















 




















































 










 


 


















 








 









 

 

typedef struct		 
    {
    int entryNum;		 
    char name[(255 + 1)];	 
    int nChars;			 
    short day;			 
    short month;		 
    short year;			 
    } REQ_DIR_ENTRY;

 
						 
typedef struct
    {
    ULONG  inode;		 
    char * fileName;		 
    } INODE_TO_NAME_IOCTL;
					 
 













 

extern int ioMaxLinkLevels;	 
						 
 







extern STATUS 	ioFullFileNameGet ();

extern STATUS 	ioDefPathCat (char *name);
extern STATUS 	ioDefPathSet (char *name);
extern char *	getwd (char *pathname);
extern int 	ioGlobalStdGet (int stdFd);
extern int 	ioTaskStdGet (int taskId, int stdFd);
extern int 	ioctl (int fd, int function, int arg);
extern int      readv (int fd, struct iovec *iov, int iovcnt);
extern void 	ioDefDevGet (char *devName);
extern void 	ioDefDirGet (char *dirName);
extern void 	ioDefPathGet (char *pathname);
extern void 	ioGlobalStdSet (int stdFd, int newFd);
extern void 	ioTaskStdSet (int taskId, int stdFd, int newFd);
extern int      writev (int fd, struct iovec *iov, int iovcnt);


# 314 "d:/Tornado2.2/target/h/ioLib.h"


 









 


















# 236 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/iosLib.h" 1
 

 

 
# 36 "d:/Tornado2.2/target/h/iosLib.h"










# 1 "d:/Tornado2.2/target/h/dllLib.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/dllLib.h"









 

typedef struct dlnode		 
    {
    struct dlnode *next;	 
    struct dlnode *previous;	 
    } DL_NODE;


 

typedef struct			 
    {
    DL_NODE *head;	 
    DL_NODE *tail;	 
    } DL_LIST;

 

 
# 61 "d:/Tornado2.2/target/h/dllLib.h"






 
# 79 "d:/Tornado2.2/target/h/dllLib.h"






 
# 97 "d:/Tornado2.2/target/h/dllLib.h"






 
# 115 "d:/Tornado2.2/target/h/dllLib.h"






 
# 131 "d:/Tornado2.2/target/h/dllLib.h"







 



extern DL_LIST *dllCreate (void);
extern DL_NODE *dllEach (DL_LIST *pList, FUNCPTR routine, int routineArg);
extern DL_NODE *dllGet (DL_LIST *pList);
extern STATUS 	dllDelete (DL_LIST *pList);
extern STATUS 	dllInit (DL_LIST *pList);
extern STATUS 	dllTerminate (DL_LIST *pList);
extern int 	dllCount (DL_LIST *pList);
extern void 	dllAdd (DL_LIST *pList, DL_NODE *pNode);
extern void 	dllInsert (DL_LIST *pList, DL_NODE *pPrev, DL_NODE *pNode);
extern void 	dllRemove (DL_LIST *pList, DL_NODE *pNode);


# 167 "d:/Tornado2.2/target/h/dllLib.h"






# 47 "d:/Tornado2.2/target/h/iosLib.h" 2
# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 48 "d:/Tornado2.2/target/h/iosLib.h" 2

 









typedef struct 		 
    {
    DL_NODE	node;		 
    short	drvNum;		 
    char *	name;		 
    } DEV_HDR;


 




extern STATUS 	iosInit (int max_drivers, int max_files, char *nullDevName);
extern void 	iosShowInit (void);
extern DEV_HDR *iosDevFind (char *name, char ** pNameTail);
extern DEV_HDR *iosFdDevFind (int fd);
extern DEV_HDR *iosNextDevGet (DEV_HDR *pDev);
extern STATUS 	iosClose (int fd);
extern STATUS 	iosDevAdd (DEV_HDR *pDevHdr, char *name, int drvnum);
extern STATUS 	iosDrvRemove (int drvnum, BOOL forceClose);
extern int 	iosCreate (DEV_HDR *pDevHdr, char *fileName, int mode);
extern int 	iosDelete (DEV_HDR *pDevHdr, char *fileName);
extern int 	iosDrvInstall (FUNCPTR pCreate, FUNCPTR pDelete, FUNCPTR pOpen,
			       FUNCPTR pClose, FUNCPTR pRead, FUNCPTR pWrite,
			       FUNCPTR pIoctl);
extern int 	iosFdNew (DEV_HDR *pDevHdr, char *name, int value);
extern int 	iosFdValue (int fd);
extern int 	iosIoctl (int fd, int function, int arg);
extern int 	iosOpen (DEV_HDR *pDevHdr, char *fileName, int flags, int mode);
extern int 	iosRead (int fd, char *buffer, int maxbytes);
extern int 	iosWrite (int fd, char *buffer, int nbytes);
extern void 	iosDevDelete (DEV_HDR *pDevHdr);
extern void 	iosDevShow (void);
extern void 	iosDrvShow (void);
extern void 	iosFdFree (int fd);
extern STATUS 	iosFdSet (int fd, DEV_HDR *pDevHdr, char *name, int value);
extern void 	iosFdShow (void);


# 125 "d:/Tornado2.2/target/h/iosLib.h"







# 237 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/loadAoutLib.h" 1
 

 
 













# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 19 "d:/Tornado2.2/target/h/loadAoutLib.h" 2



 



 




extern STATUS loadAoutInit ();
extern STATUS bootAoutInit ();














# 238 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/loadCoffLib.h" 1
 

 

 
# 27 "d:/Tornado2.2/target/h/loadCoffLib.h"










# 1 "d:/Tornado2.2/target/h/moduleLib.h" 1
 

 

 
# 19 "d:/Tornado2.2/target/h/moduleLib.h"











# 1 "d:/Tornado2.2/target/h/objLib.h" 1
 

 

 
# 33 "d:/Tornado2.2/target/h/objLib.h"


# 112 "d:/Tornado2.2/target/h/objLib.h"

# 31 "d:/Tornado2.2/target/h/moduleLib.h" 2
# 1 "d:/Tornado2.2/target/h/private/objLibP.h" 1
 

 

 









# 80 "d:/Tornado2.2/target/h/private/objLibP.h"

# 32 "d:/Tornado2.2/target/h/moduleLib.h" 2

 






 



 






 

 





 




 






 









 







 



typedef struct
    {
    DL_NODE	segmentNode;	 
    void *	address;	 
    int		size;		 
    int		type;		 
    int		flags;		 
    u_short	checksum;	 

    } SEGMENT;

typedef SEGMENT *SEGMENT_ID;

typedef struct
    {
    OBJ_CORE	objCore;	 
    DL_NODE	moduleNode;	 
    char	name [99];  
    char	path [255];  
    int		flags;		 
    DL_LIST	segmentList;	 
    int		format;		 
    UINT16	group;		 
    DL_LIST	dependencies;	 
    DL_LIST	referents;	 
    VOIDFUNCPTR	* ctors;	 
    VOIDFUNCPTR * dtors;	 
    void *	user1;		 
    void *	reserved1;	 
    void *	reserved2;	 
    void *	reserved3;	 
    void *	reserved4;	 
    } MODULE;

typedef MODULE *MODULE_ID;

typedef struct
    {
    void *	textAddr;	 
    void *	dataAddr;	 
    void *	bssAddr;	 
    int 	textSize;	 
    int 	dataSize;	 
    int 	bssSize;	 
    } MODULE_SEG_INFO;

typedef struct
    {
    char        	name [99];  
    int         	format;           
    int			group;		  
    MODULE_SEG_INFO	segInfo; 	  
    } MODULE_INFO;

 



extern STATUS moduleLibInit (void);
extern MODULE_ID moduleCreate (char *name, int format, int flags);
extern STATUS moduleInit (MODULE_ID moduleId, char *name, int format,
			  int flags);
extern STATUS moduleTerminate (MODULE_ID moduleId);
extern STATUS moduleDelete (MODULE_ID moduleId);
extern MODULE_ID moduleIdFigure (void *moduleNameOrId);
extern STATUS moduleShow (char *moduleNameOrId, int options);
extern STATUS moduleSegAdd (MODULE_ID moduleId, int type, void *location,
			    int length, int flags);
extern SEGMENT_ID moduleSegGet (MODULE_ID moduleId);
extern SEGMENT_ID moduleSegFirst (MODULE_ID moduleId);
extern SEGMENT_ID moduleSegNext (SEGMENT_ID segmentId);
extern SEGMENT_ID moduleSegEach (MODULE_ID moduleId, FUNCPTR routine,
				 int userArg);
extern STATUS moduleCreateHookAdd (FUNCPTR moduleCreateHookRtn);
extern STATUS moduleCreateHookDelete (FUNCPTR moduleCreateHookRtn);
extern MODULE_ID moduleFindByName (char *moduleName);
extern MODULE_ID moduleFindByNameAndPath (char *moduleName, char *pathName);
extern MODULE_ID moduleFindByGroup (int groupNumber);
extern MODULE_ID moduleEach (FUNCPTR routine, int userArg);
extern int moduleIdListGet (MODULE_ID *idList, int maxModules);
extern STATUS moduleInfoGet (MODULE_ID moduleId, MODULE_INFO *pModuleInfo);
extern char * moduleNameGet (MODULE_ID moduleId);
extern int moduleFlagsGet (MODULE_ID moduleId);
STATUS moduleCheck (int options);
 

# 203 "d:/Tornado2.2/target/h/moduleLib.h"







# 38 "d:/Tornado2.2/target/h/loadCoffLib.h" 2


 









 

struct filehdr {
	unsigned short	f_magic;	 
	unsigned short	f_nscns;	 
	long		f_timdat;	 
	long		f_symptr;	 
	long		f_nsyms;	 
	unsigned short	f_opthdr;	 
	unsigned short	f_flags;	 
};


 
# 73 "d:/Tornado2.2/target/h/loadCoffLib.h"















	 
# 110 "d:/Tornado2.2/target/h/loadCoffLib.h"


 












 







 








 














 




typedef	struct aouthdr {
	short		magic;	 
	short		vstamp;	 
	unsigned long	tsize;	 
	unsigned long	dsize;	 
	unsigned long	bsize;	 
	unsigned long	entry;	 
	unsigned long	text_start;	 
	unsigned long	data_start;	 




} AOUTHDR;




 

struct scnhdr {
	char		s_name[8];	 
	long		s_paddr;	 
	long		s_vaddr;	 
	long		s_size;		 
	long		s_scnptr;	 
	long		s_relptr;	 
	long		s_lnnoptr;	 
	unsigned short	s_nreloc;	 
	unsigned short	s_nlnno;	 
	long		s_flags;	 



};

 






 


				 
				 













 











 

 




struct lineno{
	union {
		long l_symndx;	 
		long l_paddr;	 
	} l_addr;
	unsigned short	l_lnno;	 
	char padding[2];	 
};





 






# 283 "d:/Tornado2.2/target/h/loadCoffLib.h"

struct syment {
	union {
		char	_n_name[8];	 
		struct {
			long	_n_zeroes;	 
			long	_n_offset;	 
		} _n_n;
		char	*_n_nptr[2];	 
	} _n;
	long		n_value;	 
	short		n_scnum;	 
	unsigned short	n_type;		 
	char		n_sclass;	 
	char		n_numaux;	 
};



				 








 









 
















































 




















 





























union auxent {
	struct {
		long x_tagndx;	 
		union {
			struct {
			    unsigned short x_lnno;  
			    unsigned short x_size;  
			} x_lnsz;
			long x_fsize;	 
		} x_misc;
		union {
			struct {		 
			    long x_lnnoptr;	 
			    long x_endndx;	 
			} x_fcn;
			struct {		 
			    unsigned short x_dimen[4];
			} x_ary;
		} x_fcnary;
		unsigned short x_tvndx;		 
	} x_sym;

	union {
		char x_fname[14];
		struct {
			long x_zeroes;
			long x_offset;
		} x_n;
	} x_file;

	struct {
		long x_scnlen;			 
		unsigned short x_nreloc;	 
		unsigned short x_nlinno;	 
	} x_scn;

	struct {
		long		x_tvfill;	 
		unsigned short	x_tvlen;	 
		unsigned short	x_tvran[2];	 
	} x_tv;		 


# 482 "d:/Tornado2.2/target/h/loadCoffLib.h"
};






 

struct reloc {
	long r_vaddr;		 
	long r_symndx;		 
	unsigned short r_type;	 





};

 





 







				 








 























 











 























 



extern STATUS    loadCoffInit ();
extern STATUS    bootCoffInit ();
extern MODULE_ID ldCoffModAtSym (int fd, int symFlag, char **ppText,
				 char **ppData, char **ppBss, SYMTAB_ID symTbl);




















# 239 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/loadLib.h" 1
 

 
 
# 43 "d:/Tornado2.2/target/h/loadLib.h"








# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 52 "d:/Tornado2.2/target/h/loadLib.h" 2



 








 













 

extern FUNCPTR loadRoutine;
extern FUNCPTR syncLoadRtn;

typedef struct
    {
    char * addrText;	 
    char * addrData;	 
    char * addrBss;	 
    UINT   sizeText;	 
    UINT   sizeProtectedText;	 
    UINT   sizeData;	 
    UINT   sizeBss;	 
    int	   flagsText;	 
    int	   flagsData;	 
    int	   flagsBss;	 
    } SEG_INFO;

 

extern MODULE_ID loadModule (int fd, int symFlag);
extern MODULE_ID loadModuleAt (int fd, int symFlag, char **ppText,
			       char **ppData, char **ppBss);







# 240 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/logLib.h" 1
 

 

 
# 23 "d:/Tornado2.2/target/h/logLib.h"








 




extern STATUS 	logFdAdd (int fd);
extern STATUS 	logFdDelete (int fd);
extern STATUS 	logInit (int fd, int maxMsgs);




extern int	logMsg (char *fmt, int arg1, int arg2,
			int arg3, int arg4, int arg5, int arg6);


extern void 	logFdSet (int fd);
extern void 	logShow (void);
extern void 	logTask (void);


# 62 "d:/Tornado2.2/target/h/logLib.h"








# 241 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/memLib.h" 1
 

 

 
# 49 "d:/Tornado2.2/target/h/memLib.h"


# 195 "d:/Tornado2.2/target/h/memLib.h"

# 242 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/msgQLib.h" 1
 

 

 
# 25 "d:/Tornado2.2/target/h/msgQLib.h"









# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 35 "d:/Tornado2.2/target/h/msgQLib.h" 2


 





 







 




 

typedef struct msg_q *MSG_Q_ID;	 

typedef struct			 
    {
    int     numMsgs;		 
    int     numTasks;		 

    int     sendTimeouts;	 
    int     recvTimeouts;	 

    int     options;		 
    int     maxMsgs;		 
    int     maxMsgLength;	 

    int     taskIdListMax;	 
    int *   taskIdList;		 

    int     msgListMax;		 
    char ** msgPtrList;		 
    int *   msgLenList;		 

    } MSG_Q_INFO;

 

 










 



extern STATUS 	msgQLibInit (void);
extern MSG_Q_ID msgQCreate (int maxMsgs, int maxMsgLength, int options);
extern STATUS 	msgQDelete (MSG_Q_ID msgQId);
extern STATUS 	msgQSend (MSG_Q_ID msgQId, char *buffer, UINT nBytes,
			  int timeout, int priority);
extern int 	msgQReceive (MSG_Q_ID msgQId, char *buffer, UINT maxNBytes,
			     int timeout);
extern STATUS 	msgQInfoGet (MSG_Q_ID msgQId, MSG_Q_INFO *pInfo);
extern int 	msgQNumMsgs (MSG_Q_ID msgQId);
extern void 	msgQShowInit (void);
extern STATUS 	msgQShow (MSG_Q_ID msgQId, int level);


# 123 "d:/Tornado2.2/target/h/msgQLib.h"







# 243 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/netLib.h" 1
 

 

 
# 28 "d:/Tornado2.2/target/h/netLib.h"








 









 













 

typedef struct ipcfgparams
    {
    int         ipCfgFlags;              
    int         ipDefTtl;                
    int         ipIntrQueueLen;          
    int         ipFragTtl;               
    } IP_CFG_PARAMS;

 

typedef struct icmpcfgparams
    {
    int         icmpCfgFlags;            
    } ICMP_CFG_PARAMS;

 

typedef struct udpcfgparams
    {
    int         udpCfgFlags;             
    int         udpSndSpace;             
    int         udpRcvSpace;             
    } UDP_CFG_PARAMS;

 

typedef struct tcpcfgparams
    {
    int         tcpCfgFlags;             
    int         tcpSndSpace;             
    int         tcpRcvSpace;             
    int         tcpConnectTime;          
    int         tcpReTxThresh;           
    int         tcpMssDflt;              
    int         tcpRttDflt;              
    int         tcpKeepIdle;             
    int         tcpKeepCnt;              
    FUNCPTR	pTcpRandFunc;		 
    } TCP_CFG_PARAMS;







 







 

















 




 













 




 






































 



 






 



extern STATUS   netJobAdd (FUNCPTR routine, int param1, int param2, int param3,
                           int param4, int param5);
extern STATUS   netLibInit (void);
extern void     netErrnoSet (int status);
extern void	netLibGeneralInit (void);
extern void     netTask (void);
extern void     schednetisr (int isrType);
extern STATUS   ipLibInit (IP_CFG_PARAMS * ipCfg);
extern STATUS   rawIpLibInit (void);
extern STATUS   rawLibInit (void);
extern STATUS   udpLibInit (UDP_CFG_PARAMS * udpCfg);
extern STATUS   tcpLibInit (TCP_CFG_PARAMS * tcpCfg);
extern STATUS   icmpLibInit (ICMP_CFG_PARAMS * icmpCfg);
extern STATUS   igmpLibInit (void);
extern STATUS   mCastRouteLibInit (void);
extern void     ipFilterLibInit (void);
extern STATUS   routeSockLibInit (void);
extern void     splSemInit (void);
extern void     mbinit (void);
extern void     domaininit (void);


# 256 "d:/Tornado2.2/target/h/netLib.h"








# 244 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/pipeDrv.h" 1
 

 

 
# 18 "d:/Tornado2.2/target/h/pipeDrv.h"








 



extern STATUS 	pipeDevCreate (char *name, int nMessages, int nBytes);
extern STATUS   pipeDevDelete (char *name, BOOL force);
extern STATUS 	pipeDrv (void);















# 245 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/proxyLib.h" 1
 

 

 
# 14 "d:/Tornado2.2/target/h/proxyLib.h"










extern STATUS 	proxyReg (char *ifName, char *proxyAddr);
extern STATUS 	proxyUnreg (char *ifName, char *proxyAddr);














# 246 "d:/Tornado2.2/target/config/all/bootConfig.c" 2

# 1 "d:/Tornado2.2/target/h/qPriBMapLib.h" 1
 

 

 
# 32 "d:/Tornado2.2/target/h/qPriBMapLib.h"










# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 43 "d:/Tornado2.2/target/h/qPriBMapLib.h" 2
# 1 "d:/Tornado2.2/target/h/qPriNode.h" 1
 

 

 
# 22 "d:/Tornado2.2/target/h/qPriNode.h"















 
			 

typedef DL_LIST Q_PRI_HEAD;

typedef struct		 
    {
    DL_NODE	node;		 
    ULONG	key;		 
    } Q_PRI_NODE;

 

















# 44 "d:/Tornado2.2/target/h/qPriBMapLib.h" 2







 




 

typedef struct		 
    {
    UINT32	metaBMap;		 
    UINT8	bMap [32];		 
    DL_LIST	listArray [256];	 
    } BMAP_LIST;

typedef struct		 
    {
    Q_PRI_NODE	*highNode;		 
    BMAP_LIST	*pBMapList;		 
    UINT 	 nPriority;		 
    } Q_PRI_BMAP_HEAD;

 

 



extern BMAP_LIST *	qPriBMapListCreate (UINT maxPriority);
extern Q_PRI_BMAP_HEAD *qPriBMapCreate (BMAP_LIST *pBMapList, UINT maxPriority);
extern STATUS 		qPriBMapInit (Q_PRI_BMAP_HEAD *pQPriBMapHead,
			 	      BMAP_LIST *pBMapList, UINT maxPriority);
extern STATUS	 	qPriBMapDelete (Q_PRI_BMAP_HEAD *pQPriBMapHead);
extern Q_PRI_NODE *	qPriBMapEach (Q_PRI_BMAP_HEAD *pQHead, FUNCPTR routine,
				      int routineArg);
extern Q_PRI_NODE *	qPriBMapGet (Q_PRI_BMAP_HEAD *pQPriBMapHead);
extern STATUS 		qPriBMapListDelete (BMAP_LIST *pBMapList);
extern ULONG 		qPriBMapKey (Q_PRI_NODE *pQPriNode);
extern int 		qPriBMapInfo (Q_PRI_BMAP_HEAD *pQPriBMapHead,
				      int nodeArray [], int maxNodes);
extern void 		qPriBMapPut (Q_PRI_BMAP_HEAD *pQPriBMapHead,
				     Q_PRI_NODE *pQPriNode, ULONG key);
extern STATUS 		qPriBMapRemove (Q_PRI_BMAP_HEAD *pQPriBMapHead,
					Q_PRI_NODE *pQPriNode);
extern void 		qPriBMapResort (Q_PRI_BMAP_HEAD *pQPriBMapHead,
					Q_PRI_NODE *pQPriNode, ULONG newKey);


# 113 "d:/Tornado2.2/target/h/qPriBMapLib.h"











# 248 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/rebootLib.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/rebootLib.h"








 



extern STATUS 	rebootHookAdd (FUNCPTR rebootHook);
extern void 	reboot (int startType);














# 249 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/remLib.h" 1
 

 

 
# 31 "d:/Tornado2.2/target/h/remLib.h"












 






 

extern int	remLastResvPort;         

 


extern void     remLibInit (long timeout);
extern STATUS 	bindresvport (int sd, struct sockaddr_in *sin);
extern STATUS 	iam (char *newUser, char *newPasswd);
extern STATUS 	remCurIdSet (char *newUser, char *newPasswd);
extern int 	rcmd (char *host, int remotePort, char *localUser,
		      char *remoteUser, char *cmd, int *fd2p);
extern int 	rresvport (int *alport);
extern void 	remCurIdGet (char *user, char *passwd);
extern void 	whoami (void);


# 79 "d:/Tornado2.2/target/h/remLib.h"







# 250 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/rngLib.h" 1
 

 

 
# 29 "d:/Tornado2.2/target/h/rngLib.h"









 

 

typedef struct		 
    {
    int pToBuf;		 
    int pFromBuf;	 
    int bufSize;	 
    char *buf;		 
    } RING;

 

typedef RING *RING_ID;


 








 
# 75 "d:/Tornado2.2/target/h/rngLib.h"


# 88 "d:/Tornado2.2/target/h/rngLib.h"

 
# 100 "d:/Tornado2.2/target/h/rngLib.h"


# 127 "d:/Tornado2.2/target/h/rngLib.h"

 



extern BOOL 	rngIsEmpty (RING_ID ringId);
extern BOOL 	rngIsFull (RING_ID ringId);
extern RING_ID 	rngCreate (int nbytes);
extern int 	rngBufGet (RING_ID rngId, char *buffer, int maxbytes);
extern int 	rngBufPut (RING_ID rngId, char *buffer, int nbytes);
extern int 	rngFreeBytes (RING_ID ringId);
extern int 	rngNBytes (RING_ID ringId);
extern void 	rngDelete (RING_ID ringId);
extern void 	rngFlush (RING_ID ringId);
extern void 	rngMoveAhead (RING_ID ringId, int n);
extern void 	rngPutAhead (RING_ID ringId, char byte, int offset);


# 159 "d:/Tornado2.2/target/h/rngLib.h"







# 251 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/routeLib.h" 1
 

 

 
# 27 "d:/Tornado2.2/target/h/routeLib.h"








# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 36 "d:/Tornado2.2/target/h/routeLib.h" 2


 




 



extern STATUS 	routeAdd (char *destination, char *gateway);
extern STATUS 	routeDelete (char *destination, char *gateway);
extern STATUS 	routeNetAdd (char *destination, char *gateway);
extern STATUS 	routeCmd (int destInetAddr, int gateInetAddr, int ioctlCmd);
extern STATUS   mRouteAdd (char *, char *, long, int, int);
extern STATUS   mRouteEntryAdd (long , long, long, int, int, int);
extern STATUS   mRouteEntryDelete (long , long, long, int, int, int);
extern STATUS   mRouteDelete (char *, long, int, int);


# 68 "d:/Tornado2.2/target/h/routeLib.h"







# 252 "d:/Tornado2.2/target/config/all/bootConfig.c" 2

# 1 "d:/Tornado2.2/target/h/sockLib.h" 1
 

 

 
# 29 "d:/Tornado2.2/target/h/sockLib.h"











 



extern STATUS 	sockLibInit (int fdMax);
extern STATUS 	sockLibAdd (FUNCPTR sockLibInitRtn, int domainMap,
                            int domainReal);
extern STATUS 	bind (int s, struct sockaddr *name, int namelen);
extern STATUS 	connect (int s, struct sockaddr *name, int namelen);
extern STATUS 	connectWithTimeout (int sock, struct sockaddr *adrs,
				    int adrsLen, struct timeval *timeVal);
extern STATUS 	getpeername (int s, struct sockaddr *name, int *namelen);
extern STATUS 	getsockname (int s, struct sockaddr *name, int *namelen);
extern STATUS 	getsockopt (int s, int level, int optname, char *optval,
			    int *optlen);
extern STATUS 	listen (int s, int backlog);
extern STATUS 	setsockopt (int s, int level, int optname, char *optval,
			    int optlen);
extern STATUS 	shutdown (int s, int how);
extern int 	accept (int s, struct sockaddr *addr, int *addrlen);
extern int 	recv (int s, char *buf, int bufLen, int flags);
extern int 	recvfrom (int s, char *buf, int bufLen, int flags,
			  struct sockaddr *from, int *pFromLen);
extern int 	recvmsg (int sd, struct msghdr *mp, int flags);
extern int 	send (int s, const char *buf, int bufLen, int flags);
extern int 	sendmsg (int sd, struct msghdr *mp, int flags);
extern int 	sendto (int s, caddr_t buf, int bufLen, int flags,
			struct sockaddr *to, int tolen);
extern int 	socket (int domain, int type, int protocol);


# 93 "d:/Tornado2.2/target/h/sockLib.h"







# 254 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/stdio.h" 1
 

 
 

 
# 49 "d:/Tornado2.2/target/h/stdio.h"









# 1 "d:/Tornado2.2/target/h/classLib.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/classLib.h"


# 70 "d:/Tornado2.2/target/h/classLib.h"

# 59 "d:/Tornado2.2/target/h/stdio.h" 2
# 1 "d:/Tornado2.2/target/h/errno.h" 1
 

 

 







 
# 36 "d:/Tornado2.2/target/h/errno.h"


# 189 "d:/Tornado2.2/target/h/errno.h"

# 60 "d:/Tornado2.2/target/h/stdio.h" 2
# 1 "d:/Tornado2.2/target/h/private/objLibP.h" 1
 

 

 









# 80 "d:/Tornado2.2/target/h/private/objLibP.h"

# 61 "d:/Tornado2.2/target/h/stdio.h" 2







# 78 "d:/Tornado2.2/target/h/stdio.h"

 

struct __sbuf 			 
    {
    uchar_t * _base;		 
    int	      _size;		 
    };

typedef	struct __sFILE
    {
    OBJ_CORE		objCore;	 
    uchar_t *		_p;		 
    int			_r;		 
    int			_w;		 
    short		_flags;		 
    short		_file;		 
    struct __sbuf	_bf;		 
    int			_lbfsize;	 
    struct __sbuf	_ub;		 
    uchar_t *		_up;		 
    int			_ur;		 
    uchar_t		_ubuf[3];	 
    uchar_t		_nbuf[1];	 
    struct __sbuf	_lb;		 
    int			_blksize;	 
    int			_offset;	 
    int			taskId;		 
    } FILE;

 

extern CLASS_ID fpClassId;		 

 

























































extern void	clearerr (FILE *);
extern int	fclose (FILE *);
extern int	feof (FILE *);
extern int	ferror (FILE *);
extern int	fflush (FILE *);
extern int	fgetc (FILE *);
extern int	fgetpos (FILE *, fpos_t *);
extern char *	fgets (char *, size_t, FILE *);
extern FILE *	fopen (const char *, const char *);
extern int	fprintf (FILE *, const char *, ...);
extern int	fputc (int, FILE *);
extern int	fputs (const char *, FILE *);
extern int	fread (void *, size_t, size_t, FILE *);
extern FILE *	freopen (const char *, const char *, FILE *);
extern int	fscanf (FILE *, const char *, ...);
extern int	fseek (FILE *, long, int);
extern int	fsetpos (FILE *, const fpos_t *);
extern long	ftell (FILE *);
extern int	fwrite (const void *, size_t, size_t, FILE *);
extern int	getc (FILE *);
extern int	getchar (void);
extern char *	gets (char *);
extern void	perror (const char *);
extern int	printf (const char *, ...);
extern int	putc (int, FILE *);
extern int	putchar (int);
extern int	puts (const char *);
extern int	remove (const char *);
extern int	rename  (const char *, const char *);
extern void	rewind (FILE *);
extern int	scanf (const char *, ...);
extern void	setbuf (FILE *, char *);
extern int	setvbuf (FILE *, char *, int, size_t);
extern int	sprintf (char *, const char *, ...);
extern int	sscanf (const char *, const char *, ...);
extern FILE *	tmpfile (void);
extern char *	tmpnam (char *);
extern int	ungetc (int, FILE *);
extern int	vfprintf (FILE *, const char *, va_list);
extern int	vprintf (const char *, va_list);
extern int	vsprintf (char *, const char *, va_list);
extern int	__srget (FILE *);		 
extern int	__swbuf (int, FILE *);		 

 

extern FILE *	fdopen (int, const char *);
extern int	fileno (FILE *);

 

 



extern int	fdprintf (int fd, const char *fmt, ...);
extern int	vfdprintf (int fd, const char *fmt, va_list ap);
extern int	printErr (const char *fmt, ...);
extern int	getw (FILE *);
extern int	putw (int, FILE *);
extern void	setbuffer (FILE *, char *, int);
extern int	setlinebuf (FILE *);
extern FILE *   stdioFp (int std);
extern STATUS   stdioShow (FILE * fp, int level);
extern STATUS   stdioShowInit (void);
extern STATUS   stdioInit (void);




# 311 "d:/Tornado2.2/target/h/stdio.h"


 


extern FILE **	__stdin(void);		 
extern FILE **	__stdout(void);		 
extern FILE **	__stderr(void);		 











 











































# 255 "d:/Tornado2.2/target/config/all/bootConfig.c" 2

# 1 "d:/Tornado2.2/target/h/sysLib.h" 1
 

 

 
# 69 "d:/Tornado2.2/target/h/sysLib.h"










# 1 "d:/Tornado2.2/target/h/ttyLib.h" 1
 

 

 










# 1 "d:/Tornado2.2/target/h/types/vxTypes.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/types/vxTypes.h"

 
# 56 "d:/Tornado2.2/target/h/types/vxTypes.h"


# 150 "d:/Tornado2.2/target/h/types/vxTypes.h"

# 17 "d:/Tornado2.2/target/h/ttyLib.h" 2
# 1 "d:/Tornado2.2/target/h/sioLib.h" 1
 

 

 
# 22 "d:/Tornado2.2/target/h/sioLib.h"




# 1 "d:/Tornado2.2/target/h/types/vxTypes.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/types/vxTypes.h"

 
# 56 "d:/Tornado2.2/target/h/types/vxTypes.h"


# 150 "d:/Tornado2.2/target/h/types/vxTypes.h"

# 27 "d:/Tornado2.2/target/h/sioLib.h" 2






 











 




 
# 60 "d:/Tornado2.2/target/h/sioLib.h"







 





 




 





 

 

 











 




 
 

 















 
# 133 "d:/Tornado2.2/target/h/sioLib.h"








 
# 159 "d:/Tornado2.2/target/h/sioLib.h"





 
# 179 "d:/Tornado2.2/target/h/sioLib.h"





 

typedef struct sio_drv_funcs SIO_DRV_FUNCS;

typedef struct sio_chan				 
    {
    SIO_DRV_FUNCS * pDrvFuncs;
     
    } SIO_CHAN;

struct sio_drv_funcs				 
    {
    int		(*ioctl)
			(
			SIO_CHAN *	pSioChan,
			int		cmd,
			void *		arg
			);

    int		(*txStartup)
			(
			SIO_CHAN *	pSioChan
			);

    int		(*callbackInstall)
			(
			SIO_CHAN *	pSioChan,
			int		callbackType,
			STATUS		(*callback)(void *, ...),
			void *		callbackArg
			);

    int		(*pollInput)
			(
			SIO_CHAN *	pSioChan,
			char *		inChar
			);

    int		(*pollOutput)
			(
			SIO_CHAN *	pSioChan,
			char 		outChar
			);
    };


 



















# 18 "d:/Tornado2.2/target/h/ttyLib.h" 2







extern STATUS ttyDrv	   ();
extern STATUS ttyDevCreate (char *name, SIO_CHAN *pChan, int rdBufSize,
			    int wrtBufSize);














# 80 "d:/Tornado2.2/target/h/sysLib.h" 2

# 1 "d:/Tornado2.2/target/h/drv/timer/timerDev.h" 1
 

 

 








 











 




extern	STATUS	sysClkConnect (FUNCPTR routine, int arg);
extern	void	sysClkDisable (void);
extern	void	sysClkEnable (void);
extern	int	sysClkRateGet (void);
extern	STATUS	sysClkRateSet (int ticksPerSecond);
extern	STATUS	sysAuxClkConnect (FUNCPTR routine, int arg);
extern	void	sysAuxClkDisable (void);
extern	void	sysAuxClkEnable (void);
extern	int	sysAuxClkRateGet (void);
extern	STATUS	sysAuxClkRateSet (int ticksPerSecond);
extern	STATUS	sysTimestampConnect (FUNCPTR routine, int arg);
extern	STATUS	sysTimestampEnable (void);
extern	STATUS	sysTimestampDisable (void);
extern	UINT32	sysTimestampFreq (void);
extern	UINT32	sysTimestampPeriod (void);
extern	UINT32	sysTimestamp (void);
extern	UINT32	sysTimestampLock (void);



# 72 "d:/Tornado2.2/target/h/drv/timer/timerDev.h"









# 82 "d:/Tornado2.2/target/h/sysLib.h" 2

typedef struct   
    {
    char *ifName;  		     	 
    FUNCPTR attachRtn;  		 
    char *arg1;				 
    int arg2;				 
    int arg3;				 
    int arg4;
    int arg5;
    int arg6;
    int arg7;
    int arg8;
    } NETIF;



 






 







 

 







 










                                         










 



extern int 	sysBus;		 
extern int 	sysCpu;		 
extern int 	sysProcNum;	 
extern char *	sysBootLine;	 
extern char *	sysExcMsg;	 
extern int	sysFlags;	 
extern BOOT_PARAMS sysBootParams;  

 

extern char	sysBootHost[];	 
extern char	sysBootFile[];	 

 



extern char *	sysModel (void);
extern char *	sysBspRev (void);
extern void 	sysHwInit (void);
extern void 	sysHwInit2 (void);
extern char *	sysMemTop (void);
extern char *	sysPhysMemTop (void);
extern STATUS 	sysToMonitor (int startType);
extern int 	sysProcNumGet (void);
extern void 	sysProcNumSet (int procNum);
extern BOOL 	sysBusTas (char *adrs);
extern STATUS 	sysNvRamGet (char *string, int strLen, int offset);
extern STATUS 	sysNvRamSet (char *string, int strLen, int offset);
extern STATUS 	sysScsiInit (void);
extern STATUS 	sysScsiConfig (void);
extern void	sysSerialHwInit (void);
extern void	sysSerialHwInit2 (void);
extern SIO_CHAN * sysSerialChanGet (int channel);
extern void	sysSerialReset (void);
extern STATUS	sysLocalToBusAdrs (int adrsSpace, char *localAdrs,
				   char **pBusAdrs);
extern STATUS	sysBusToLocalAdrs (int adrsSpace, char *busAdrs,
				   char **pLocalAdrs);
extern STATUS	sysIntDisable (int intLevel);
extern STATUS	sysIntEnable (int intLevel);
extern int	sysBusIntAck (int intLevel);
extern STATUS	sysBusIntGen (int level, int vector);
extern STATUS	sysMailboxConnect (FUNCPTR routine, int arg);
extern STATUS	sysMailboxEnable (char *mailboxAdrs);
extern int	tyCoDrv (void);
extern int	tyCoDevCreate (char *name, int channel, int rdBufSize,
			       int wrtBufSize);



 





extern UCHAR	sysInByte		(int port);
extern USHORT	sysInWord		(int port);
extern ULONG	sysInLong		(int port);
extern void	sysInWordString		(int port, short *pData, int count);
extern void	sysInLongString		(int port, long *pData, int count);
extern void	sysOutByte		(int port, char data);
extern void	sysOutWord		(int port, short data);
extern void	sysOutLong		(int port, long data);
extern void	sysOutWordString	(int port, short *pData, int count);
extern void	sysOutLongString	(int port, long *pData, int count);


# 234 "d:/Tornado2.2/target/h/sysLib.h"

 

extern void	sysNanoDelay		(UINT32 nanoseconds);
extern void	sysReboot		(void);
extern void	sysDelay		(void);
extern void	sysWait			(void);
extern STATUS	sysIntDisablePIC	(int intLevel);
extern STATUS	sysIntEnablePIC		(int intLevel);

 

extern void 	sysFaultTableInit	(void (*func)());
extern UINT32 	sysFaultVecSet		(INSTR *vector, UINT32 faultNo, 
					 UINT32 type);
extern void 	sysExcInfoPrint		(UINT32 type);

 

extern void	sysLoadGdt		(char *sysGdtr);



# 307 "d:/Tornado2.2/target/h/sysLib.h"









# 257 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/sysSymTbl.h" 1
 

 

 
# 24 "d:/Tornado2.2/target/h/sysSymTbl.h"













extern SYMTAB_ID 	sysSymTbl;	 
extern SYMBOL		standTbl[];	 
extern ULONG		standTblSize;	 
extern SYMTAB_ID	statSymTbl;	 
extern SYMBOL		statTbl[];	 
extern ULONG		statTblSize;	 







# 258 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/taskHookLib.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/taskHookLib.h"








 



extern void	taskHookInit (void);
extern STATUS 	taskCreateHookAdd (FUNCPTR createHook);
extern STATUS 	taskCreateHookDelete (FUNCPTR createHook);
extern STATUS 	taskDeleteHookAdd (FUNCPTR deleteHook);
extern STATUS 	taskDeleteHookDelete (FUNCPTR deleteHook);
extern STATUS 	taskSwapHookAdd (FUNCPTR swapHook);
extern STATUS 	taskSwapHookAttach (FUNCPTR swapHook,int tid,BOOL in,BOOL out);
extern STATUS 	taskSwapHookDelete (FUNCPTR swapHook);
extern STATUS 	taskSwapHookDetach (FUNCPTR swapHook,int tid,BOOL in,BOOL out);
extern STATUS 	taskSwitchHookAdd (FUNCPTR switchHook);
extern STATUS 	taskSwitchHookDelete (FUNCPTR switchHook);
extern void	taskHookShowInit (void);
extern void 	taskCreateHookShow (void);
extern void 	taskDeleteHookShow (void);
extern void 	taskSwapHookShow (void);
extern void 	taskSwitchHookShow (void);


# 66 "d:/Tornado2.2/target/h/taskHookLib.h"







# 259 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/taskLib.h" 1
 

 

 
# 126 "d:/Tornado2.2/target/h/taskLib.h"









# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 136 "d:/Tornado2.2/target/h/taskLib.h" 2
# 1 "d:/Tornado2.2/target/h/classLib.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/classLib.h"


# 70 "d:/Tornado2.2/target/h/classLib.h"

# 137 "d:/Tornado2.2/target/h/taskLib.h" 2


# 1 "d:/Tornado2.2/target/h/excLib.h" 1
 

 

 
# 51 "d:/Tornado2.2/target/h/excLib.h"

















































# 1 "d:/Tornado2.2/target/h/arch/i86/excI86Lib.h" 1
 

 

 
# 14 "d:/Tornado2.2/target/h/arch/i86/excI86Lib.h"








 







typedef struct
    {
    UINT16 valid;	 
    UINT16 vecNum;	 
    ULONG errCode;	 
    INSTR * pc;		 
    ULONG eflags;	 
    UINT16 cs;		 
    UINT16 pad;		 
    ULONG esp;		 
    ULONG ss;		 
    ULONG esp0;		 
    ULONG cr2;		 
    ULONG cr3;		 
    ULONG esp00;	 
    ULONG esp01;	 
    ULONG esp02;	 
    ULONG esp03;	 
    ULONG esp04;	 
    ULONG esp05;	 
    ULONG esp06;	 
    ULONG esp07;	 
    ULONG reserved0;	 
    ULONG reserved1;	 
    ULONG reserved2;	 
    ULONG reserved3;	 
    } EXC_INFO;

 








 

extern FUNCPTR  excExcepHook;    

 



extern void	excStub (void);
extern void	excIntStub (void);
















# 101 "d:/Tornado2.2/target/h/excLib.h" 2

















typedef struct  excfaultTab
    {
    int faultType;		 
    int subtype;		 
    int signal;			 
    int code;			 
    } EXC_FAULT_TAB;

 


extern STATUS 	excShowInit (void);
extern void 	excHookAdd (FUNCPTR excepHook);
extern STATUS 	excJobAdd (VOIDFUNCPTR func, int arg1, int arg2, int arg3,
			   int arg4, int arg5, int arg6);















# 140 "d:/Tornado2.2/target/h/taskLib.h" 2
# 1 "d:/Tornado2.2/target/h/private/eventP.h" 1
 

 

 
# 80 "d:/Tornado2.2/target/h/private/eventP.h"








 

 







 





































 



typedef unsigned short event_t;



# 1 "d:/Tornado2.2/target/h/private/funcBindP.h" 1
 

 

 
# 47 "d:/Tornado2.2/target/h/private/funcBindP.h"











 

extern FUNCPTR     _func_ioTaskStdSet;
extern FUNCPTR     _func_bdall;
extern FUNCPTR     _func_dspTaskRegsShow;
extern VOIDFUNCPTR _func_dspRegsListHook;	 
extern FUNCPTR	   _func_dspMregsHook;		 
extern FUNCPTR     _func_excBaseHook;
extern FUNCPTR     _func_excInfoShow;
extern FUNCPTR     _func_excIntHook;
extern FUNCPTR     _func_excJobAdd;
extern FUNCPTR     _func_excPanicHook;
extern FUNCPTR     _func_fclose;
extern FUNCPTR     _func_fppTaskRegsShow;
extern FUNCPTR     _func_altivecTaskRegsShow;
extern FUNCPTR     _func_ftpLs;
extern FUNCPTR     _func_netLsByName;
extern FUNCPTR     _func_printErr;
extern FUNCPTR     _func_logMsg;
extern FUNCPTR     _func_memalign;
extern FUNCPTR     _func_pthread_setcanceltype;
extern FUNCPTR     _func_selPtyAdd;
extern FUNCPTR     _func_selPtyDelete;
extern FUNCPTR     _func_selTyAdd;
extern FUNCPTR     _func_selTyDelete;
extern FUNCPTR     _func_selWakeupAll;
extern FUNCPTR     _func_selWakeupListInit;
extern FUNCPTR     _func_selWakeupListTerm;
extern VOIDFUNCPTR _func_sigExcKill;
extern FUNCPTR     _func_sigprocmask;
extern FUNCPTR     _func_sigTimeoutRecalc;
extern FUNCPTR     _func_smObjObjShow;
extern FUNCPTR     _func_spy;
extern FUNCPTR     _func_spyStop;
extern FUNCPTR     _func_spyClkStart;
extern FUNCPTR     _func_spyClkStop;
extern FUNCPTR     _func_spyReport;
extern FUNCPTR     _func_spyTask;
extern FUNCPTR     _func_sseTaskRegsShow;
extern FUNCPTR     _func_symFindByValueAndType;    
extern FUNCPTR     _func_symFindByValue;           
extern FUNCPTR     _func_symFindSymbol;
extern FUNCPTR     _func_symNameGet;
extern FUNCPTR     _func_symValueGet;
extern FUNCPTR     _func_symTypeGet;
extern FUNCPTR     _func_taskCreateHookAdd;
extern FUNCPTR     _func_taskDeleteHookAdd;
extern FUNCPTR     _func_valloc;
extern FUNCPTR     _func_remCurIdGet;
extern FUNCPTR     _func_remCurIdSet;

extern FUNCPTR	   _dbgDsmInstRtn;

extern BOOL	   ftpErrorSuppress;
extern BOOL	   _procNumWasSet;

extern VOIDFUNCPTR _func_evtLogO;
extern VOIDFUNCPTR _func_evtLogOIntLock;

extern VOIDFUNCPTR _func_evtLogM0;
extern VOIDFUNCPTR _func_evtLogM1;
extern VOIDFUNCPTR _func_evtLogM2;
extern VOIDFUNCPTR _func_evtLogM3;

extern VOIDFUNCPTR _func_evtLogT0;
extern VOIDFUNCPTR _func_evtLogT0_noInt;
extern VOIDFUNCPTR _func_evtLogT1;
extern VOIDFUNCPTR _func_evtLogT1_noTS;
extern VOIDFUNCPTR _func_evtLogTSched;

extern VOIDFUNCPTR _func_evtLogString;
extern FUNCPTR     _func_evtLogPoint;
extern FUNCPTR	   _func_evtLogReserveTaskName;


# 141 "d:/Tornado2.2/target/h/private/funcBindP.h"

extern FUNCPTR     _func_tmrStamp;
extern FUNCPTR     _func_tmrStampLock;
extern FUNCPTR     _func_tmrFreq;
extern FUNCPTR     _func_tmrPeriod;
extern FUNCPTR     _func_tmrConnect;
extern FUNCPTR     _func_tmrEnable;
extern FUNCPTR     _func_tmrDisable;

extern VOIDFUNCPTR _func_trgCheck;
extern UINT32 evtAction;
extern UINT32 wvEvtClass;
extern UINT32 trgEvtClass;

extern BOOL   wvInstIsOn;              
extern BOOL   wvObjIsEnabled;          







# 145 "d:/Tornado2.2/target/h/private/eventP.h" 2

# 1 "d:/Tornado2.2/target/h/private/objLibP.h" 1
 

 

 









# 80 "d:/Tornado2.2/target/h/private/objLibP.h"

# 147 "d:/Tornado2.2/target/h/private/eventP.h" 2















































 












# 215 "d:/Tornado2.2/target/h/private/eventP.h"

 

 










 












 
















 

















 


















 
# 307 "d:/Tornado2.2/target/h/private/eventP.h"


# 326 "d:/Tornado2.2/target/h/private/eventP.h"

 
# 338 "d:/Tornado2.2/target/h/private/eventP.h"


# 357 "d:/Tornado2.2/target/h/private/eventP.h"

 
# 367 "d:/Tornado2.2/target/h/private/eventP.h"


# 381 "d:/Tornado2.2/target/h/private/eventP.h"

 

















 
















 








# 436 "d:/Tornado2.2/target/h/private/eventP.h"


 
















 
















 








# 493 "d:/Tornado2.2/target/h/private/eventP.h"

 








# 515 "d:/Tornado2.2/target/h/private/eventP.h"

 








# 536 "d:/Tornado2.2/target/h/private/eventP.h"

 








# 559 "d:/Tornado2.2/target/h/private/eventP.h"

 








# 580 "d:/Tornado2.2/target/h/private/eventP.h"

 








# 601 "d:/Tornado2.2/target/h/private/eventP.h"

 
















 








# 636 "d:/Tornado2.2/target/h/private/eventP.h"

 








# 655 "d:/Tornado2.2/target/h/private/eventP.h"

 








# 675 "d:/Tornado2.2/target/h/private/eventP.h"

 








# 693 "d:/Tornado2.2/target/h/private/eventP.h"


















 














































 

 


     





     





     




 


     
# 792 "d:/Tornado2.2/target/h/private/eventP.h"



     





     





     
# 816 "d:/Tornado2.2/target/h/private/eventP.h"


     
# 827 "d:/Tornado2.2/target/h/private/eventP.h"



     






     





      





     

 


     
# 863 "d:/Tornado2.2/target/h/private/eventP.h"


     







     






     








     






     







     







     







     








     








     









     









     








     








     








     








     






     






     







     






     









     






     









     
# 1059 "d:/Tornado2.2/target/h/private/eventP.h"


     







     






     






     







     





     







     








     







     






     








     






     





     





 


     






     





     





     





     








     







     





     




     





     





     





     





     





     





     





     




     





     





     





     





     





     





     





     





     





     





     





     





     





     





     




     




 


     







     






     







     







     




     





     





     





     





     






     






 




     





     




     























 








# 1494 "d:/Tornado2.2/target/h/private/eventP.h"











 
# 1522 "d:/Tornado2.2/target/h/private/eventP.h"














# 141 "d:/Tornado2.2/target/h/taskLib.h" 2
# 1 "d:/Tornado2.2/target/h/private/semLibP.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/private/semLibP.h"


# 212 "d:/Tornado2.2/target/h/private/semLibP.h"

# 142 "d:/Tornado2.2/target/h/taskLib.h" 2
# 1 "d:/Tornado2.2/target/h/private/objLibP.h" 1
 

 

 









# 80 "d:/Tornado2.2/target/h/private/objLibP.h"

# 143 "d:/Tornado2.2/target/h/taskLib.h" 2

# 1 "d:/Tornado2.2/target/h/stdlib.h" 1
 

 

 
# 37 "d:/Tornado2.2/target/h/stdlib.h"


















# 65 "d:/Tornado2.2/target/h/stdlib.h"

 















typedef struct { int quot; int rem; } div_t;




typedef struct { long quot; long rem; } ldiv_t;



typedef struct {		 
	unsigned char __state;
	unsigned short __wchar;
	} _Mbsave;



extern void	abort (void);
extern int	abs (int __i);
extern int	atexit (void (*__func)(void));
extern double	atof (const char *__s);
extern int	atoi (const char *__s);
extern long	atol (const char *__s);
extern void *	bsearch (const void *__key, const void *__base,
		         size_t __nelem, size_t __size,
		         int  (*__cmp)(const void *__ck, const void *__ce));
extern div_t	div (int __numer, int __denom);
extern long	labs (long __i);
extern ldiv_t	ldiv (long __numer, long __denom);
extern int	mblen (const char *__s, size_t __n);
extern size_t	mbstowcs (wchar_t *__wcs, const char *__s, size_t __n);
extern int	mbtowc (wchar_t *__pwc, const char *__s, size_t __n);
extern void	qsort (void *__base, size_t __nelem, size_t __size,
		       int  (*__cmp)(const void *__e1, const void *__e2));
extern int	rand (void);
extern void *	srand (unsigned int __seed);
extern double	strtod (const char *__s, char **__endptr);
extern long	strtol (const char *__s, char **__endptr, int __base);
extern unsigned long strtoul (const char *__s, char **__endptr, int __base);
extern int	system (const char *__s);
extern size_t	wcstombs (char *__s, const wchar_t *__wcs, size_t __n);
extern int	wctomb (char *__s, wchar_t __wchar);

extern void *	calloc (size_t __nelem, size_t __size);
extern void	exit (int __status);
extern void	free (void *__ptr);
extern char *	getenv (const char *__name);
extern void *	malloc (size_t __size);
extern void *	realloc (void *__ptr, size_t __size);



extern void     div_r (int numer, int denom, div_t * divStructPtr);
extern void     ldiv_r (long numer, long denom, ldiv_t * divStructPtr);




# 178 "d:/Tornado2.2/target/h/stdlib.h"









# 145 "d:/Tornado2.2/target/h/taskLib.h" 2


 












 







 













 







typedef struct wdb_info		 
    {
    int			wdbState;	 
    REG_SET *		wdbRegisters;	 
    struct
        {
	void *	wdb1;
	void *	wdb2;
	} wdbEvtList;			 
    int			bpAddr;		 
					 
    int			taskBpAddr;	 
    int			taskPc;		 
    int			taskFp;		 
    int			taskSp;		 
    VOIDFUNCPTR		wdbExitHook;	 
  } WDB_INFO;

typedef struct windTcb		 
    {
    Q_NODE		qNode;		 
    Q_NODE		tickNode;	 
    Q_NODE		activeNode;	 

    OBJ_CORE		objCore;	 
    char *		name;		 
    int			options;	 
    UINT		status;		 
    UINT		priority;	 
    UINT		priNormal;	 
    UINT		priMutexCnt;	 
    struct semaphore *	pPriMutex;	 

    UINT		lockCnt;	 
    UINT		tslice;		 

    UINT16		swapInMask;	 
    UINT16		swapOutMask;	 

    Q_HEAD *		pPendQ;		 

    UINT		safeCnt;	 
    Q_HEAD		safetyQHead;	 

    FUNCPTR		entry;		 

    char *		pStackBase;	 
    char *		pStackLimit;	 
    char *		pStackEnd;	 

    int			errorStatus;	 
    int			exitCode;	 

    struct sigtcb *	pSignalInfo;	 
    struct selContext *	pSelectContext;	 

    UINT		taskTicks;	 
    UINT		taskIncTicks;	 

    struct taskVar *	pTaskVar;	 
    struct rpcModList *	pRPCModList;	 
    struct fpContext *	pFpContext;	 

    struct __sFILE *	taskStdFp[3];	 
    int			taskStd[3];	 

    char **		ppEnviron;	 
    int                 envTblSize;      
    int                 nEnvVarEntries;  
    struct sm_obj_tcb *	pSmObjTcb;	 
    int			windxLock;	 
    void *		pComLocal;	 
    REG_SET *		pExcRegSet;	 
    EVENTS		events;		 
    WDB_INFO *		pWdbInfo;	 
    void *		pPthread;	 
    int			reserved1;	 
    int			reserved2;	 
    int			spare1;		 
    int			spare2;		 
    int			spare3;		 
    int			spare4;		 

     


# 284 "d:/Tornado2.2/target/h/taskLib.h"









































# 336 "d:/Tornado2.2/target/h/taskLib.h"










# 357 "d:/Tornado2.2/target/h/taskLib.h"


    EXC_INFO            excInfo;         

     

    REG_SET             regs;            











# 384 "d:/Tornado2.2/target/h/taskLib.h"

    struct dspContext *	pDspContext;	 
    WDB_INFO		wdbInfo;	 
    } WIND_TCB;

typedef struct 			 
    {
    int			td_id;		 
    char *		td_name;	 
    int			td_priority;	 
    int			td_status;	 
    int			td_options;	 
    FUNCPTR		td_entry;	 
    char *		td_sp;		 
    char *		td_pStackBase;	 
    char *		td_pStackLimit;	 
    char *		td_pStackEnd;	 
    int			td_stackSize;	 
    int			td_stackCurrent; 
    int			td_stackHigh;	 
    int			td_stackMargin;	 
    int			td_errorStatus;	 
    int			td_delay;	 
    EVENTS		td_events;	 
    } TASK_DESC;





 
# 426 "d:/Tornado2.2/target/h/taskLib.h"







 
# 442 "d:/Tornado2.2/target/h/taskLib.h"










 













 
# 475 "d:/Tornado2.2/target/h/taskLib.h"


# 486 "d:/Tornado2.2/target/h/taskLib.h"

 














 

extern CLASS_ID	taskClassId;		 
extern CLASS_ID taskInstClassId;  	 
extern WIND_TCB *taskIdCurrent;		 
extern BOOL     taskPriRangeCheck;       

 



extern STATUS 	taskLibInit (void);





extern int 	taskSpawn (char *name, int priority, int options, int stackSize,
		      	   FUNCPTR entryPt, int arg1, int arg2, int arg3,
		      	   int arg4, int arg5, int arg6, int arg7,
		      	   int arg8, int arg9, int arg10);


extern STATUS 	taskInit (WIND_TCB *pTcb, char *name, int priority, int options,
			  char *pStackBase, int stackSize, FUNCPTR entryPt,
			  int arg1, int arg2, int arg3, int arg4, int arg5,
			  int arg6, int arg7, int arg8, int arg9, int arg10);
extern STATUS 	taskActivate (int tid);
extern STATUS 	taskDelete (int tid);
extern STATUS 	taskDeleteForce (int tid);
extern STATUS 	taskSuspend (int tid);
extern STATUS 	taskResume (int tid);
extern STATUS 	taskRestart (int tid);
extern STATUS 	taskPrioritySet (int tid, int newPriority);
extern STATUS 	taskPriorityGet (int tid, int *pPriority);
extern STATUS 	taskLock (void);
extern STATUS 	taskUnlock (void);
extern STATUS 	taskSafe (void);
extern STATUS 	taskUnsafe (void);
extern STATUS 	taskDelay (int ticks);
extern STATUS 	taskOptionsSet (int tid, int mask, int newOptions);
extern STATUS 	taskOptionsGet (int tid, int *pOptions);
extern char *	taskName (int tid);
extern int 	taskNameToId (char *name);
extern STATUS 	taskIdVerify (int tid);
extern int 	taskIdSelf (void);
extern int 	taskIdDefault (int tid);
extern BOOL 	taskIsReady (int tid);
extern BOOL 	taskIsSuspended (int tid);
extern WIND_TCB *taskTcb (int tid);
extern int 	taskIdListGet (int idList [ ], int maxTasks);
extern STATUS 	taskInfoGet (int tid, TASK_DESC *pTaskDesc);
extern STATUS 	taskStatusString (int tid, char *pString);
extern STATUS 	taskOptionsString (int tid, char *pString);
extern STATUS 	taskRegsGet (int tid, REG_SET *pRegs);
extern STATUS 	taskRegsSet (int tid, REG_SET *pRegs);
extern void 	taskRegsShow (int tid);
extern void *	taskStackAllot (int tid, unsigned nBytes);
extern void 	taskShowInit (void);
extern STATUS 	taskShow (int tid, int level);


# 602 "d:/Tornado2.2/target/h/taskLib.h"









# 260 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/tftpLib.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/tftpLib.h"








# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 30 "d:/Tornado2.2/target/h/tftpLib.h" 2


 

 



						 








 







 
# 81 "d:/Tornado2.2/target/h/tftpLib.h"











 

struct	tftpFormat
    {
    u_short blockOrError;
    char data [512];
    }  ;

typedef struct tftp_msg
    {
    u_short	th_opcode;			 
    union
	{
        char	 request [512 + 2];	 
	struct   tftpFormat  misc;
     	}   th;
    } TFTP_MSG;






 








 










 

typedef struct tftp_mode
    {
    char *m_name;				 
    char *m_mode;				 
    } TFTP_MODE;

 

typedef struct tftp_errmsg
    {
    int   e_code;				 
    char  *e_msg;				 
    } TFTP_ERRMSG;

 

typedef struct tftp_desc
    {
    char 	mode [32];			 
    BOOL	connected;			 
    char    	serverName [128];		 
    struct sockaddr_in serverAddr;		 
    int 	sock;				 
    u_short	serverPort;			 
    char	fileName [128];	 
    } TFTP_DESC;

 





 












extern STATUS 	tftpXfer (char * pHost, int port, char * pFilename,
			  char * pCommand, char * pMode, int * pDataDesc,
    			  int * pErrorDesc);
extern STATUS 	tftpCopy (char * pHost,	int port, char * pFilename,
			  char * pCommand, char * pMode, int fd);
extern TFTP_DESC *tftpInit (void);
extern STATUS 	tftpModeSet (TFTP_DESC * pTftpDesc, char * pMode);
extern STATUS 	tftpPeerSet (TFTP_DESC * pTftpDesc, char * pHostname,
			     int port);
extern STATUS 	tftpPut (TFTP_DESC *pTftpDesc, char *pFilename, int fd,
		         int clientOrServer);
extern STATUS 	tftpGet (TFTP_DESC *pTftpDesc, char *pFilename, int fd,
		         int clientOrServer);
extern STATUS 	tftpInfoShow (TFTP_DESC * pTftpDesc);
extern STATUS 	tftpQuit (TFTP_DESC * pTftpDesc);
extern int 	tftpSend (TFTP_DESC *pTftpDesc, TFTP_MSG *pTftpMsg, int sizeMsg,
		          TFTP_MSG *pTftpReply, int opReply, int blockReply,
		          int *pPort);
extern int 	tftpErrorCreate (TFTP_MSG * pTftpMsg, int errorNum);


# 218 "d:/Tornado2.2/target/h/tftpLib.h"








# 261 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/tickLib.h" 1
 

 

 
# 18 "d:/Tornado2.2/target/h/tickLib.h"








 



extern void 	tickAnnounce (void);
extern void 	tickSet (ULONG ticks);
extern ULONG 	tickGet (void);















# 262 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/trcLib.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/trcLib.h"










 



extern void 	trcStack (REG_SET *pRegs, FUNCPTR printRtn, int tid);













# 263 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/unistd.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/unistd.h"


# 85 "d:/Tornado2.2/target/h/unistd.h"

# 264 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/usrFdiskPartLib.h" 1
 

 

 















 



extern STATUS usrFdiskPartRead
    (
    CBIO_DEV_ID cDev,             
    PART_TABLE_ENTRY *pPartTab,   
    int nPart                     
    );

extern STATUS usrFdiskPartCreate
    (
    CBIO_DEV_ID cDev, 	 
    int		nPart,	 
    int		size1,	 
    int		size2,	 
    int		size3	 
    );








 

 
































# 265 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/version.h" 1
 

 

 
# 23 "d:/Tornado2.2/target/h/version.h"












extern char * creationDate;
extern char * runtimeVersion;
extern char * runtimeName;
extern char * vxWorksVersion;







# 266 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/wdLib.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/wdLib.h"









# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 31 "d:/Tornado2.2/target/h/wdLib.h" 2

 

typedef struct wdog *WDOG_ID;		 

 



extern STATUS 	wdLibInit (void);
extern WDOG_ID 	wdCreate (void);
extern STATUS 	wdDelete (WDOG_ID wdId);
extern STATUS 	wdStart (WDOG_ID wdId, int delay, FUNCPTR pRoutine,
			 int parameter);
extern STATUS 	wdCancel (WDOG_ID wdId);
extern void 	wdShowInit (void);
extern STATUS 	wdShow (WDOG_ID wdId);


# 60 "d:/Tornado2.2/target/h/wdLib.h"







# 267 "d:/Tornado2.2/target/config/all/bootConfig.c" 2


# 1 "d:/Tornado2.2/target/h/netinet/if_ether.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/netinet/if_ether.h"

 
# 53 "d:/Tornado2.2/target/h/netinet/if_ether.h"








# 1 "d:/Tornado2.2/target/h/netinet/in.h" 1
 

 
# 37 "d:/Tornado2.2/target/h/netinet/in.h"

 
# 49 "d:/Tornado2.2/target/h/netinet/in.h"


# 358 "d:/Tornado2.2/target/h/netinet/in.h"

# 62 "d:/Tornado2.2/target/h/netinet/if_ether.h" 2











 



struct ether_addr {
	u_char ether_addr_octet[6];
}  ;

 


struct	ether_header {
	u_char	ether_dhost[6];
	u_char	ether_shost[6];
	u_short	ether_type;
}  ;

 
struct  ether_tag_header {
        u_char  ether_dhost[6];
        u_char  ether_shost[6];
        u_char  etherTag[4];
        u_short ether_type;
};






 










 





 



 





 





# 146 "d:/Tornado2.2/target/h/netinet/if_ether.h"


 



  



 






struct	ether_arp {
	struct	arphdr ea_hdr;	 
	u_char	arp_sha[6];	 
	u_char	arp_spa[4];	 
	u_char	arp_tha[6];	 
	u_char	arp_tpa[4];	 
}  ;







 




struct	arpcom {
	struct 	ifnet ac_if;		 
	u_char	ac_enaddr[6];		 
	struct	in_addr ac_ipaddr;	 
	struct	ether_multi *ac_multiaddrs;  
	int	ac_multicnt;		 
}  ;

 
 


struct	arptab {
	struct	in_addr at_iaddr;	 
	u_char	at_enaddr[6];		 
	u_char	at_timer;		 
	u_char	at_flags;		 
	struct	mBlk *at_hold;		 
}  ;

struct llinfo_arp {
	struct	llinfo_arp *la_next;
	struct	llinfo_arp *la_prev;
	struct	rtentry *la_rt;
	struct	mBlk *la_hold;		 
	long	la_asked;		 

}  ;

struct sockaddr_inarp {
	u_char	sin_len;
	u_char	sin_family;
	u_short	sin_port;
	struct	in_addr sin_addr;
	struct	in_addr sin_srcaddr;
	u_short	sin_tos;
	u_short	sin_other;

}  ;

 





 







struct ether_multi {
	u_char	enm_addrlo[6];		 
	u_char	enm_addrhi[6];		 
	struct	arpcom *enm_ac;		 
	u_int	enm_refcount;		 
	struct	ether_multi *enm_next;	 
}  ;

 



struct ether_multistep {
	struct ether_multi  *e_enm;
}  ;





 





# 273 "d:/Tornado2.2/target/h/netinet/if_ether.h"

 























extern u_char 	etherbroadcastaddr[6];
extern u_char	ether_ipmulticast_min[6];
extern u_char	ether_ipmulticast_max[6];
extern struct	ifqueue arpintrq;

extern struct	llinfo_arp llinfo_arp;		 



extern struct	llinfo_arp *arptnew (struct in_addr *);

extern void	arpwhohas (struct arpcom *, struct in_addr *);



extern void	arpintr (void);

extern int	arpresolve (struct arpcom *, struct rtentry *, struct mBlk *,
			     struct sockaddr *, u_char *);
extern void	arp_rtrequest (int, struct rtentry *, struct sockaddr *);
extern void	arpwhohas (struct arpcom *, struct in_addr *);
extern void	revarpinput(struct mBlk *m);
extern void     ipToEtherMCastMap (struct in_addr *, u_char * );
extern int      ipEtherResolvRtn (FUNCPTR, struct mBlk *, struct sockaddr *,  
				  struct ifnet *, struct rtentry *, char *);

extern int	ether_addmulti (struct ifreq *, struct arpcom *);
extern int	ether_delmulti (struct ifreq *, struct arpcom *);
extern char * 	ether_sprintf( u_char * ap);
extern void db_print_sa(struct sockaddr* sa);







# 270 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h" 1
 

 

 
# 23 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h"








 




# 1 "d:/Tornado2.2/target/h/netinet/in.h" 1
 

 
# 37 "d:/Tornado2.2/target/h/netinet/in.h"

 
# 49 "d:/Tornado2.2/target/h/netinet/in.h"


# 358 "d:/Tornado2.2/target/h/netinet/in.h"

# 37 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h" 2
# 1 "d:/Tornado2.2/target/h/netinet/in_var.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/netinet/in_var.h"

 
















# 1 "d:/Tornado2.2/target/h/netinet/in_pcb.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/netinet/in_pcb.h"

 















# 1 "d:/Tornado2.2/target/h/netinet/ip.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/netinet/ip.h"

 
# 51 "d:/Tornado2.2/target/h/netinet/ip.h"


# 235 "d:/Tornado2.2/target/h/netinet/ip.h"

# 57 "d:/Tornado2.2/target/h/netinet/in_pcb.h" 2






 



struct ip_moptions {
	struct	ifnet *imo_multicast_ifp;  
	u_char	imo_multicast_ttl;	 
	u_char	imo_multicast_loop;	 
	u_short	imo_num_memberships; 
	struct  mBlk *	pInmMblk; 	 
	u_long imo_multicast_vif;    
};

 







struct inpcbhead							            {								            struct  inpcb *lh_first;	 		            };

struct inpcb {
	struct {									struct inpcb *le_next;	 				struct inpcb **le_prev;	 	} inp_list;	 
	struct {									struct inpcb *le_next;	 				struct inpcb **le_prev;	 	} inp_hash;	 
	struct	inpcbinfo *inp_pcbinfo;
	struct	in_addr inp_faddr;	 
	u_short	inp_fport;		 
	struct	in_addr inp_laddr;	 
	u_short	inp_lport;		 
	struct	socket *inp_socket;	 
	caddr_t	inp_ppcb;		 
	struct	route inp_route;	 
	int	inp_flags;		 
	struct	ip inp_ip;		 
	struct	mBlk *inp_options;	 
	struct	ip_moptions *inp_moptions;  
};

struct inpcbinfo {
	struct inpcbhead *listhead;
	struct inpcbhead *hashbase;
	unsigned long hashmask;
	unsigned short lastport;
};








 










extern void in_losing (struct inpcb *);
extern int in_pcballoc (struct socket *, struct inpcbinfo *);
extern int in_pcbbind (struct inpcb *, struct mBlk *);
extern int in_pcbconnect (struct inpcb *, struct mBlk *);
extern void in_pcbdetach (struct inpcb *);
extern void in_pcbdisconnect (struct inpcb *);
extern void in_pcbinshash (struct inpcb *);
extern int in_pcbladdr (struct inpcb *, struct mBlk *, struct sockaddr_in **);
extern struct inpcb * in_pcblookup (struct inpcbinfo *, struct in_addr, u_int,
                                    struct in_addr, u_int, int);
extern struct inpcb * in_pcblookuphash (struct inpcbinfo *, struct in_addr,
                                        u_int, struct in_addr, u_int, int);
extern void in_pcbnotify (struct inpcbhead *, struct sockaddr *, u_int,
                          struct in_addr, u_int, int,
                          void (*)(struct inpcb *, int));
extern void in_pcbrehash (struct inpcb *);
extern void in_rtchange (struct inpcb *, int);
extern void in_setpeeraddr (struct inpcb *, struct mBlk *);
extern void in_setsockaddr (struct inpcb *, struct mBlk *);







# 58 "d:/Tornado2.2/target/h/netinet/in_var.h" 2





 





struct in_ifaddr {
	struct	ifaddr ia_ifa;		 


					 
	u_long	ia_net;			 
	u_long	ia_netmask;		 
	u_long	ia_subnet;		 
	u_long	ia_subnetmask;		 
	struct	in_addr ia_netbroadcast;  
	struct	in_ifaddr *ia_next;	 
	struct	sockaddr_in ia_addr;	 
	struct	sockaddr_in ia_dstaddr;  

	struct	sockaddr_in ia_sockmask;  
};

struct	in_aliasreq {
	char	ifra_name[16];		 
	struct	sockaddr_in ifra_addr;
	struct	sockaddr_in ifra_broadaddr;

	struct	sockaddr_in ifra_mask;
};
 







			


extern	struct	in_ifaddr *in_ifaddr;


extern	struct	ifqueue	ipintrq;		 

extern u_char 	inetctlerrmap[];

extern void	in_socktrim (struct sockaddr_in *);


 




# 134 "d:/Tornado2.2/target/h/netinet/in_var.h"


# 147 "d:/Tornado2.2/target/h/netinet/in_var.h"



 




# 167 "d:/Tornado2.2/target/h/netinet/in_var.h"


# 177 "d:/Tornado2.2/target/h/netinet/in_var.h"



struct inMultiHead							            {								            struct  in_multi *lh_first;	 		            }; 


 




struct router_info {
	struct ifnet *rti_ifp;
	int    rti_type;  
	int    rti_time;  
	struct router_info *rti_next;
};

 







struct in_multi {
	struct {									struct in_multi *le_next;	 				struct in_multi **le_prev;	 	} inm_hash;	 
	struct	in_addr inm_addr;	 
	struct	ifnet *inm_ifp;		 
	u_int	inm_refcount;		 
        u_int	inm_timer;		 
        u_int	inm_state;		 
        struct	router_info *inm_rti;	 
      	struct  mBlk * pInPcbMblk; 	  
};

struct mcastHashInfo
    {
    struct inMultiHead *	hashBase;
    ULONG			hashMask;
    };

typedef struct in_multi		IN_MULTI;
typedef struct mcastHashInfo	M_CAST_HASH_INFO;
typedef struct inMultiHead	IN_MULTI_HEAD;
extern struct mcastHashInfo	mCastHashInfo;

 



 












extern int	in_ifinit (struct ifnet *,
                           struct in_ifaddr *, struct sockaddr_in *, int);
extern struct mBlk * in_addmulti (struct in_addr *, struct ifnet *,
                                  struct inpcb *);
extern int	in_delmulti (struct mBlk *, struct inpcb *);
extern void	in_ifscrub (struct ifnet *, struct in_ifaddr *);
extern int	in_control (struct socket *, u_long, caddr_t, struct ifnet *);
extern STATUS 	mcastHashTblInsert (struct in_multi * 	pInMulti);
extern STATUS 	mcastHashTblDelete (struct in_multi * pInMulti);
extern IN_MULTI * mcastHashTblLookup (int mcastAddr, struct ifnet * pIf);







# 38 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h" 2

# 1 "d:/Tornado2.2/target/h/drv/netif/if_sm.h" 1
 

 
 
# 15 "d:/Tornado2.2/target/h/drv/netif/if_sm.h"








# 1 "d:/Tornado2.2/target/h/smPktLib.h" 1
 

 

 
# 27 "d:/Tornado2.2/target/h/smPktLib.h"








 

# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 38 "d:/Tornado2.2/target/h/smPktLib.h" 2
# 1 "d:/Tornado2.2/target/h/smLib.h" 1
 

 
 
# 34 "d:/Tornado2.2/target/h/smLib.h"








 

# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 45 "d:/Tornado2.2/target/h/smLib.h" 2


 

 






 


					 




 






 




 




 



					 




					 





					 




					 
					 








					 

					 








 







 

typedef struct sm_cpu_desc	 
    {
    int		status;		 
    int		intType;	 
    int		intArg1;	 
    int		intArg2;	 
    int		intArg3;	 
    int		reserved1;	 
    int		reserved2;	 
    } SM_CPU_DESC;


 

typedef struct sm_hdr		 
    {
    int		tasType;	 
    int		maxCpus;	 
    int		cpuTable;	 
    int		reserved1;	 
    int		reserved2;	 
    int		reserved3;	 
    int		reserved4;	 
    int		reserved5;	 
    int		reserved6;	 
    int		reserved7;	 
    int		reserved8;	 
    } SM_HDR;


 

typedef struct sm_anchor	 
    {
    UINT	readyValue;      
    int		version;         
    int		masterCpu;       
    int		smHeader;	 
    int		smPktHeader;     
    int 	smObjHeader;     
    int		user1;           
    int		user2;           
    int		reserved1;       
    int		reserved2;       
    int		reserved3;       
    } SM_ANCHOR;

 

typedef struct sm_desc		 
    {
    int		status;		 
    SM_ANCHOR	*anchorLocalAdrs; 
    SM_HDR	*headerLocalAdrs; 
    SM_CPU_DESC	*cpuTblLocalAdrs; 
    int		base;		 
    int		cpuNum;		 
    int		ticksPerBeat;	 
    int		intType;	 
    int		intArg1;	 
    int		intArg2;	 
    int		intArg3;	 
    int		maxCpus;	 
    FUNCPTR	tasRoutine;	 
    FUNCPTR	tasClearRoutine; 
    } SM_DESC;


 

typedef struct sm_info		 
    {
    int		version;	 
    int		tasType;	 
    int		maxCpus;	 
    int		attachedCpus;	 
    } SM_INFO;


 

typedef struct sm_cpu_info	 
    {
    int		cpuNum;		 
    int		status;		 
    int		intType;	 
    int		intArg1;	 
    int		intArg2;	 
    int		intArg3;	 
    } SM_CPU_INFO;

typedef struct sm_region	 
    {
    SM_ANCHOR *	anchor;		 
    } SM_REGION;





 

extern int	smCurMaxTries;     
extern VOIDFUNCPTR smUtilTasClearRtn;
extern FUNCPTR smUtilUser1Rtn;
extern FUNCPTR smUtilUser2Rtn;

 



extern void	smLibInit (void * pRgnCfgTbl, UINT objSize, UINT netSize);
extern STATUS 	smSetup (SM_ANCHOR *anchorLocalAdrs, char *smLocalAdrs,
			 int tasType, int maxCpus, int	* pMemUsed);
extern STATUS	smAttach (SM_DESC *pSmDesc);
extern STATUS 	smDetach (SM_DESC *pSmDesc);
extern void 	smInit (SM_DESC *pSmDesc, SM_ANCHOR *anchorLocalAdrs,
			int ticksPerBeat, int intType, int intArg1,
			int intArg2, int intArg3);
extern BOOL 	smIsAlive (SM_ANCHOR *pAnchor, int *pHeader, int base,
			   int heartBeats, int ticksPerBeat);
extern STATUS 	smLockTake (int * lockLocalAdrs, FUNCPTR tasRoutine,
			   int numTries, int * pOldLvl);
extern void	smLockGive (int *lockLocalAdrs, FUNCPTR tasClearRoutine,
			    int oldLvl);
extern STATUS 	smInfoGet (SM_DESC *pSmDesc, SM_INFO *pInfo);
extern STATUS 	smCpuInfoGet (SM_DESC *pSmDesc, int cpuNum,
			      SM_CPU_INFO *pCpuInfo);



# 276 "d:/Tornado2.2/target/h/smLib.h"









# 39 "d:/Tornado2.2/target/h/smPktLib.h" 2

 

 













 






 











 

typedef struct sm_sll_node       
    {
    int  	next;  		 
    } SM_SLL_NODE;


 

typedef struct sm_sll_list	 
    {
    int         lock;            
    int  	head;        	 
    int 	tail;        	 
    int         count;           
    int         limit;           
    } SM_SLL_LIST;

 

typedef struct sm_pkt_hdr	 
    {
    SM_SLL_NODE	node;		 
    int		type;		 
    int		nBytes;		 
    int		srcCpu;		 
    int		ownerCpu;	 
    int		reserved1;	 
    int		reserved2;	 
    } SM_PKT_HDR;

 

typedef struct sm_pkt 		 
    {
    SM_PKT_HDR	header;		 
    char	data [1];	 
    } SM_PKT;


 

typedef struct sm_pkt_cpu_desc   
    {
    int         status;          
    SM_SLL_LIST inputList;       
    SM_SLL_LIST freeList;        
    } SM_PKT_CPU_DESC;


 

typedef struct sm_pkt_mem_hdr	 
    {
    UINT	  heartBeat; 	 
    SM_SLL_LIST   freeList;	 
    int 	  pktCpuTbl;	 
    int           maxPktBytes;	 
    int		  reserved1;	 
    int		  reserved2;	 
    } SM_PKT_MEM_HDR;

typedef struct sm_pkt_desc	 
    {
    int			status;
    SM_DESC		smDesc;		 
    int         	maxPktBytes;   	 
    int         	maxInputPkts;	 
    SM_PKT_MEM_HDR *	hdrLocalAdrs;	 
    SM_PKT_CPU_DESC *	cpuLocalAdrs;	 
    } SM_PKT_DESC;

 

typedef struct sm_pkt_info 	 
    {
    SM_INFO	smInfo;
    int		attachedCpus;	 
    int		maxPktBytes;	 
    int		totalPkts;	 
    int		freePkts;	 
    } SM_PKT_INFO;

 

typedef struct sm_pkt_cpu_info	 
    {
    SM_CPU_INFO	smCpuInfo;
    int		status;		 
    int		maxInputPkts;	 
    int		inputPkts;	 
    int		totalPkts;	 
    int		freePkts;	 
    } SM_PKT_CPU_INFO;





 



extern STATUS 	smPktFreeGet (SM_PKT_DESC *pSmPktDesc, SM_PKT **ppPkt);
extern STATUS 	smPktFreePut (SM_PKT_DESC *pSmPktDesc, SM_PKT *pPkt);
extern STATUS 	smPktRecv (SM_PKT_DESC *pSmPktDesc, SM_PKT **ppPkt);
extern STATUS 	smPktSend (SM_PKT_DESC *pSmPktDesc, SM_PKT *pPkt, int destCpu);
extern STATUS 	smPktSetup (SM_ANCHOR * anchorLocalAdrs, char * smLocalAdrs,
			    int smSize,	int tasType, int maxCpus,
			    int maxPktBytes);
extern void 	smPktInit (SM_PKT_DESC *pSmPktDesc, SM_ANCHOR *anchorLocalAdrs,
			   int maxInputPkts, int ticksPerBeat, int intType,
			   int intArg1, int intArg2, int intArg3);
extern STATUS 	smPktAttach (SM_PKT_DESC *pSmPktDesc);
extern STATUS 	smPktDetach (SM_PKT_DESC *pSmPktDesc, BOOL noFlush);
extern STATUS 	smPktInfoGet (SM_PKT_DESC *pSmPktDesc, SM_PKT_INFO *pInfo);
extern STATUS 	smPktCpuInfoGet (SM_PKT_DESC *pSmPktDesc, int cpuNum,
			         SM_PKT_CPU_INFO *pCpuInfo);
extern void 	smPktBeat (SM_PKT_MEM_HDR *pSmPktHdr);



# 212 "d:/Tornado2.2/target/h/smPktLib.h"







# 24 "d:/Tornado2.2/target/h/drv/netif/if_sm.h" 2

 







 





typedef struct sm_softc
    {
    struct arpcom	xs_ac;			 
    SM_PKT_DESC		smPktDesc;		 
    int			taskRecvActive;		 
    u_long		masterAddr;		 
    int			bufFree;		 
    } SM_SOFTC;





 



extern STATUS smIfAttach (int unit, SM_ANCHOR * pAnchor, int maxInputPkts,
			  int intType, int intArg1, int intArg2, int intArg3,
			  int ticksPerBeat, int numLoan);
extern void smIfInput (SM_SOFTC * xs);
extern void smIfLoanReturn (SM_SOFTC * xs, SM_PKT * pPkt);















# 40 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h" 2
# 1 "d:/Tornado2.2/target/h/errno.h" 1
 

 

 







 
# 36 "d:/Tornado2.2/target/h/errno.h"


# 189 "d:/Tornado2.2/target/h/errno.h"

# 41 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h" 2
# 1 "d:/Tornado2.2/target/h/sys/ioctl.h" 1
 

 

 
# 23 "d:/Tornado2.2/target/h/sys/ioctl.h"








 

 











 

 






 















# 88 "d:/Tornado2.2/target/h/sys/ioctl.h"





































 










# 42 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h" 2
# 1 "d:/Tornado2.2/target/h/etherLib.h" 1
 

 

 
# 30 "d:/Tornado2.2/target/h/etherLib.h"











extern FUNCPTR etherInputHookRtn;
extern FUNCPTR etherOutputHookRtn;





 
typedef struct enet_hdr
    {
    char dst [6];
    char src [6];
    USHORT type;
    } ENET_HDR;








 



extern STATUS 	etherAddrResolve (struct ifnet *pIf, char *targetAddr,
				  char *eHdr, int numTries, int numTicks);
extern STATUS 	etherInputHookAdd ();
extern STATUS 	etherOutput (struct ifnet *pIf, struct ether_header
		*pEtherHeader, char *pData, int dataLength);
extern STATUS 	etherOutputHookAdd ();
extern void 	etherInputHookDelete ();
extern void 	etherOutputHookDelete ();

extern USHORT etherTypeGet (char *pPacket);


# 89 "d:/Tornado2.2/target/h/etherLib.h"







# 43 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h" 2

# 1 "d:/Tornado2.2/target/h/net/if_subr.h" 1
 

 
 
# 25 "d:/Tornado2.2/target/h/net/if_subr.h"








 





 




 



extern void do_protocol_with_type (u_short type, struct mBlk *m,
                                   struct arpcom *pArpcom, int len);

extern int set_if_addr (struct ifnet *ifp, char *data, u_char *enaddr);

extern STATUS ether_attach (struct ifnet *ifp, int unit, char *name,
		          FUNCPTR initRtn, FUNCPTR ioctlRtn, FUNCPTR outputRtn,
			  FUNCPTR resetRtn);

extern void ether_ifattach (struct ifnet *);
extern void ether_input (struct ifnet *, struct ether_header *, struct mBlk *);
extern int  ether_output (struct ifnet *, struct mBlk *, struct sockaddr *, 
                          struct rtentry *);
extern char    *ether_sprintf (u_char *);


extern STATUS netTypeAdd (int etherType, FUNCPTR inputRtn);
extern STATUS netTypeDelete (int etherType);
extern void netTypeInit ();


# 83 "d:/Tornado2.2/target/h/net/if_subr.h"







# 45 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h" 2



 



 

extern SM_SOFTC *		sm_softc[];




 










						 












 



extern STATUS smNetInit (SM_ANCHOR * pAnchor, char * pMem, int memSize,
                         int tasType, int cpuMax, int maxPktBytes,
                         u_long startAddr);
extern STATUS smNetAttach (int unit, SM_ANCHOR *pAnchor, int maxInputPkts,
                           int intType, int intArg1, int intArg2, int intArg3);
extern STATUS smNetAttach2 (int unit, SM_ANCHOR *pAnchor, int maxInputPkts,
                            int intType, int intArg1, int intArg2, int intArg3,
                            int masterCpu, int maxTicsWait);
extern STATUS smNetInetGet (char * smName, char * smInet, int cpuNum);
extern void   smNetShowInit (void);
extern STATUS smNetShow (char *	ifName, BOOL zero);
struct mBlk * loanBuild (SM_SOFTC * xs, SM_PKT volatile * pPkt, u_char * pData,
                         int len);


# 111 "d:/Tornado2.2/target/h/drv/netif/smNetLib.h"








# 271 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/ipProto.h" 1
 

 

 
# 29 "d:/Tornado2.2/target/h/ipProto.h"
 







 



 

 
typedef struct ip_drv_ctrl
    {
    struct arpcom idr;                 
    void* 	pArpCookie;
    void* 	pIpCookie;
    int		attached;
    BOOL 	nptFlag; 	 
    M_BLK_ID 	pSrc; 		 
    M_BLK_ID    pDst; 		 
    char * 	pDstAddr; 	 
    } IP_DRV_CTRL;

 

extern IP_DRV_CTRL ipDrvCtrl[];

 

 
extern int ipAttach (int unit, char *pDevice);
extern STATUS ipDetach (int unit, char *pDevice);
extern void *ipMuxCookieGet (unsigned short ifIndex);

 

 







# 272 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/private/excLibP.h" 1
 

 

 














 

extern BOOL excExtendedVectors;

 


extern STATUS 	excVecInit (void);
extern STATUS 	excInit (void);
extern void 	excTask (void);














# 273 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/private/kernelLibP.h" 1
 

 
 












# 1 "d:/Tornado2.2/target/h/kernelLib.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/kernelLib.h"








 



extern char *	kernelVersion (void);
extern STATUS 	kernelTimeSlice (int ticks);
extern void 	kernelInit (FUNCPTR rootRtn, unsigned rootMemSize,
			    char *pMemPoolStart, char *pMemPoolEnd,
			    unsigned intStackSize, int lockOutLevel);














# 18 "d:/Tornado2.2/target/h/private/kernelLibP.h" 2


 

extern BOOL	kernelState;		 
extern BOOL	kernelIsIdle;		 
extern BOOL	roundRobinOn;		 
extern ULONG	roundRobinSlice;	 
extern int 	rootTaskId;		 
extern char *	pRootMemStart;		 
extern unsigned rootMemNBytes;		 
extern Q_HEAD	tickQHead;		 
extern Q_HEAD	readyQHead;		 
extern Q_HEAD	activeQHead;		 







# 274 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/private/workQLibP.h" 1
 

 

 
















# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 23 "d:/Tornado2.2/target/h/private/workQLibP.h" 2

 

typedef struct		 
    {
    FUNCPTR function;		 
    int	arg1;			 
    int arg2;			 
    int arg3;			 
    } JOB;



 

extern volatile UINT8	workQReadIx;	 
extern volatile UINT8	workQWriteIx;	 
extern volatile BOOL	workQIsEmpty;	 
extern int	pJobPool[];		 

 



extern void	workQInit (void);
extern void	workQDoWork (void);
extern void	workQPanic (void);
extern void	workQAdd0 (FUNCPTR func);
extern void	workQAdd1 (FUNCPTR func, int arg1);
extern void	workQAdd2 (FUNCPTR func, int arg1, int arg2);


# 64 "d:/Tornado2.2/target/h/private/workQLibP.h"


# 79 "d:/Tornado2.2/target/h/private/workQLibP.h"







# 275 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "config.h" 1
 

 

 
# 145 "config.h"

 











 






# 1 "d:/Tornado2.2/target/config/all/configAll.h" 1
 

 

 
# 184 "d:/Tornado2.2/target/config/all/configAll.h"

 








# 1 "d:/Tornado2.2/target/h/smLib.h" 1
 

 
 
# 34 "d:/Tornado2.2/target/h/smLib.h"


# 284 "d:/Tornado2.2/target/h/smLib.h"

# 195 "d:/Tornado2.2/target/config/all/configAll.h" 2
# 1 "d:/Tornado2.2/target/h/vme.h" 1
 

 

 
# 22 "d:/Tornado2.2/target/h/vme.h"

 
# 33 "d:/Tornado2.2/target/h/vme.h"








 































# 196 "d:/Tornado2.2/target/config/all/configAll.h" 2
# 1 "d:/Tornado2.2/target/h/iv.h" 1
 

 

 
# 38 "d:/Tornado2.2/target/h/iv.h"

















































# 1 "d:/Tornado2.2/target/h/arch/i86/ivI86.h" 1
 

 

 
# 14 "d:/Tornado2.2/target/h/arch/i86/ivI86.h"









 






















 

 




 




 































# 88 "d:/Tornado2.2/target/h/iv.h" 2




















# 197 "d:/Tornado2.2/target/config/all/configAll.h" 2

 
 
 
 
 








































 
 











 

 















































 






# 327 "d:/Tornado2.2/target/config/all/configAll.h"


 
 
 
 
 


# 426 "d:/Tornado2.2/target/config/all/configAll.h"

 
 
 
 
 






















 
























 


# 490 "d:/Tornado2.2/target/config/all/configAll.h"


# 500 "d:/Tornado2.2/target/config/all/configAll.h"


# 510 "d:/Tornado2.2/target/config/all/configAll.h"











# 529 "d:/Tornado2.2/target/config/all/configAll.h"


# 540 "d:/Tornado2.2/target/config/all/configAll.h"


# 550 "d:/Tornado2.2/target/config/all/configAll.h"












# 570 "d:/Tornado2.2/target/config/all/configAll.h"











# 592 "d:/Tornado2.2/target/config/all/configAll.h"





 



 







 













 



 











 































 








 
 
 
 
 

 




 
 
 
 
 

 








 






 







# 733 "d:/Tornado2.2/target/config/all/configAll.h"

 




 




 




 




 




 








































# 808 "d:/Tornado2.2/target/config/all/configAll.h"


 









 










 





 












 

 
 
 
 
 











 


 
 
 
 
 

# 932 "d:/Tornado2.2/target/config/all/configAll.h"




     



















 


                                          
                                          








 
























 





























 






 


# 1042 "d:/Tornado2.2/target/config/all/configAll.h"

 








 








 


# 1073 "d:/Tornado2.2/target/config/all/configAll.h"

 






 





 












# 166 "config.h" 2
# 1 "pc.h" 1
 

 

 
# 59 "pc.h"

 











# 1 "d:/Tornado2.2/target/h/drv/intrCtl/i8259.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/drv/intrCtl/i8259.h"








 




 





 




 


















extern VOID	i8259Init	(void);
extern int	sysIntLevel	(int arg);
extern VOID	sysIntLock	(void);
extern VOID	sysIntUnlock	(void);
extern VOID 	i8259IntBoi 	(int irqNo);
extern VOID 	i8259IntBoiEem	(int irqNo);
extern VOID 	i8259IntBoiSmm	(int irqNo);
extern VOID 	i8259IntEoiSmm	(int irqNo);
extern VOID 	i8259IntEoiMaster (int irqNo);
extern VOID 	i8259IntEoiSlave (int irqNo);
extern VOID 	i8259IntEoiSlaveNfnm (int irqNo);
extern VOID 	i8259IntEoiSlaveSfnm (int irqNo);


# 89 "d:/Tornado2.2/target/h/drv/intrCtl/i8259.h"









# 73 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/timer/i8253.h" 1
 

 

 













 




 





 












# 74 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/timer/mc146818.h" 1
 

 

 


















typedef struct
    {
    int rate;
    char bits;
    } CLK_RATE;




 






 





 










 






 










# 75 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/timer/timerDev.h" 1
 

 

 








 





# 80 "d:/Tornado2.2/target/h/drv/timer/timerDev.h"

# 76 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/timer/timestampDev.h" 1
 

 

 







 




# 1 "d:/Tornado2.2/target/h/drv/timer/timerDev.h" 1
 

 

 








 





# 80 "d:/Tornado2.2/target/h/drv/timer/timerDev.h"

# 19 "d:/Tornado2.2/target/h/drv/timer/timestampDev.h" 2

# 77 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/fdisk/nec765Fd.h" 1
 

 
 
# 16 "d:/Tornado2.2/target/h/drv/fdisk/nec765Fd.h"











# 1 "d:/Tornado2.2/target/h/blkIo.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/blkIo.h"


# 53 "d:/Tornado2.2/target/h/blkIo.h"

# 28 "d:/Tornado2.2/target/h/drv/fdisk/nec765Fd.h" 2

typedef struct fdDev
    {
    BLK_DEV blkDev;
    int fdType;		 
    int drive;		 
    int blkOffset;	 
    } FD_DEV;

typedef struct fdType
    {
    int sectors;	 
    int sectorsTrack;	 
    int heads;		 
    int cylinders;	 
    int secSize;	 
    char gap1;		 
    char gap2;		 
    char dataRate;	 
    char stepRate;	 
    char headUnload;	 
    char headLoad;	 
    char mfm;		 
    char sk;		 
    char *name;		 
    } FD_TYPE;

typedef struct fdRaw
    {				 
    UINT cylinder;		 
    UINT head;			 
    UINT sector;			 
    char *pBuf;			 
    UINT nSecs;			 
    UINT direction;		 
    } FD_RAW;


 



 






 








 











 










 


















 




 



STATUS		fdDrv		(int vector, int level);
BLK_DEV		*fdDevCreate	(int fdType, int drive, int nBlks, int offset);
STATUS		fdRawio		(int drive, int fdType, FD_RAW *pFdRaw);
STATUS		usrFdConfig	(int type, int drive, char *fileName);



















# 78 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/serial/pcConsole.h" 1
 

 

 
# 14 "d:/Tornado2.2/target/h/drv/serial/pcConsole.h"










# 1 "d:/Tornado2.2/target/h/tyLib.h" 1
 

 

 
# 53 "d:/Tornado2.2/target/h/tyLib.h"











# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 65 "d:/Tornado2.2/target/h/tyLib.h" 2
# 1 "d:/Tornado2.2/target/h/private/semLibP.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/private/semLibP.h"


# 212 "d:/Tornado2.2/target/h/private/semLibP.h"

# 66 "d:/Tornado2.2/target/h/tyLib.h" 2

 

typedef struct		 
    {
    DEV_HDR	devHdr;		 

    RING_ID	rdBuf;		 
    SEMAPHORE	rdSyncSem;	 
    SEMAPHORE	mutexSem;	 
    struct			 
	{
	unsigned char xoff;      
	unsigned char pending;   
        unsigned char canceled;  
	unsigned char flushingRdBuf;  
	}	rdState;

    RING_ID	wrtBuf;		 
    SEMAPHORE	wrtSyncSem;	 
    struct			 
	{
	unsigned char busy;      
	unsigned char xoff;      
	unsigned char cr;        
        unsigned char canceled;  
	unsigned char flushingWrtBuf;  
	unsigned char wrtBufBusy;  
	}	wrtState;

    UINT8	lnNBytes;	 
    UINT8	lnBytesLeft;	 

    unsigned short options;	 
    FUNCPTR	txStartup;	 
    FUNCPTR	protoHook;	 
    int		protoArg;	 
    SEL_WAKEUP_LIST selWakeupList; 
    int		numOpen;	 
    } TY_DEV;

 

typedef TY_DEV * TY_DEV_ID;

 



extern STATUS 	tyDevInit (TY_DEV_ID pTyDev, int rdBufSize, int wrtBufSize,
			   FUNCPTR txStartup);
extern STATUS 	tyITx (TY_DEV_ID pTyDev, char *pChar);
extern STATUS 	tyIRd (TY_DEV_ID pTyDev, char inchar);
extern STATUS 	tyIoctl (TY_DEV_ID pTyDev, int request, int arg);
extern int 	tyRead (TY_DEV_ID pTyDev, char *buffer, int maxbytes);
extern int 	tyWrite (TY_DEV_ID pTyDev, char *buffer, int nbytes);
extern void 	tyAbortFuncSet (FUNCPTR func);
extern void 	tyAbortSet (char ch);
extern void 	tyBackspaceSet (char ch);
extern void 	tyDeleteLineSet (char ch);
extern void 	tyEOFSet (char ch);
extern void 	tyMonitorTrapSet (char ch);


# 145 "d:/Tornado2.2/target/h/tyLib.h"







# 25 "d:/Tornado2.2/target/h/drv/serial/pcConsole.h" 2



 

typedef struct 
    {
    BOOL	curMode;		 
    int		kbdMode;		 
    UINT16	kbdFlags;		 
    UINT16	kbdState;		 
    int		currCon;		 		
    FUNCPTR 	kbdHook;		 
    BOOL	convertChar;		 
    } KBD_CON_DEV;
   
 

typedef struct 
    {
    UCHAR *	memBase;		 
    UCHAR *	selReg;			 
    UCHAR *	valReg;			 
    int 	row, col;		 
    UCHAR *	curChrPos;      	 
    UCHAR	curAttrib;		 
    UCHAR	defAttrib;      	 
    int 	nrow, ncol;		 
    int 	scst, sced;		 
    BOOL	rev;			 
    BOOL	autoWrap;		 
    BOOL	sv_rev;			 
    int 	sv_row, sv_col;		 
    UCHAR	sv_curAttrib;	 	 
    BOOL	scrollCheck;     	 
    UCHAR *	charSet;         	 
    int		vgaMode;         	 
    BOOL	colorMode;       	 
    BOOL	insMode;         	 
    char	tab_stop [80];      	 
    UINT16	escFlags;		 
    int 	escParaCount;	 	 
    int 	escPara[16];  	 
    BOOL	escQuestion;     	 
    char	escResp[10];     	 
    FUNCPTR     vgaHook;		 
    } VGA_CON_DEV;


 

typedef struct				 
    {
    TY_DEV	tyDev;
    BOOL	created;		 
    KBD_CON_DEV * ks;			 
    VGA_CON_DEV * vs;			 
    } PC_CON_DEV;

 







 











 














 




 














 











 










































 


extern	void	kbdIntr (void);
extern  void 	kbdHrdInit (void);
extern	int	pcConDrv (void);
extern	int	pcConDevCreate (char *name, register int channel, int rdBufSize,
			      int wrtBufSize);
extern  void	vgaHrdInit (void);
extern	int 	vgaWriteString (register PC_CON_DEV * pPcCoDv);


# 214 "d:/Tornado2.2/target/h/drv/serial/pcConsole.h"









# 79 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/parallel/lptDrv.h" 1
 

 

 
# 17 "d:/Tornado2.2/target/h/drv/parallel/lptDrv.h"










 




typedef struct lptDev		 
    {
    DEV_HDR	devHdr;
    BOOL	created;	 
    BOOL	autofeed;	 
    BOOL	inservice;	 
    ULONG	data;		 
    ULONG	stat;		 
    ULONG	ctrl;		 
    int 	intCnt;		 
    int 	retryCnt;	 
    int		busyWait;	 
    int 	strobeWait;	 
    int 	timeout;	 
    int 	intLevel;	 
    SEM_ID	muteSem;	 
    SEM_ID	syncSem;	 
    } LPT_DEV;

typedef struct lptResource	 
    {
    int		ioBase;		 
    int		intVector;	 
    int		intLevel;	 
    BOOL	autofeed;        
    int		busyWait;        
    int		strobeWait;      
    int		retryCnt;        
    int		timeout;         
    int		regDelta;	 
    } LPT_RESOURCE;

 



 





 





 





 








 








 




extern LPT_RESOURCE lptResources[];

 



STATUS	lptDrv (int channels, LPT_RESOURCE *pResource);
STATUS	lptDevCreate (char *name, int channel);


















# 80 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/pcmcia/pcmciaLib.h" 1
 

 
 

 














# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 22 "d:/Tornado2.2/target/h/drv/pcmcia/pcmciaLib.h" 2


 







# 1 "d:/Tornado2.2/target/h/dllLib.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/dllLib.h"


# 172 "d:/Tornado2.2/target/h/dllLib.h"

# 33 "d:/Tornado2.2/target/h/drv/pcmcia/pcmciaLib.h" 2
# 1 "d:/Tornado2.2/target/h/blkIo.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/blkIo.h"


# 53 "d:/Tornado2.2/target/h/blkIo.h"

# 34 "d:/Tornado2.2/target/h/drv/pcmcia/pcmciaLib.h" 2


# 1 "d:/Tornado2.2/target/h/drv/pcmcia/pccardLib.h" 1
  

 

 





























typedef struct pccardEnabler
    {
    int		type;		 
    void	*pResource;	 
    int		resourceNumEnt;	 
    FUNCPTR	enableRtn;	 
    FUNCPTR	showRtn;	 
    } PCCARD_ENABLER;

typedef struct pccardResource
    {
    int		vcc;		 
    int		vpp;		 
    int		ioStart[2];	 
    int		ioStop[2];	 
    int		ioExtraws;	 
    int		memStart;	 
    int		memStop;	 
    int		memExtraws;	 
    int		memOffset;	 
    int		memLength;	 
    } PCCARD_RESOURCE;

typedef struct ataResource	 
    {
    PCCARD_RESOURCE resource;	 
    int		ctrlType;	 
    int		drives;		 
    int		intVector;	 
    int		intLevel;	 
    int		configType;	 
    int		semTimeout;	 
    int		wdgTimeout;	 
    int		sockTwin;	 
    int		pwrdown;	 
    } ATA_RESOURCE;

typedef struct sramResource	 
    {
    PCCARD_RESOURCE resource;	 
    } SRAM_RESOURCE;

typedef struct eltResource	 
    {
    PCCARD_RESOURCE resource;	 
    int		intVector;	 
    int		intLevel;	 
    int		rxFrames;	 
    int		connector;	 
    } ELT_RESOURCE;

typedef struct tffsResource	 
    {
    PCCARD_RESOURCE resource;	 
    } TFFS_RESOURCE;


 



extern STATUS	pccardMount		(int sock, char *pName);
extern STATUS	pccardMkfs		(int sock, char *pName);
extern STATUS	pccardEltEnabler	(int sock, ELT_RESOURCE *pEltResource,
			 		 int numEnt, FUNCPTR showRtn);
extern STATUS	pccardAtaEnabler	(int sock, ATA_RESOURCE *pAtaResource,
			 		 int numEnt, FUNCPTR showRtn);
extern STATUS	pccardSramEnabler	(int sock, SRAM_RESOURCE *pSramResource,
			 		 int numEnt, FUNCPTR showRtn);
extern STATUS	pccardTffsEnabler	(int sock, TFFS_RESOURCE *pTffsResource,
			 		 int numEnt, FUNCPTR showRtn);
extern void	pccardShowInit		(void);


# 119 "d:/Tornado2.2/target/h/drv/pcmcia/pccardLib.h"










# 37 "d:/Tornado2.2/target/h/drv/pcmcia/pcmciaLib.h" 2












typedef struct pcmciaCard		 
    {
    int		type;			 
    int		sock;			 
    int		ctrl;			 
    BOOL	detected;		 
    BOOL	installed;		 
    BOOL	changed;		 
    int		regBase;		 
    int		regMask;		 
    int		cardStatus;		 
    int		initStatus;		 
    FUNCPTR	cscIntr;		 
    FUNCPTR	showRtn;		 
    DL_LIST	cisTupleList;		 
    DL_LIST	cisConfigList;		 
    PCCARD_RESOURCE *pResource;		 
    BLK_DEV	*pBlkDev;		 
    NETIF	*pNetIf;		 
    DOS_VOL_DESC *pDos;			 
    } PCMCIA_CARD;

typedef struct pcmciaChip		 
    {
    int		type;			 
    char	*name;			 
    BOOL	installed;		 
    int		socks;			 
    int		flags;			 
    int		intLevel;		 
    int		memWindows;		 
    int		ioWindows;		 
    FUNCPTR	reset;			 
    FUNCPTR	status;			 
    FUNCPTR	flagGet;		 
    FUNCPTR	flagSet;		 
    FUNCPTR	cscOn;			 
    FUNCPTR	cscOff;			 
    FUNCPTR	cscPoll;		 
    FUNCPTR	irqGet;			 
    FUNCPTR	irqSet;			 
    FUNCPTR	iowinGet;		 
    FUNCPTR	iowinSet;		 
    FUNCPTR	memwinGet;		 
    FUNCPTR	memwinSet;		 
    FUNCPTR	showRtn;		 
    } PCMCIA_CHIP;

typedef struct pcmciaCtrl
    {
    int		socks;			 
    int		memBase;		 
    PCMCIA_CHIP chip;			 
    PCMCIA_CARD card[8];	 
    } PCMCIA_CTRL;

typedef struct pcmciaIowin
    {
    int		window;
    int		flags;
    int		extraws;
    int		start;
    int		stop;
    } PCMCIA_IOWIN;

typedef struct pcmciaMemwin
    {
    int		window;
    int		flags;
    int		extraws;
    int		start;
    int		stop;
    int		cardstart;
    } PCMCIA_MEMWIN;

typedef struct pcmciaAdapter
    {
    int		type;			 
    int		ioBase;			 
    int		intVec;			 
    int		intLevel;		 
    FUNCPTR	initRtn;		 
    FUNCPTR	showRtn;		 
    } PCMCIA_ADAPTER;

typedef struct pcmciaMsg
    {
    VOIDFUNCPTR	func;			 
    int		arg [6];	 
    } PCMCIA_MSG;

 




 





 






 




 








 











 













 












 









 



extern STATUS 	pcmciaInit	(void);
extern STATUS 	pcmciaJobAdd	(VOIDFUNCPTR func, int arg1, int arg2, 
				 int arg3, int arg4, int arg5, int arg6);
extern void 	pcmciad		(void);
extern void 	pcmciaShowInit	(void);
extern void 	pcmciaShow	(int sock);


# 241 "d:/Tornado2.2/target/h/drv/pcmcia/pcmciaLib.h"









# 81 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/hdisk/ataDrv.h" 1
 

 
 
# 18 "d:/Tornado2.2/target/h/drv/hdisk/ataDrv.h"












# 1 "d:/Tornado2.2/target/h/blkIo.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/blkIo.h"


# 53 "d:/Tornado2.2/target/h/blkIo.h"

# 31 "d:/Tornado2.2/target/h/drv/hdisk/ataDrv.h" 2

# 1 "d:/Tornado2.2/target/h/private/semLibP.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/private/semLibP.h"


# 212 "d:/Tornado2.2/target/h/private/semLibP.h"

# 33 "d:/Tornado2.2/target/h/drv/hdisk/ataDrv.h" 2


extern ATA_RESOURCE ataResources[];
 













typedef struct ataParams 
    {
    short config;		 
    short cylinders;		 
    short removcyl;		 
    short heads;		 
    short bytesTrack;		 
    short bytesSec;		 
    short sectors;		 
    short bytesGap;		 
    short bytesSync;		 
    short vendstat;		 
    char  serial[20];		 
    short type;			 
    short size;			 
    short bytesEcc;		 
    char  rev[8];		 
    char  model[40];		 
    short multiSecs;		 
    short reserved48;		 
    short capabilities;		 
    short reserved50;		 
    short pioMode;		 
    short dmaMode;		 
    short valid;		 
    short currentCylinders;	 
    short currentHeads;		 
    short currentSectors;	 
    short capacity0;		 
    short capacity1;		 
    short multiSet;		 
    short sectors0;		 
    short sectors1;		 
    short singleDma;		 
    short multiDma;		 
    short advancedPio;		 
    short cycletimeDma;		 
    short cycletimeMulti;	 
    short cycletimePioNoIordy;	 
    short cycletimePioIordy;	 
    short reserved69;		 
    short reserved70;		 

     

    short pktCmdRelTime;	 
    short servCmdRelTime;	 
    short majorRevNum;		 
    short minorVersNum;		 
    short reserved75[53];	 
    short vendor[32];		 
    short reserved160[96];	 
    } ATA_PARAM;

typedef enum  
    {
    NON_DATA,  
    OUT_DATA,
    IN_DATA
    } t_data_dir;

 









 















typedef struct ataDev
    {
    BLK_DEV     blkDev;		 
    int         ctrl;		 
    int         drive;		 
    int         blkOffset;	 
    int		nBlocks;	 

    char *	pBuf;		 
    char *	pBufEnd;	 
    t_data_dir	direction;	 
    int		transCount;	 
    int		errNum;		 

     

    uint8_t	intReason;	 
    uint8_t	status;		 
    uint16_t	transSize;	 
    } ATA_DEV;

typedef struct ataDrive
    {
    ATA_PARAM	param;		 
    short	okMulti;	 
    short	okIordy;	 
    short	okDma;		 
    short	okLba;		 
    short	multiSecs;	 
    short	pioMode;	 
    short	singleDmaMode;	 
    short	multiDmaMode;	 
    short	rwMode;		 
    short	rwBits;		 
    short	rwPio;		 
    short	rwDma;		 

    uint8_t	state;		 
    uint8_t	diagCode;	 
    uint8_t	type;		 
    STATUS      (*Reset)	 
        (
        int ctrl,
        int dev
        );

    ATA_DEV     *pAtaDev;	 
    } ATA_DRIVE;

typedef struct ataCtrl
    {
    ATA_DRIVE	drive[2];	 
    SEMAPHORE	syncSem;	 
    SEMAPHORE	muteSem;	 
    WDOG_ID	wdgId;		 
    BOOL	wdgOkay;	 
    int		semTimeout;	 
    int		wdgTimeout;	 
    int		ctrlType;	 
    BOOL	installed;	 
    BOOL	changed;	 
    int		intLevel;	 
    int		intCount;	 
    int		intStatus;	 
    int		drives;		 
    UINT32	data;		 
    UINT32	error;		 
    UINT32	feature;	 
    UINT32	seccnt;		 
    UINT32	sector;		 
    UINT32	cylLo;		 
    UINT32	cylHi;		 
    UINT32	sdh;		 
    UINT32	command;	 
    UINT32	status;		 
    UINT32	aStatus;	 
    UINT32	dControl;	 
    UINT32	dAddress;	 

    int		configType;	 
    } ATA_CTRL;

typedef struct ataType
    {
    int cylinders;		 
    int heads;			 
    int sectors;		 
    int bytes;			 
    int precomp;		 
    } ATA_TYPE;

typedef struct ataRaw
    {				 
    UINT cylinder;		 
    UINT head;			 
    UINT sector;		 
    char *pBuf;			 
    UINT nSecs;			 
    UINT direction;		 
    } ATA_RAW;






 
















 



 





 


					 










 




 














 






 







 



















 
















 

































 

 

















 







 



 
 



 
 



 



 












 

















 




 





 




 















 





 

 



extern STATUS	ataDrv		(int ctrl, int drives, int vector, int level,
				 int configType, int semTimeout,
				 int wdgTimeout);
extern BLK_DEV	*ataDevCreate	(int ctrl, int drive, int nBlks, int offset);
extern STATUS	ataRawio	(int ctrl, int drive, ATA_RAW *pAtaRaw);
extern void	ataShowInit	(void);
extern STATUS	ataShow		(int ctrl, int drive);
extern int	usrAtaPartition	(int ctrl, int drive, DOS_PART_TBL *pPart);
extern STATUS   usrAtaConfig	(int ctrl, int drive, char *fileName);
extern void     usrAtaInit	(void);


# 534 "d:/Tornado2.2/target/h/drv/hdisk/ataDrv.h"










# 82 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/arch/i86/mmuI86Lib.h" 1
 

 

 
# 15 "d:/Tornado2.2/target/h/arch/i86/mmuI86Lib.h"

























typedef struct
    {
    unsigned present:1;
    unsigned rw:1;
    unsigned us:1;
    unsigned pwt:1;
    unsigned pcd:1;
    unsigned access:1;
    unsigned dirty:1;
    unsigned zero:2;
    unsigned avail:3;
    unsigned page:20;
    } PTE_FIELD;

typedef union pte
    {
    PTE_FIELD field;
    unsigned int bits;
    } PTE;

typedef struct mmuTransTblStruct
    {
    PTE *pDirectoryTable;
    } MMU_TRANS_TBL;
















 



extern STATUS	mmuI86LibInit (int pageSize);
extern STATUS	mmuI86Enable (BOOL enable);
extern void	mmuI86On ();
extern void	mmuI86Off ();
extern void	mmuI86TLBFlush ();
extern void	mmuI86PdbrSet (MMU_TRANS_TBL * transTbl);
extern MMU_TRANS_TBL *	mmuI86PdbrGet ();

extern void	vmBaseArch32LibInit (void);
extern void	vmBaseArch36LibInit (void);
extern STATUS	vmBaseArch32Map (void * virtAddr, void * physAddr,
		    UINT32 stateMask, UINT32 state, UINT32 len);
extern STATUS	vmBaseArch32Translate (void * virtAddr, void ** physAddr);
extern void	vmArch32LibInit (void);
extern void	vmArch36LibInit (void);
extern STATUS	vmArch32Map ();
extern STATUS	vmArch32Translate ();


# 122 "d:/Tornado2.2/target/h/arch/i86/mmuI86Lib.h"









# 83 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/arch/i86/ipiI86Lib.h" 1
 

 

 















 







 

extern char	ipiCallTbl [];		 


 



extern void	ipiVecInit (UINT32 intNum);
extern void	ipiHandler (UINT32 index);
extern STATUS	ipiConnect (UINT32 intNum, VOIDFUNCPTR routine);
extern STATUS	ipiStartup (UINT32 apicId, UINT32 vector, UINT32 nTimes);
extern STATUS	ipiShutdown (UINT32 apicId, UINT32 vector);
extern void	ipiStub (void);
extern void	ipiShutdownSup (void);
extern void	ipiHandlerTlbFlush (void);
extern void	ipiHandlerTscReset (void);
extern void	ipiHandlerShutdown (void);


# 63 "d:/Tornado2.2/target/h/arch/i86/ipiI86Lib.h"










# 84 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/intrCtl/loApic.h" 1
 

  

 















 


























 





 



 








 
















 




 












 








 









 







 



 










 

typedef struct			 
    {
    char    signature [4];	 
    UINT32  configTableAddr;	 
    UINT8   length;		 
    UINT8   specRev;		 
    UINT8   cksum;		 
    UINT8   featureByte[5];	 
    } MP_FPS;

typedef struct			 
    {
    char    mpSignature[4];	 
    UINT16  tableLength;	 
    UINT8   specRevision;	 
    UINT8   cksum;		 
    char    oemId[8];		 
    char    prodId[12];		 
    UINT32  oemTablePtr;	 
    UINT16  oemTableSize;	 
    UINT16  entryCount;		 
    UINT32  localApicBaseAddr;	 
    UINT16  extendedTableLength;  
    UINT8   extendedTableCksum;  
    UINT8   reserved;            
    } MP_HEADER; 

typedef struct			 
    {
    UINT8   entryType;		 
    UINT8   localApicId;	 
    UINT8   localApicVersion;	 
    UINT8   cpuFlags;		 
    UINT32  cpuSig;		 
    UINT32  featureFlags;	 
    UINT32  reserved[2];
    } MP_CPU;

typedef struct			 
    {
    UINT8  entryType;		 
    UINT8  ioApicId;		 
    UINT8  ioApicVersion;	 
    UINT8  ioApicFlags;		 
    UINT32 ioApicBaseAddress;	 
    } MP_IOAPIC;

 

extern UINT32	loApicBase;		 
extern UINT32	ioApicBase;		 
extern UINT32	ioApicData;		 
extern UINT32	loApicId;		 
extern UINT32	loApicVersion;		 
extern UINT32	loApicMaxLvt;		 




extern void	loApicInit	(void);
extern void	loApicEnable	(BOOL enable);
extern STATUS	loApicIpi	(INT32 apicId, INT32 shortHand, INT32 trigger, 
				 INT32 level, INT32 destMode, INT32 deliMode, 
				 INT32 vectorNo);



















# 85 "pc.h" 2
# 1 "d:/Tornado2.2/target/h/drv/intrCtl/ioApic.h" 1
 

  

 
# 14 "d:/Tornado2.2/target/h/drv/intrCtl/ioApic.h"









 





 







 




 





 



 



 





















 

extern UINT32	ioApicVersion;
extern UINT32	ioApicRedEntries;




extern STATUS   ioApicInit       (void);
extern VOID     ioApicEnable     (BOOL enable);
extern STATUS	ioApicIrqSet	 (INT32 irq, INT32 apicId);
extern STATUS   ioApicRedGet     (INT32 irq, INT32 * pUpper32, INT32 * pLower32);
extern STATUS   ioApicRedSet     (INT32 irq, INT32 upper32, INT32 lower32);
extern INT32    ioApicGet        (UINT32 index, UINT32 data, INT32 offset);
extern void     ioApicSet        (UINT32 index, UINT32 data, INT32 offset, INT32 value);


# 105 "d:/Tornado2.2/target/h/drv/intrCtl/ioApic.h"











# 86 "pc.h" 2











 





 























 

 
# 140 "pc.h"












 






 





 





 


































 










 



 








 



 















 







 



















 



 






# 299 "pc.h"











 


















 



 




















 





















# 167 "config.h" 2


 


    extern void sysHwInit0 (void);
    extern UINT8 sysInumTbl[];		 


 





 












# 204 "config.h"

 













 

 







 








 








 




 









 





 








 



















 


# 311 "config.h"


 











 




















 











 


# 375 "config.h"














# 459 "config.h"


















				 
				 








				 
				 














 






 







 







 







 







 






 

























 


























 











 




 










 
















 










 



















 
# 696 "config.h"




 




 





 

# 1 "configInum.h" 1
 

 

 






 












 


# 41 "configInum.h"


 









# 134 "configInum.h"









































 
































# 714 "config.h" 2





 













# 762 "config.h"












# 276 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/scsiLib.h" 1
 

 

 














typedef struct scsifunctbl
    {
    FUNCPTR scsiCtrlInit;		 
    FUNCPTR scsiBlkDevInit;		 
    FUNCPTR scsiBlkDevCreate;		 
    FUNCPTR scsiBlkDevShow;		  
    FUNCPTR scsiPhaseNameGet;		 
    FUNCPTR scsiPhysDevCreate;		 
    FUNCPTR scsiPhysDevDelete;		 
    FUNCPTR scsiPhysDevIdGet;		 
    FUNCPTR scsiAutoConfig;		 
    FUNCPTR scsiShow;			 
    FUNCPTR scsiBusReset;		 
    FUNCPTR scsiCmdBuild;		 
    FUNCPTR scsiTransact;		 
    FUNCPTR scsiIoctl;			 
    FUNCPTR scsiFormatUnit;		 
    FUNCPTR scsiModeSelect;		 
    FUNCPTR scsiModeSense;		 
    FUNCPTR scsiReadCapacity;		 
    FUNCPTR scsiRdSecs;			 
    FUNCPTR scsiWrtSecs;		 
    FUNCPTR scsiTestUnitRdy;		 
    FUNCPTR scsiInquiry;		 
    FUNCPTR scsiReqSense;		 
    } SCSI_FUNC_TBL;





 



# 1 "d:/Tornado2.2/target/h/scsi1Lib.h" 1
 

 

 
# 43 "d:/Tornado2.2/target/h/scsi1Lib.h"










# 1 "d:/Tornado2.2/target/h/vwModNum.h" 1
 

 

 
# 94 "d:/Tornado2.2/target/h/vwModNum.h"


# 253 "d:/Tornado2.2/target/h/vwModNum.h"

# 54 "d:/Tornado2.2/target/h/scsi1Lib.h" 2
# 1 "d:/Tornado2.2/target/h/blkIo.h" 1
 

 

 
# 21 "d:/Tornado2.2/target/h/blkIo.h"


# 53 "d:/Tornado2.2/target/h/blkIo.h"

# 55 "d:/Tornado2.2/target/h/scsi1Lib.h" 2

# 1 "d:/Tornado2.2/target/h/private/semLibP.h" 1
 

 

 
# 20 "d:/Tornado2.2/target/h/private/semLibP.h"


# 212 "d:/Tornado2.2/target/h/private/semLibP.h"

# 57 "d:/Tornado2.2/target/h/scsi1Lib.h" 2










 





















































 




















 













 




















 





 





 






 



























					 


					 






				 



 









 

typedef enum scsiPhysDevStatus
    {
    IDLE,
    SELECT_REQUESTED,
    SELECT_IN_PROGRESS,
    SELECT_SUCCESSFUL,
    SELECT_TIMEOUT,
    SELECT_LOST_ARBIT,
    DISCONNECTED,
    RECONNECTED
    } SCSI_DEV_STATUS;

 

















typedef struct scsiBlkDevList
    {
    SEMAPHORE listMutexSem;
    LIST blkDevNodes;
    } SCSI_BLK_DEV_LIST;

 

typedef struct   
    {
    UINT8 *cmdAddress;           
    int cmdLength;               
    UINT8 *dataAddress;          
    int dataDirection;           
    int dataLength;                  int addLengthByte;           
    UINT8 statusByte;            
    int cmdTimeout;		 
    } SCSI_TRANSACTION;

 



typedef struct 			 
    {
    SEMAPHORE devMutexSem;	 
    SEMAPHORE devSyncSem;	 
    int scsiDevBusId;		 
    int scsiDevLUN;		 
    UINT selTimeOut;		 
    UINT8 scsiDevType;		 
    TBOOL disconnect;            
    TBOOL expectDisconnect;      
    TBOOL xmitsParity;     	 
    TBOOL useIdentify;		 
    TBOOL syncXfer;		 
    int syncXferOffset;		 
    int syncXferPeriod;		 
    UINT8 *savedTransAddress;    
    int savedTransLength;        
    BOOL resetFlag;		 
    FUNCPTR postResetRtn;	 

    char devVendorID [8 + 1]; 	 
    char devProductID [16 + 1];	 
    char devRevLevel [4 + 1];	 

    BOOL removable;		 
    UINT8 lastSenseKey;		 
    UINT8 lastAddSenseCode;	 
    int controlByte;		 
    int numBlocks;		 
    int blockSize;		 
    struct scsiCtrl *pScsiCtrl;	 
    SCSI_DEV_STATUS devStatus;	 
    				 
    UINT8 msgOutArray [8 + 1]; 
    int msgLength;		 
    BOOL extendedSense;		 
    UINT8 *pReqSenseData;	 
    int reqSenseDataLength;	 
    				 
    struct scsiBlkDevList blkDevList;
    struct scsiBlkDev *pScsiBlkDev;
    int useMsgout;               
    int syncReserved1;           
    int syncReserved2;           
    SCSI_TRANSACTION  *pScsiXaction;	 
    } SCSI_PHYS_DEV;


 



 


typedef struct
     {
     int syncPeriodCtrl;      
     int syncOffsetCtrl;      
     int syncPeriodTarget;    
     int syncOffsetTarget;    
     } SCSI_SYNC_AGREEMENT;

typedef SCSI_PHYS_DEV *SCSI_PHYS_DEV_ID;

typedef struct scsiBlkDev	 

    {
    BLK_DEV blkDev;		 
    SCSI_PHYS_DEV *pScsiPhysDev; 
    int numBlocks;		 
    int blockOffset;		 
    } SCSI_BLK_DEV;

typedef SCSI_BLK_DEV *SCSI_BLK_DEV_ID;

typedef struct scsiBlkDevNode
    {
    NODE blkDevNode;
    SCSI_BLK_DEV scsiBlkDev;
    } SCSI_BLK_DEV_NODE;

typedef struct scsiCtrl		 
    {
    SEMAPHORE ctrlMutexSem;	 
    SEMAPHORE ctrlSyncSem;	 
    VOIDFUNCPTR scsiBusReset;	 
    FUNCPTR scsiTransact;	 
    FUNCPTR scsiDevSelect;	 
    FUNCPTR scsiBytesIn;	 
    FUNCPTR scsiBytesOut;	 
    FUNCPTR scsiDmaBytesIn;	 
    FUNCPTR scsiDmaBytesOut;	 
    FUNCPTR scsiBusPhaseGet;	 
    FUNCPTR scsiMsgInAck;	 
    VOIDFUNCPTR scsiSelTimeOutCvt;  
    UINT maxBytesPerXfer;	 
    UINT clkPeriod;		 
    int scsiCtrlBusId;		 
    int scsiPriority;		 
    int scsiBusPhase;            
    TBOOL disconnect;		 
				 
    SCSI_PHYS_DEV *physDevArr [64];
    FUNCPTR scsiSyncMsgConvert;  

    VOIDFUNCPTR scsiSetAtn;      
    } SCSI_CTRL;

 



typedef UINT8 SCSI_COMMAND [12];





 










typedef struct   
    {
    int lastLogBlkAdrs;		 
    int blkLength;		 
    } RD_CAP_DATA;











 





 






 

extern BOOL            scsiDebug; 	 
extern BOOL            scsiIntsDebug;	 
extern SCSI_CTRL *     pSysScsiCtrl;
extern SCSI_FUNC_TBL * pScsiIfTbl;       
extern UINT32          scsiSelectTimeout;
extern int             blkDevListMutexOptions;
extern int             scsiCtrlMutexOptions;
extern int             scsiCtrlSemOptions;
extern int             scsiPhysDevMutexOptions;
extern int             scsiPhysDevSemOptions;



 















 




 
# 509 "d:/Tornado2.2/target/h/scsi1Lib.h"





# 527 "d:/Tornado2.2/target/h/scsi1Lib.h"



 

extern void   scsi1IfInit ();



extern BLK_DEV *       scsiBlkDevCreate (SCSI_PHYS_DEV *, int, int);
extern SCSI_PHYS_DEV * scsiPhysDevCreate (SCSI_CTRL *, int, int, int, int, 
					 BOOL, int, int);
extern SCSI_PHYS_DEV * scsiPhysDevIdGet (SCSI_CTRL *, int, int);
extern STATUS 	       scsiAutoConfig (SCSI_CTRL *);
extern STATUS 	       scsiBusReset (SCSI_CTRL *);
extern STATUS 	       scsiCmdBuild (SCSI_COMMAND, int *, UINT8, int, BOOL, 
                                     int, int , UINT8);
extern STATUS 	       scsiCtrlInit (SCSI_CTRL *);
extern STATUS 	       scsiFormatUnit (SCSI_PHYS_DEV *, BOOL, int, int, int, 
                                       char *, int);
extern STATUS 	       scsiInquiry (SCSI_PHYS_DEV *, char *, int);
extern STATUS 	       scsiIoctl (SCSI_PHYS_DEV *, int, int);
extern STATUS 	       scsiModeSelect (SCSI_PHYS_DEV *, int, int, char *, int);
extern STATUS 	       scsiModeSense (SCSI_PHYS_DEV *, int, int, char *, int);
extern STATUS 	       scsiPhysDevDelete (SCSI_PHYS_DEV *);
extern STATUS 	       scsiRdSecs (SCSI_BLK_DEV *, int, int, char *);
extern STATUS 	       scsiReadCapacity (SCSI_PHYS_DEV *, int *, int *);
extern STATUS 	       scsiReqSense (SCSI_PHYS_DEV *, char *, int);
extern STATUS 	       scsiShow (SCSI_CTRL *);
extern STATUS 	       scsiTestUnitRdy (SCSI_PHYS_DEV *);
extern STATUS 	       scsiTransact (SCSI_PHYS_DEV *, SCSI_TRANSACTION *);
extern STATUS 	       scsiWrtSecs (SCSI_BLK_DEV *, int, int, char *);
extern char *	       scsiPhaseNameGet (int);
extern void 	       scsiBlkDevInit (SCSI_BLK_DEV *, int, int);
extern void 	       scsiBlkDevShow (SCSI_PHYS_DEV *);
extern STATUS          scsiBuildByteMsgOut (UINT8 *,UINT8);
extern STATUS          scsiBuildExtMsgOut (UINT8 *,UINT8);


# 594 "d:/Tornado2.2/target/h/scsi1Lib.h"








# 56 "d:/Tornado2.2/target/h/scsiLib.h" 2









# 277 "d:/Tornado2.2/target/config/all/bootConfig.c" 2


































 




 


 





















 

void		usrInit ();
extern void 	sysInitAlt ();













static void* findCookie(int unitNo, char* devName);


 
# 376 "d:/Tornado2.2/target/config/all/bootConfig.c"

void compressedEntry 
    (
    int startType
    )
    {








    usrInit (startType);		 

    }


# 1 "d:/Tornado2.2/target/h/end.h" 1
 

 

 
# 58 "d:/Tornado2.2/target/h/end.h"
 
 
















# 1 "d:/Tornado2.2/target/h/m2Lib.h" 1
 

 
# 1 "d:/Tornado2.2/target/h/copyright_wrs.h" 1
 

# 5 "d:/Tornado2.2/target/h/m2Lib.h" 2

 
# 25 "d:/Tornado2.2/target/h/m2Lib.h"









# 1 "d:/Tornado2.2/target/h/avlLib.h" 1
 

 

 
# 15 "d:/Tornado2.2/target/h/avlLib.h"








 

typedef struct
    {
    void *  left;    
    void *  right;   
    int     height;  
    } AVL_NODE;

typedef AVL_NODE * AVL_TREE;     

typedef union
    {
    int     i;
    UINT    u;
    void *  p;
    } GENERIC_ARGUMENT;

 

void avlRebalance (AVL_NODE *** ancestors, int count);

void * avlSearch (AVL_TREE root, GENERIC_ARGUMENT key,
          int compare (void *, GENERIC_ARGUMENT));

void * avlSuccessorGet (AVL_TREE root, GENERIC_ARGUMENT key,
         int compare (void *, GENERIC_ARGUMENT)); 

void * avlPredecessorGet (AVL_TREE root, GENERIC_ARGUMENT key,
         int compare (void *, GENERIC_ARGUMENT)); 

void * avlMinimumGet (AVL_TREE root);

void * avlMaximumGet (AVL_TREE root);

STATUS avlInsert (AVL_TREE * root, void * newNode, GENERIC_ARGUMENT key,
          int compare (void *, GENERIC_ARGUMENT));

STATUS avlInsertInform (AVL_TREE * pRoot, void * pNewNode, GENERIC_ARGUMENT key,
          void ** ppKeyHolder,
          int compare (void *, GENERIC_ARGUMENT));

void * avlRemoveInsert (AVL_TREE * pRoot, void * pNewNode, GENERIC_ARGUMENT key,
          int compare (void *, GENERIC_ARGUMENT));

void * avlDelete (AVL_TREE * root, GENERIC_ARGUMENT key,
          int compare (void *, GENERIC_ARGUMENT));

STATUS avlTreeWalk(AVL_TREE * pRoot, void walkExec(AVL_TREE * nodepp));

STATUS avlTreePrint(AVL_TREE * pRoot, void printNode(void * nodep));

STATUS avlTreeErase(AVL_TREE * pRoot);

STATUS avlTreePrintErase(AVL_TREE * pRoot, void printNode(void * nodep));

 

void * avlSearchUnsigned (AVL_TREE root, UINT key);

STATUS avlInsertUnsigned (AVL_TREE * root, void * newNode);

void * avlDeleteUnsigned (AVL_TREE * root, UINT key);







# 35 "d:/Tornado2.2/target/h/m2Lib.h" 2





 





















 

 




































































































































































 




 




 



 




 

























 


















 





 





 




 








 





 




 































 



 




 






 
















 






 






 















 








                                              









 














































 

typedef struct ui64
    {
    UINT high;
    UINT low;
    } UI64;

 






 
# 515 "d:/Tornado2.2/target/h/m2Lib.h"


 
# 527 "d:/Tornado2.2/target/h/m2Lib.h"




 







 
# 549 "d:/Tornado2.2/target/h/m2Lib.h"






typedef struct
    {
    long   idLength;			 
    long   idArray [40];	 
 
    } M2_OBJECTID;

typedef struct
    {
    long           addrLength;			 
    unsigned char  phyAddress [16];    

    } M2_PHYADDR;


 







 





typedef struct
    {
    unsigned char   sysDescr     [256];
    M2_OBJECTID     sysObjectID;
    unsigned long   sysUpTime;
    unsigned char   sysContact   [256];
    unsigned char   sysName      [256];
    unsigned char   sysLocation  [256];
    long            sysServices;

    }  M2_SYSTEM;


 

typedef struct
    {
    long  ifNumber;          
    ULONG ifTableLastChange;  
    ULONG ifStackLastChange;  
    }  M2_INTERFACE;


 













typedef struct
    {
    int  	    ifIndex;			  
    char 	    ifDescr  [256];  
    long            ifType;             
    long            ifMtu;              
    unsigned long   ifSpeed;            
    M2_PHYADDR      ifPhysAddress;      
    long            ifAdminStatus;      
    long            ifOperStatus;       
    unsigned long   ifLastChange;       

    unsigned long   ifInOctets;         
    unsigned long   ifInUcastPkts;      

    unsigned long   ifInNUcastPkts;     

    unsigned long   ifInDiscards;       
    unsigned long   ifInErrors;         
    unsigned long   ifInUnknownProtos;  

    unsigned long   ifOutOctets;        
    unsigned long   ifOutUcastPkts;     

    unsigned long   ifOutNUcastPkts;    

    unsigned long   ifOutDiscards;      
    unsigned long   ifOutErrors;        

    unsigned long   ifOutQLen;          
    M2_OBJECTID     ifSpecific;         

    }  M2_INTERFACETBL;

 

typedef struct 
    {
    char         ifName [256];
    ULONG        ifInMulticastPkts;
    ULONG        ifInBroadcastPkts;
    ULONG        ifOutMulticastPkts;
    ULONG        ifOutBroadcastPkts;
    UI64         ifHCInOctets;
    UI64         ifHCInUcastPkts;
    UI64         ifHCInMulticastPkts;
    UI64         ifHCInBroadcastPkts;
    UI64         ifHCOutOctets;
    UI64         ifHCOutUcastPkts;
    UI64         ifHCOutMulticastPkts;
    UI64         ifHCOutBroadcastPkts;
    UINT         ifLinkUpDownTrapEnable;
    ULONG        ifHighSpeed;
    UINT         ifPromiscuousMode;
    UINT         ifConnectorPresent;
    char         ifAlias [256];
    ULONG        ifCounterDiscontinuityTime;
    } M2_2233TBL;

 

typedef struct M2_ID_S M2_ID;
typedef struct M2_IFSTACKTBL_S M2_IFSTACKTBL;
typedef STATUS (* M2_PKT_COUNT_RTN) (M2_ID *, UINT, UCHAR *, ULONG);
typedef STATUS (* M2_CTR_UPDATE_RTN) (M2_ID *, UINT, ULONG);
typedef STATUS (* M2_VAR_UPDATE_RTN) (M2_ID *, UINT, caddr_t);

 

typedef struct
    {
    M2_INTERFACETBL   mibIfTbl;          
    M2_2233TBL        mibXIfTbl;         
    } M2_DATA;

 

struct M2_ID_S
    {
    M2_DATA           m2Data;            
    M2_PKT_COUNT_RTN  m2PktCountRtn;     
    M2_CTR_UPDATE_RTN m2CtrUpdateRtn;    
    M2_VAR_UPDATE_RTN m2VarUpdateRtn;    
    };

 

struct M2_IFSTACKTBL_S
    {
    UINT                     index;        
    int                      status;      
    struct M2_IFSTACKTBL_S * pNextLower;  
    };

 

typedef struct M2_IFRCVADDRTBL_S 
    {
    M2_PHYADDR                 ifRcvAddrAddr; 


    int                        ifRcvAddrStatus;  
    int                        ifRcvAddrType;    
    struct M2_IFRCVADDRTBL_S * pNextEntry;       
    } M2_IFRCVADDRTBL;
    
 
    
typedef struct M2_IFINDEX_S
    {
    AVL_NODE          ifNode;         
    int               ifType;        
    int               ifIndex;       
    M2_OBJECTID       ifOid;         
    void *            pIfStats;      


    M2_IFSTACKTBL *   pNextLower;    
    M2_IFRCVADDRTBL * pRcvAddr;      

		       
		       
		       
		       
    int               (*ifIoctl) (struct socket*, u_long, caddr_t);
    STATUS            (*rcvAddrGet) (struct ifnet *, struct M2_IFINDEX_S *);
    BOOL              mibStyle;      
    } M2_IFINDEX;

 
    
typedef struct ifSetentry
    {
    unsigned int    varToSet;
    int             ifIndex;
    long            ifAdminStatus;
    UINT            ifPromiscuousMode;
    UINT            ifLinkUpDownTrapEnable;
    char            ifAlias[256];
    } IF_SETENTRY;

 




typedef struct
    {
    long            ipForwarding;
    long            ipDefaultTTL;
    unsigned long   ipInReceives;
    unsigned long   ipInHdrErrors;
    unsigned long   ipInAddrErrors;
    unsigned long   ipForwDatagrams;
    unsigned long   ipInUnknownProtos;
    unsigned long   ipInDiscards;
    unsigned long   ipInDelivers;
    unsigned long   ipOutRequests;
    unsigned long   ipOutDiscards;
    unsigned long   ipOutNoRoutes;
    long            ipReasmTimeout;
    unsigned long   ipReasmReqds;
    unsigned long   ipReasmOKs;
    unsigned long   ipReasmFails;
    unsigned long   ipFragOKs;
    unsigned long   ipFragFails;
    unsigned long   ipFragCreates;
    unsigned long   ipRoutingDiscards;

    } M2_IP;


 

typedef struct
    {
    unsigned long   ipAdEntAddr;
    long            ipAdEntIfIndex;
    unsigned long   ipAdEntNetMask;
    long            ipAdEntBcastAddr;
    long            ipAdEntReasmMaxSize;

    } M2_IPADDRTBL;

 

typedef struct
    {
    unsigned long   ipRouteDest;
    long            ipRouteIfIndex;
    long            ipRouteMetric1;
    long            ipRouteMetric2;
    long            ipRouteMetric3;
    long            ipRouteMetric4;
    unsigned long   ipRouteNextHop;
    long            ipRouteType;   
    long            ipRouteProto;
    long            ipRouteAge;
    unsigned long   ipRouteMask;
    long            ipRouteMetric5;
    M2_OBJECTID     ipRouteInfo;

    } M2_IPROUTETBL;

 






 

typedef struct
    {
    long            ipNetToMediaIfIndex;
    M2_PHYADDR 	    ipNetToMediaPhysAddress;
    unsigned long   ipNetToMediaNetAddress;
    long            ipNetToMediaType; 

    } M2_IPATRANSTBL;

 

typedef struct
    {
    unsigned long   icmpInMsgs;
    unsigned long   icmpInErrors;
    unsigned long   icmpInDestUnreachs;
    unsigned long   icmpInTimeExcds;
    unsigned long   icmpInParmProbs;
    unsigned long   icmpInSrcQuenchs;
    unsigned long   icmpInRedirects;
    unsigned long   icmpInEchos;
    unsigned long   icmpInEchoReps;
    unsigned long   icmpInTimestamps;
    unsigned long   icmpInTimestampReps;
    unsigned long   icmpInAddrMasks;
    unsigned long   icmpInAddrMaskReps;
    unsigned long   icmpOutMsgs;
    unsigned long   icmpOutErrors;
    unsigned long   icmpOutDestUnreachs;
    unsigned long   icmpOutTimeExcds;
    unsigned long   icmpOutParmProbs;
    unsigned long   icmpOutSrcQuenchs;
    unsigned long   icmpOutRedirects;
    unsigned long   icmpOutEchos;
    unsigned long   icmpOutEchoReps;
    unsigned long   icmpOutTimestamps;
    unsigned long   icmpOutTimestampReps;
    unsigned long   icmpOutAddrMasks;
    unsigned long   icmpOutAddrMaskReps;

    } M2_ICMP;


 

typedef struct 
    {
    long            tcpRtoAlgorithm;
    long            tcpRtoMin;
    long            tcpRtoMax;
    long            tcpMaxConn;
    unsigned long   tcpActiveOpens;
    unsigned long   tcpPassiveOpens;
    unsigned long   tcpAttemptFails;
    unsigned long   tcpEstabResets;
    unsigned long   tcpCurrEstab;
    unsigned long   tcpInSegs;
    unsigned long   tcpOutSegs;
    unsigned long   tcpRetransSegs;
    unsigned long   tcpInErrs;
    unsigned long   tcpOutRsts;

    } M2_TCPINFO;


 

typedef struct
    {
    long            tcpConnState;
    unsigned long   tcpConnLocalAddress;
    long            tcpConnLocalPort;
    unsigned long   tcpConnRemAddress;
    long            tcpConnRemPort;

    } M2_TCPCONNTBL;


 

typedef struct
    {
    unsigned long   udpInDatagrams;
    unsigned long   udpNoPorts;
    unsigned long   udpInErrors;
    unsigned long   udpOutDatagrams;

    } M2_UDP;

 

typedef struct
    {
    unsigned long   udpLocalAddress;
    long            udpLocalPort;

    } M2_UDPTBL;
 
typedef struct
    {
    ULONG       igmpInterfaceIfIndex; 
    ULONG       igmpInterfaceQueryInterval; 
    ULONG       igmpInterfaceStatus; 
    ULONG       igmpInterfaceVersion;
    ULONG       igmpInterfaceQuerier;
    ULONG       igmpInterfaceQueryMaxResponseTime;
    ULONG       igmpInterfaceQuerierPresentTimeout;
    ULONG       igmpInterfaceLeaveEnabled;
    ULONG       igmpInterfaceVersion1QuerierTimer;
    ULONG       igmpInterfaceWrongVersionQueries;
    ULONG       igmpInterfaceJoins;
    ULONG       igmpInterfaceLeaves;
    ULONG	igmpInterfaceGroups;
    ULONG       igmpInterfaceRobustness;
    ULONG       igmpInterfaceQuerierUpTime;
    ULONG       igmpInterfaceLastMembQueryIntvl;
    } M2_IGMP;
    
typedef struct 
    {
    ULONG       igmpCacheAddress;
    ULONG       igmpCacheIfIndex;
    ULONG       igmpCacheSelf;                
    ULONG       igmpCacheLastReporter;
    ULONG       igmpCacheUpTime;
    ULONG       igmpCacheExpiryTime;
    ULONG       igmpCacheStatus;
    ULONG       igmpCacheVersion1HostTimer;
    } M2_IGMP_CACHE;
        

    
 
 


extern STATUS m2SysInit (char *	mib2SysDescr, char * mib2SysContact,
		 char *	mib2SysLocation, M2_OBJECTID * pObjectId);

extern STATUS m2SysGroupInfoGet (M2_SYSTEM * pSysInfo);
extern STATUS m2SysGroupInfoSet (unsigned int varToSet, M2_SYSTEM * pSysInfo);
extern STATUS m2SysDelete (void);

extern M2_ID * m2IfAlloc (ULONG, UCHAR *, ULONG, ULONG, ULONG, char *, int);
extern STATUS  m2IfFree (M2_ID *);
extern STATUS  m2IfGenericPacketCount (M2_ID *, UINT, UCHAR *, ULONG);
extern STATUS  m2IfCounterUpdate (M2_ID *, UINT, ULONG);
extern STATUS  m2IfVariableUpdate (M2_ID *, UINT, caddr_t);
extern STATUS  m2IfPktCountRtnInstall (M2_ID *, M2_PKT_COUNT_RTN);
extern STATUS  m2IfCtrUpdateRtnInstall (M2_ID *, M2_CTR_UPDATE_RTN);
extern STATUS  m2IfVarUpdateRtnInstall (M2_ID *, M2_VAR_UPDATE_RTN);
extern STATUS  m2If8023PacketCount (M2_ID *, UINT, UCHAR *, ULONG);

extern STATUS m2IfInit (FUNCPTR pTrapRtn, void * pTrapArg);
extern STATUS m2IfTableUpdate (struct ifnet *, UINT,
		 int (*func) (struct socket*, u_long, caddr_t),
		 STATUS (func2) (struct ifnet*, M2_IFINDEX*));
extern STATUS m2IfGroupInfoGet (M2_INTERFACE * pIfInfo);
extern STATUS m2IfTblEntryGet (int search, void * pIfTblEntry);
extern STATUS m2IfTblEntrySet (void *);
extern STATUS m2IfStackTblUpdate (UINT lowerIndex, UINT higherIndex, int action);
extern STATUS m2IfStackEntryGet (int, int *,  M2_IFSTACKTBL *);
extern STATUS m2IfStackEntrySet (int, M2_IFSTACKTBL *);
extern STATUS m2IfRcvAddrEntryGet (int, int *, M2_IFRCVADDRTBL *);
extern STATUS m2IfRcvAddrEntrySet (int, int, M2_IFRCVADDRTBL *);
extern STATUS m2IfDelete (void);

extern STATUS m2IpInit (int maxRouteTableSize);
extern STATUS m2IpGroupInfoGet (M2_IP * pIpInfo);
extern STATUS m2IpGroupInfoSet (unsigned int varToSet, M2_IP * pIpInfo);

extern STATUS
	   m2IpAddrTblEntryGet (int search, M2_IPADDRTBL * pIpAddrTblEnry);

extern STATUS
m2IpRouteTblEntryGet (int   search, M2_IPROUTETBL * pIpRouteTblEntry);

extern STATUS
m2IpRouteTblEntrySet (int varToSet, M2_IPROUTETBL * pIpRouteTblEntry);

extern STATUS
    m2IpAtransTblEntryGet (int search, M2_IPATRANSTBL * pIpAtEntry);
extern STATUS
    m2IpAtransTblEntrySet (M2_IPATRANSTBL * pIpAtEntry);
extern STATUS m2IpDelete (void);

extern STATUS m2IcmpInit (void);
extern STATUS m2IcmpGroupInfoGet (M2_ICMP * pIcmpInfo);

extern STATUS m2TcpInit (void);
extern STATUS m2TcpGroupInfoGet (M2_TCPINFO * pTcpInfo);

extern STATUS m2TcpConnEntryGet (int search, M2_TCPCONNTBL * pTcpConnEntry);
extern STATUS m2TcpConnEntrySet (M2_TCPCONNTBL * pTcpConnEntry);

extern STATUS m2UdpInit (void);
extern STATUS m2UdpGroupInfoGet (M2_UDP * pUdpInfo);

extern STATUS m2UdpTblEntryGet (int search, M2_UDPTBL * pUdpEntry);
STATUS m2Init (char * mib2SysDescr, char * mib2SysContact, 
               char * mib2SysLocation, M2_OBJECTID * pMib2SysObjectId,
	       FUNCPTR pTrapRtn, void * pTrapArg, int maxRouteTableSize);
extern STATUS m2Delete (void);
extern STATUS m2TcpDelete (void);
extern STATUS m2UdpDelete (void);
extern STATUS m2IcmpDelete (void);
extern STATUS m2SetIfLastChange (int ifIndex);
extern STATUS m2IgmpInterfaceEntrySet(M2_IGMP *data, int varsToSet);
extern STATUS m2IgmpInterfaceEntryGet(M2_IGMP *data);
extern STATUS m2IgmpInterfaceEntryNextGet(M2_IGMP *data);
extern STATUS m2IgmpCacheEntryGet(M2_IGMP_CACHE *data);
extern STATUS m2IgmpCacheEntryNextGet(M2_IGMP_CACHE *data);
extern M2_IGMP_CACHE * igmpCacheEntry_first(void);
extern M2_IGMP_CACHE * igmpCacheEntry_next_inst(M2_IGMP_CACHE * data);
extern unsigned igmpCacheEntry_build_instance(M2_IGMP_CACHE * data, int * inst);


# 1109 "d:/Tornado2.2/target/h/m2Lib.h"











# 77 "d:/Tornado2.2/target/h/end.h" 2

# 1 "d:/Tornado2.2/target/h/memLib.h" 1
 

 

 
# 49 "d:/Tornado2.2/target/h/memLib.h"


# 195 "d:/Tornado2.2/target/h/memLib.h"

# 79 "d:/Tornado2.2/target/h/end.h" 2

# 1 "d:/Tornado2.2/target/h/net/if_llc.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/net/if_llc.h"

 
# 50 "d:/Tornado2.2/target/h/net/if_llc.h"












 







struct llc {
	u_char	llc_dsap;
	u_char	llc_ssap;
	union {
	    struct {
		u_char control;
		u_char format_id;
		u_char u_class;
		u_char window_x2;
	    } type_u;
	    struct {
		u_char num_snd_x2;
		u_char num_rcv_x2;
	    } type_i;
	    struct {
		u_char control;
		u_char num_rcv_x2;
	    } type_s;
	    struct {
	        u_char control;
		struct frmrinfo {
			u_char rej_pdu_0;
			u_char rej_pdu_1;
			u_char frmr_control;
			u_char frmr_control_ext;
			u_char frmr_cause;
		} frmrinfo;
	    } type_frmr;
	    struct {
		u_char control;
		u_char org_code[3];
		u_short ether_type;
	    } type_snap;
	    struct {
		u_char control;
		u_char control_ext;
	    } type_raw;
	} llc_un;
};












 







 



















 






 




 
















# 81 "d:/Tornado2.2/target/h/end.h" 2





 






 






 



                                 


                                 

 







 





 












typedef struct end_err
    {
    INT32 errCode;            
    char* pMesg;              
    void* pSpare;             
    } END_ERR;
    
 
typedef struct 
    {
    NODE node;		      
    char  addr[6];	      
    long   refcount;	      
    } ETHER_MULTI; 

typedef struct 
    {
    long len;		 
    char *pTable;		 
    } MULTI_TABLE;

 

typedef struct
    {
    int query;		 
    int queryLen;	 
    char queryData[4];  
    } END_QUERY;

 







typedef struct dev_obj 
    {
    char name[8];
    int unit;
    char description[80];
    void* pDevice;		 
    } DEV_OBJ;
	
 








typedef struct llHdrInfo
    {
    int		destAddrOffset;		 
    int		destSize; 		 
    int		srcAddrOffset;		 
    int		srcSize;		 
    int		ctrlAddrOffset;		 
    int		ctrlSize;		 
    int		pktType;		 
    int		dataOffset;		 
    } LL_HDR_INFO;

 
# 213 "d:/Tornado2.2/target/h/end.h"
typedef struct end_object
    {
    NODE node;



    DEV_OBJ devObject;		 
    STATUS (*receiveRtn) ();
                                 
    struct net_protocol *outputFilter;
                                 
    void* pOutputFilterSpare;    
    BOOL attached;		 
    SEM_ID txSem;		 
    long flags;			 
    struct net_funcs *pFuncTable;	 
    M2_INTERFACETBL mib2Tbl;	 
    LIST multiList;		 
    int	nMulti;			 
    LIST protocols;		 
    int snarfCount;              
    NET_POOL_ID pNetPool;        



    M2_ID * pMib2Tbl;            
    } END_OBJ;

    
 
# 251 "d:/Tornado2.2/target/h/end.h"
typedef struct net_protocol 
    {
    NODE node;			 
    char name[32];      
    long type;			 
    BOOL nptFlag; 		 
    BOOL (*stackRcvRtn) ();
                                 
				 
    STATUS (*stackShutdownRtn) ();
                                 
				 
    STATUS (*stackTxRestartRtn) ();
                                 
    void (*stackErrorRtn) ();
                                 
    END_OBJ * pEnd; 		 
    void* pSpare;                
                                 
    void * pNptCookie; 		 
    } NET_PROTOCOL;



 








typedef struct net_funcs
    {
    STATUS (*start) (END_OBJ*);		    
    STATUS (*stop) (END_OBJ*);		    
    STATUS (*unload) (END_OBJ*);		    
    int (*ioctl) (END_OBJ*, int, caddr_t);     
    STATUS (*send) (END_OBJ* , M_BLK_ID);	    
    STATUS (*mCastAddrAdd) (END_OBJ*, char*);  
    STATUS (*mCastAddrDel) (END_OBJ*, char*);  
    STATUS (*mCastAddrGet) (END_OBJ*, MULTI_TABLE*);
                                            
    STATUS (*pollSend) (END_OBJ*, M_BLK_ID);   
    STATUS (*pollRcv) (END_OBJ*, M_BLK_ID);    
    M_BLK_ID (*formAddress) (M_BLK_ID, M_BLK_ID, M_BLK_ID, BOOL);
                                            
    STATUS (*packetDataGet) (M_BLK_ID, LL_HDR_INFO *);
                                            
    STATUS (*addrGet) (M_BLK_ID, M_BLK_ID, M_BLK_ID, M_BLK_ID, M_BLK_ID);
                                            
    int (*endBind) (void*, void*, void*, long type); 
					 
					  
    } NET_FUNCS; 

 
# 331 "d:/Tornado2.2/target/h/end.h"

# 1 "d:/Tornado2.2/target/h/ioctl.h" 1
 

 

 







# 333 "d:/Tornado2.2/target/h/end.h" 2

 







 




 




 


 


 


 







 


 


 


 




 


 



 





typedef struct end_tbl_row
    {
    NODE node;                   
    char name[8];	 
    LIST units;                  
    } END_TBL_ROW;

 


typedef struct end_tbl_entry
    {
    int unit;                                 
    END_OBJ* (*endLoadFunc) (char*, void*);          
    char* endLoadString;                      
    BOOL endLoan;                             
    void* pBSP;                               
    BOOL processed;                           
    } END_TBL_ENTRY;
    

    










# 396 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/muxLib.h" 1
 

 

 
# 46 "d:/Tornado2.2/target/h/muxLib.h"
 
 













 
# 1 "d:/Tornado2.2/target/h/net/if_types.h" 1
 

 

 
# 39 "d:/Tornado2.2/target/h/net/if_types.h"

 















 









































































































































































# 63 "d:/Tornado2.2/target/h/muxLib.h" 2

 

 




 











 
 




 
enum MUX_MODE {MUX_MODE_NORM, MUX_MODE_POLL};



 

 

 

typedef struct _muxLib
    {
    int debug;
    SEM_ID lock;                   
    int mode;
    int priority;
    int taskDelay;
    int taskID;
    } muxLib;

 



typedef struct mux_addr_rec
    {
    NODE node;
    long protocol;
    FUNCPTR addrResFunc;
    } MUX_ADDR_REC;

 

 

 

STATUS muxLibInit ();
extern void * muxDevLoad(int unit, END_OBJ* (*endLoad) (char *, void*),
                           char *initString,
                           BOOL loaning, void*pBSP);
STATUS muxDevStart(void* pCookie);
STATUS muxDevStop(void* pCookie);
void muxShow(char* pDevName, int unit);
extern STATUS muxDevStopAll (int timeout);
extern STATUS muxDevUnload(char* pName, int unit);
void * muxBind (char * pName, int unit,
                  BOOL (*stackRcvRtn) (void*, long,M_BLK_ID, LL_HDR_INFO *,
                                       void*),
                  STATUS (*stackShutdownRtn) (void*, void*),
                  STATUS (*stackTxRestartRtn) (void*, void*),
                  void (*stackErrorRtn) (END_OBJ*, END_ERR*, void*),
                  long type, char* pProtoName, void* pSpare);
extern STATUS muxUnbind(void* pCookie, long type, FUNCPTR stackShutdownRtn);
extern STATUS muxSend(void* pCookie, M_BLK_ID pNBuff);
extern STATUS muxReceive(void* pCookie, M_BLK_ID pNBuff);
extern STATUS muxPollSend(void* pCookie, M_BLK_ID pNBuff);
extern STATUS muxPollReceive(void* pCookie, M_BLK_ID pNBuff);
extern STATUS muxIoctl(void* pCookie, int cmd, caddr_t data);
extern STATUS muxMCastAddrAdd(void* pCookie, char* pAddress);
extern STATUS muxMCastAddrDel(void* pCookie, char* pAddress);
extern STATUS muxMCastAddrGet(void* pCookie, MULTI_TABLE* pTable);
extern char* muxLoanGet(void* pCookie);
extern UINT8* muxRefCntGet(void* pCookie);
extern void muxLoanRet(void* pCookie, char* pData, UINT8* pRef);
extern M_BLK_ID muxLinkHeaderCreate(void* pCookie, M_BLK_ID pPacket,
                               M_BLK_ID pSrcAddr, M_BLK_ID pDstAddr,
                               BOOL bcastFlag);
extern M_BLK_ID muxAddressForm(void* pCookie, M_BLK_ID pMblk,
                               M_BLK_ID pSrcAddr, M_BLK_ID pDstAddr);
extern STATUS muxPacketDataGet(void* pCookie, M_BLK_ID pMblk, LL_HDR_INFO *);
extern STATUS muxPacketAddrGet (void* pCookie, M_BLK_ID pMblk,
                                M_BLK_ID pSrc,
                                M_BLK_ID pDst,
                                M_BLK_ID pESrc,
                                M_BLK_ID pEDst);
extern void muxTxRestart(void* pCookie);

extern void muxError ( void* pCookie, END_ERR* pError );


extern END_OBJ* endFindByName(char* pName, int unit);
extern STATUS muxAddrResFuncDel ( long ifType, long protocol );
extern FUNCPTR muxAddrResFuncGet ( long ifType, long protocol );
extern STATUS muxAddrResFuncAdd ( long ifType, long protocol,
                                  FUNCPTR addrResFunc);

extern BOOL muxDevExists (char* pName, int unit);

extern STATUS muxTaskDelaySet ( int delay );
extern STATUS muxTaskDelayGet ( int* pDelay );
extern STATUS muxTaskPrioritySet ( int priority );
extern STATUS muxTaskPriorityGet ( int* pPriority );




extern STATUS muxPollDevAdd (int, char *);
extern STATUS muxPollDevDel (int, char *);
extern BOOL   muxPollDevStat (int, char *);
extern void   muxPollTask (void);
extern STATUS muxPollStart (int, int, int);
extern STATUS muxPollEnd (void);







# 397 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/muxTkLib.h" 1
 

 

 
# 19 "d:/Tornado2.2/target/h/muxTkLib.h"

 













 

 

 

 

  
extern int muxMaxBinds;

 

 
extern STATUS muxTkLibInit (void);
extern int muxTkDrvCheck (char * pDevName);

extern void *  muxTkBind (char * pName, int unit,
		          BOOL (*stackRcvRtn) (void *, long, M_BLK_ID, void *),
		          STATUS (*stackShutdownRtn) (void *),
		          STATUS (*stackTxRestartRtn) (void *),
		          void (*stackErrorRtn) (void *, END_ERR *),
		          long type, char * pProtoName, void * pNetSvcStruct,
		          void * pNetSvcInfo, void * pNetDrvInfo);


extern STATUS muxTkSend (void * pCookie, M_BLK_ID pNBuff, char *,
                         USHORT, void *);
extern STATUS muxTkPollSend (void * pCookie, M_BLK_ID pNBuff, char *,
                             USHORT, void *);
extern STATUS muxTkPollReceive (void * pCookie, M_BLK_ID pNBuff, void *pSpare);

extern STATUS muxTkPollReceive2 (void *, M_BLK_ID  pNBuff);

extern void * muxTkCookieGet (char *, int);







# 398 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "configNet.h" 1
 

 

 
# 25 "configNet.h"












 


# 55 "configNet.h"


 


# 68 "configNet.h"


 


# 81 "configNet.h"


 


# 94 "configNet.h"


 


# 107 "configNet.h"


 







extern END_OBJ * sysLn97xEndLoad (char *, void *);




 


# 133 "configNet.h"


 


# 146 "configNet.h"


 







 






END_TBL_ENTRY endDevTbl [] =
    {






    {0, sysLn97xEndLoad, "", 1,
    ((void *)0), 0},
































    {0, ((void *)0), ((void *)0), 0, ((void *)0), 0}
    };








# 399 "d:/Tornado2.2/target/config/all/bootConfig.c" 2
# 1 "d:/Tornado2.2/target/h/m2Lib.h" 1
 

 
# 1 "d:/Tornado2.2/target/h/copyright_wrs.h" 1
 

# 5 "d:/Tornado2.2/target/h/m2Lib.h" 2

 
# 25 "d:/Tornado2.2/target/h/m2Lib.h"


# 1119 "d:/Tornado2.2/target/h/m2Lib.h"

# 400 "d:/Tornado2.2/target/config/all/bootConfig.c" 2

extern int 	ipAttach ();
extern END_TBL_ENTRY endDevTbl[];

typedef struct cookie_tbl
    {
    int unitNo;
    char devName[8];
    void* pCookie;
    }COOKIE_TBL;

COOKIE_TBL cookieTbl[32];






void*   pCookie;
M2_INTERFACETBL endM2Tbl;






IP_DRV_CTRL ipDrvCtrl [((sizeof (endDevTbl) / sizeof ((endDevTbl) [0])) - 1)];
int ipMaxUnits = ((sizeof (endDevTbl) / sizeof ((endDevTbl) [0])) - 1);

 



# 1 "d:/Tornado2.2/target/src/config/usrKernel.c" 1
 

 

 
# 20 "d:/Tornado2.2/target/src/config/usrKernel.c"

 











 


BMAP_LIST	readyQBMap;		 



 






void usrKernelInit (void)

    {



    classLibInit ();			 
    taskLibInit ();			 


    taskHookInit ();			 






    semBLibInit ();			 



    semMLibInit ();			 



    semCLibInit ();			 



    eventLibInit ();







    wdLibInit ();			 






    msgQLibInit ();			 











     


    qInit (&readyQHead, qPriBMapClassId, (int)&readyQBMap, 256);  




    qInit (&activeQHead, qFifoClassId); 	 
    qInit (&tickQHead, qPriListClassId); 	 

    workQInit ();			 









    }



# 434 "d:/Tornado2.2/target/config/all/bootConfig.c" 2


 

extern char	edata [];		 
extern char	end [];			 














# 479 "d:/Tornado2.2/target/config/all/bootConfig.c"





 
static STATUS usrNetProtoInit (void);

extern int	lnEbsaattach ();
extern int	oliattach ();
extern int	dcattach ();
extern int	eglattach ();
extern int	eiattach ();
extern int	feiattach ();
extern int	exattach ();
extern int	enpattach ();
extern int	ieattach ();
extern int	ilacattach ();
extern int	lnattach ();
extern int	lnsgiattach ();
extern int	nicattach ();
extern int	nicEvbattach ();
extern int	medattach ();
extern int      elcattach ();
extern int      ultraattach ();
extern int      eexattach ();
extern int      eltattach ();
extern int      eneattach ();
extern int      esmcattach ();
extern int	quattach ();
extern int	loattach ();
extern int	snattach ();
extern int	fnattach ();
extern STATUS	slipInit ();
extern int	ifreset ();
extern void	if_dettach ();
extern u_long	in_netof ();
extern struct ifnet *	ifunit ();
extern int	pcmciaattach ();









static NETIF netIf [] =
    {


















































































































	{ "lo", loattach, 0, 0, 0, 0 },
        { 0, 0, 0, 0, 0, 0 },
    };



 

SYMTAB_ID	sysSymTbl;
int		consoleFd;		 
char		consoleName [20];	 
int		sysStartType;		 

BOOL		scsiInitialized      = 0;
int		bootCmdTaskPriority  = 1;
int		bootCmdTaskOptions   = 0x0001;
int		bootCmdTaskStackSize = 7000;

 



static volatile UINT32	trapValue1	= 0x12348765;
static volatile UINT32	trapValue2	= 0x5a5ac3c3;



 


TCP_CFG_PARAMS tcpCfgParams =    
    {
    (0x00000001),              
    8192,           
    8192,           
    150,          
    3,         
    512,                
    3,           
    14400,         
    8           
    };



UDP_CFG_PARAMS udpCfgParams =    
    {
    (0x00000001 | 0x00000002),
    9216,           
    41600            
    };



ICMP_CFG_PARAMS icmpCfgParams =  
    {
    (0x000000000)              
    };


IP_CFG_PARAMS ipCfgParams =      
    {
    (0x000000001 | 0x000000002 |                                  0x000000008 | 0x000000010),               
    64,                 
    50,                
    60             
    };

 

 



M_CL_CONFIG mClBlkConfig =
    {
     



    200, 	(50 + 50 + 						 10 + 10 + 	                                         20),	((void *)0), 		0
    };

 



CL_DESC clDescTbl [] =
    {
     



    {64,            50,		((void *)0),           0},
    {128,           50,        ((void *)0),           0},
    {256,           10,        ((void *)0),           0},
    {512,           10,        ((void *)0),           0},
    {1024,          20,       ((void *)0),           0},
    };
int clDescTblNumEnt = ((sizeof (clDescTbl) / sizeof ((clDescTbl) [0])));

 





M_CL_CONFIG sysMclBlkConfig = 
    {
     



    (20  + 15 + 					 15 + 10), 	(20  + 15 + 					 15 + 10),	((void *)0), 		0
    };

 





CL_DESC sysClDescTbl [] = 		
    {
     



    {64,		20,		((void *)0),		0},
    {128,		15,	((void *)0),		0},
    {256,		15,	((void *)0),		0},
    {512,		10,	((void *)0),		0},
    }; 
int sysClDescTblNumEnt = ((sizeof (sysClDescTbl) / sizeof ((sysClDescTbl) [0])));


# 838 "d:/Tornado2.2/target/config/all/bootConfig.c"



 



void 		usrRoot (char *pMemPoolStart, unsigned memPoolSize);
void 		usrClock (void);
void		usrKernelInit (void);
static void	bootCmdLoop (void);
static char	autoboot (int timeout);
static void	printBootLogo (void);
static void	bootHelp (void);
static STATUS	bootLoad (char *bootString, FUNCPTR *pEntry);
static void	go (FUNCPTR entry);
static void	m (char *adrs);
static void	d (char *adrs, int nwords);
static void	bootExcHandler (int tid);
static void	skipSpace (char **strptr);
static void	printExcMsg (char *string);
static STATUS	getArg (char **ppString, int *pValue, BOOL defaultHex,
			BOOL optional);
static void	usrBootLineInit (int startType);
static STATUS	usrBootLineCrack (char *bootString, BOOT_PARAMS *pParams);


static STATUS	netLoad (char *hostName, char *fileName, char *usr, 
			 char *passwd, FUNCPTR *pEntry);
static void	netifAdrsPrint (char *ifname);
static STATUS	checkInetAddrField (char *pInetAddr, BOOL subnetMaskOK);
static STATUS	usrNetIfAttach (char *devName, int unitNum, char *inetAdrs);
static STATUS	usrNetIfConfig (char *devName, int unitNum, char *inetAdrs, 
                                char *inetName, int netmask);
static STATUS	usrBpInit (char *devName, int unitNum, u_long startAddr);
static STATUS	usrSlipInit (char *pBootDev, int unitNum, char *localAddr, 
			     char *peerAddr);
static STATUS    usrPPPInit (char *pBootDev, int unitNum, char *localAddr, 
                            char *peerAddr);
static STATUS	bootpGet (char *pNetDev, char *pBootDevAddr, char *pBootFile,
			  char *pHostAddr, int *pMask);















static STATUS    fdLoad (int drive, int type, char *fileName, FUNCPTR *pEntry);







static STATUS	ataLoad (int ctrl, int drive, char *fileName, FUNCPTR *pEntry);

















# 982 "d:/Tornado2.2/target/config/all/bootConfig.c"

 
# 997 "d:/Tornado2.2/target/config/all/bootConfig.c"

void usrInit 
    (
    int startType
    )
    {
     
# 1016 "d:/Tornado2.2/target/config/all/bootConfig.c"

    while (trapValue1 != 0x12348765 || trapValue2 != 0x5a5ac3c3)
	{
	 ;
	}
    









     




    (sysHwInit0());


     


     










    cacheLibInit (0x01, (0x02 | 0x10));






     

    bzero (edata, end - edata);		 

    sysStartType = startType;

    intVecBaseSet ((FUNCPTR *) ((char *) (0x00100000)));	 





    excVecInit ();				 

    sysHwInit ();				 

    usrKernelInit ();				 












     

    kernelInit ((FUNCPTR) usrRoot, 10000,
		(char *) (end),
		sysMemTop (), 1000, 0x0);
    }

 
# 1110 "d:/Tornado2.2/target/config/all/bootConfig.c"

void usrRoot
    (
    char *      pMemPoolStart,           
    unsigned    memPoolSize              
    )

    {
    char tyName [20];
    int ix;



    int count;
    END_TBL_ENTRY* pDevTbl;

     




    memInit (pMemPoolStart, memPoolSize); 

     

    sysClkConnect ((FUNCPTR) usrClock, 0); 
    sysClkRateSet (60); 	   
    sysClkEnable ();			   

     







    selectInit (50);


     

    iosInit (20, 50, "/null");
    consoleFd = (-1);

     


# 1184 "d:/Tornado2.2/target/config/all/bootConfig.c"

    if ((2) > 0)
        {
        ttyDrv();                                

        for (ix = 0; ix < (2); ix++)         
            {




            sprintf (tyName, "%s%d", "/tyCo/", ix);
            (void) ttyDevCreate (tyName, sysSerialChanGet(ix), 512, 512);

            if (ix == 0)               
                {
                strcpy (consoleName, tyName);
                consoleFd = open (consoleName, 2, 0);
                (void) ioctl (consoleFd, 4, 9600);
                (void) ioctl (consoleFd, 3,
			0x01 | 0x02 | 0x04 | 0x08);
                }
            }
        }




    pcConDrv ();
    for (ix = 0; ix < (2); ix++)
        {
        sprintf (tyName, "%s%d", "/pcConsole/", ix);
        (void) pcConDevCreate (tyName,ix, 512, 512);
        if (ix == (0))            
            {
            strcpy (consoleName, tyName);
            consoleFd = open (consoleName, 2, 0);
            (void) ioctl (consoleFd, 4, 9600);
            (void) ioctl (consoleFd, 3,
			0x01 | 0x02 | 0x04 | 0x08);
            }
        }













    ioGlobalStdSet (0,  consoleFd);
    ioGlobalStdSet (1, consoleFd);
    ioGlobalStdSet (2, consoleFd);

    pipeDrv ();					 



    excShowInit ();			 

    excInit ();				 


    excHookAdd ((FUNCPTR) bootExcHandler);	 
    logInit (consoleFd, 5);			 


    hashLibInit ();				 


     











    bootElfInit ();				 












     

    muxMaxBinds = 8;
    if (muxLibInit() == (-1))
	return;                               

     
    for (count = 0, pDevTbl = endDevTbl; pDevTbl->endLoadFunc != ((void *)0);
         pDevTbl++, count++)
        {
        cookieTbl[count].pCookie = muxDevLoad (pDevTbl->unit, pDevTbl->endLoadFunc,
                                       pDevTbl->endLoadString,
                                       pDevTbl->endLoan, pDevTbl->pBSP);
        if (cookieTbl[count].pCookie == ((void *)0))
            {
            printf ("muxLoad failed!\n");
            }

        cookieTbl[count].unitNo=pDevTbl->unit;
	bzero((void *)cookieTbl[count].devName,8);
	pDevTbl->endLoadFunc((char*)cookieTbl[count].devName, ((void *)0));

        }

    
    taskSpawn ("tBoot", bootCmdTaskPriority, bootCmdTaskOptions,
		bootCmdTaskStackSize, (FUNCPTR) bootCmdLoop,
		0,0,0,0,0,0,0,0,0,0);

    }
 
# 1327 "d:/Tornado2.2/target/config/all/bootConfig.c"

void usrClock (void)

    {
    tickAnnounce ();	 
    }
 




static void bootCmdLoop (void)

    {
    BOOT_PARAMS params;
    char line [255];
    char *pLine;
    int nwords;
    int nbytes;
    int value;
    int adr;
    int adr2;
    FUNCPTR entry;
    char key = 0;

     



    (void) ioctl (0, 2, 0  );

    if (sysStartType & 0x02)
	printBootLogo ();

    usrBootLineInit (sysStartType);


     




    printExcMsg (sysExcMsg);
    *sysExcMsg = '\0';		 



     

    bootStringToStruct (((char *) ((0x00100000)+0x1200)), &params);
    sysFlags = params.flags;


# 1393 "d:/Tornado2.2/target/config/all/bootConfig.c"

    if (!(sysStartType & 0x01) &&
	!(sysFlags & 0x04))
	{
	int timeout = 7;

	if ((sysStartType & 0x04) ||
	    (sysFlags & 0x08))
	    {
	    timeout = 1;
	    }

	key = autoboot (timeout);	 
	}


     


     

    (void) ioctl (consoleFd, 3, (0x01 | 0x02 | 0x04 | 			 0x10 | 0x08 | 0x20 | 0x40));

     

    printf ("\n");

    for (;;)
	{
	if (key == '@')
	    {
	    line [0] = key;
	    line [1] = '\0';
	    key = 0;
	    }
	else
	    {
	    printf ("[VxWorks Boot]: ");
	    fioRdString (0, line, sizeof (line));
	    }

	adr = adr2 = 0;
	nwords = 0;

	 

	pLine = line + strlen (line) - 1;		 
	while ((pLine >= line) && (*pLine == ' '))
	    {
	    *pLine = '\0';
	    pLine--;
	    }

	pLine = line;
	skipSpace (&pLine);

	switch (*(pLine++))
	    {
	    case '\0':		 
		break;

	    case 'd':		 
		if ((getArg (&pLine, &adr, 1, 1) == 0) &&
		    (getArg (&pLine, &nwords, 0, 1) == 0))
		    d ((char *) adr, nwords);
		break;

	    case 'e':		 
		printExcMsg (sysExcMsg + 1);
		break;

	    case 'f':		 
		if ((getArg (&pLine, &adr, 1, !1) == 0) &&
		    (getArg (&pLine, &nbytes, 0, !1) == 0) &&
		    (getArg (&pLine, &value, 0, !1) == 0))
		    {
		    bfillBytes ((char *) adr, nbytes, value);
		    }

		break;

	    case 't':		 
		if ((getArg (&pLine, &adr, 1, !1) == 0) &&
		    (getArg (&pLine, &adr2, 1, !1) == 0) &&
		    (getArg (&pLine, &nbytes, 1, !1) == 0))
		    {
		    bcopy ((char *) adr, (char *) adr2, nbytes);
		    }
		break;

	    case 'm':		 
		if (getArg (&pLine, &adr, 1, !1) == 0)
		    m ((char *) adr);
		break;


# 1511 "d:/Tornado2.2/target/config/all/bootConfig.c"


# 1529 "d:/Tornado2.2/target/config/all/bootConfig.c"

	    case 'p':		 
		bootParamsShow (((char *) ((0x00100000)+0x1200)));
		break;

	    case 'c':		 
		bootParamsPrompt (((char *) ((0x00100000)+0x1200)));
                if (strlen(((char *) ((0x00100000)+0x1200))) <= 255)
                    {
                    if ((sysNvRamSet (((char *) ((0x00100000)+0x1200)),
                        strlen (((char *) ((0x00100000)+0x1200))) + 1, 0)) == (-1))
                        printf("\nNOTE: Bootline not saved to NVRAM\n");
                    }
                else
                    printf("\nWARNING:Bootline longer than BOOT_LINE_SIZE (%d bytes). Not saved to NVRAM\n", (int) 255);

                break;

	    case 'g':		 
		if (getArg (&pLine, (int *) &entry, 1, !1) == 0)
		    go (entry);
		break;


	    case 'n':
		netifAdrsPrint (pLine);
		break;








	    case '?':			 
            case 'h':			 
		bootHelp ();
		break;

            case '@':			 
	    case '$':			 

		if (bootLoad (pLine, &entry) == 0)
		    {
		    go (entry);
		    }
		else
		    {
		    taskDelay (sysClkRateGet ());	 
		    reboot (0x01);		 
		    }
		break;

	    case 'l':			 

		if (bootLoad (pLine, &entry) == 0)
		    {
		    printf ("entry = 0x%x\n", (int) entry);
		    }
		else
		    {
		    taskDelay (sysClkRateGet ());	 
		    reboot (0x01);		 
		    }
		break;

            case 'v':                    

                printBootLogo ();
                break;

	    default:
		printf ("Unrecognized command. Type '?' for help.\n");
		break;

            }  
        }  
    }
 






static char autoboot 
    (
    int timeout		 
    )
    {
    ULONG	autoBootTime;
    int		timeLeft;
    UINT	timeMarker;
    int		bytesRead = 0;
    FUNCPTR	entry;
    char	key;

    if (timeout > 0)
	{
	printf ("\nPress any key to stop auto-boot...\n");

	 

	autoBootTime = tickGet () + sysClkRateGet () * timeout;
	timeMarker = tickGet () + sysClkRateGet ();
	timeLeft = timeout;

	printf ("%2d\r", timeLeft);

	 while ((tickGet () < autoBootTime) && (bytesRead == 0))
	    {
	    (void) ioctl (consoleFd, 1, (int) &bytesRead);

	    if (tickGet () == timeMarker)
		{
		timeMarker = tickGet () + sysClkRateGet ();
		printf ("%2d\r", --timeLeft);
		}
	    }
	}

    if (bytesRead == 0)     
	{
	 


	(void) ioctl (consoleFd, 3, (0x01 | 0x02 | 0x04 | 			 0x10 | 0x08 | 0x20 | 0x40));

	printf ("\nauto-booting...\n\n");

	if (bootLoad (((char *) ((0x00100000)+0x1200)), &entry) == 0)
	    go (entry);				 
	else
	    {
	    printf ("Can't load boot file!!\n");
	    taskDelay (sysClkRateGet ());	 
	    reboot (0x01);		 
	    }
	}
    else
	{
	 

	read (consoleFd, &key, 1);
	return (key & 0x7f);		 
	}

    return ((-1));			 
    }
 




static void printBootLogo (void)

    {
    printf ("\n\n\n\n\n\n\n\n\n\n\n");
    printf ("%28s%s", "","VxWorks System Boot");
    printf ("\n\n\nCopyright 1984-2002  Wind River Systems, Inc.\n\n\n\n\n\n");
    printf ("CPU: %s\n", sysModel ());
    printf ("Version: %s\n", vxWorksVersion);
    printf ("BSP version: " "1.2" "/2" "\n");
    printf ("Creation date: %s\n\n", creationDate);
    }

 




static void bootHelp (void)

    {
    static char *helpMsg[] =
	{
	"?",                      "- print this list",
	"@",                      "- boot (load and go)",
	"p",                      "- print boot params",
	"c",                      "- change boot params",
	"l",                      "- load boot file",
	"g adrs",                 "- go to adrs",
	"d adrs[,n]",             "- display memory",
	"m adrs",                 "- modify memory",
	"f adrs, nbytes, value",  "- fill memory",
	"t adrs, adrs, nbytes",   "- copy memory",
	"e",                      "- print fatal exception",
        "v",                      "- print boot logo with version",

	"n netif",	  	  "- print network interface device address",








	"$dev(0,procnum)host:/file h=# e=# b=# g=# u=usr [pw=passwd] f=#", "",
	"                          tn=targetname s=script o=other", "",






	"boot device: fd=drive,fdType          file name: /fd0/vxWorks","",







	"boot device: ata=ctrl,drive           file name: /ata0/vxWorks","",














	"Boot flags:",		  "",




	"  0x02  - load local system symbols",		"",
	"  0x04  - don't autoboot",			"",
	"  0x08  - quick autoboot (no countdown)",	"",

	"  0x20  - disable login security",		"",



	"  0x40  - use bootp to get boot parameters",	"",

	"  0x80  - use tftp to get boot image",		"",
	"  0x100 - use proxy arp",			"",

	((void *)0)
	};

    register char **pMsg;

    register NETIF *pNif;



    int count;
    char       muxDevName[8];
    END_TBL_ENTRY* pDevTbl;


    printf ("\n");

    for (pMsg = helpMsg; *pMsg != ((void *)0); pMsg += 2)
	printf (" %-21s %s\n", *pMsg, *(pMsg + 1));



    printf ("\navailable boot devices:");


    printf ("Enhanced Network Devices\n");
    for (count = 0, pDevTbl = endDevTbl; pDevTbl->endLoadFunc != ((void *)0);
         pDevTbl++, count++)
        {
        if (!pDevTbl->processed)
            {
            muxDevName [0] = '\0';
            pDevTbl->endLoadFunc (muxDevName, ((void *)0));
            printf (" %s%d", muxDevName, pDevTbl->unit);
            }
        }

    
    for (pNif = netIf; pNif->ifName != 0; pNif++)
	{
	if (strncmp (pNif->ifName, "lo", 2) != 0)
	    printf (" %s", pNif->ifName);
	}









    printf (" fd");







    printf (" ata");










    printf ("\n");
    }

 






static STATUS bootLoad 
    (
    char *   bootString,
    FUNCPTR *pEntry
    )
    {
    BOOT_PARAMS		params;








    char		nad [20];	 
    int			netmask = 0;	 
    int 		result; 	 
    unsigned long 	leaseLen; 	 




    char		buf [30];	 
    char 		netDev [40 + 1];
    char 		bootDev [40];
    BOOL		backplaneBoot;
    char *		pBootAddr;
    BOOL 		attached = 0;  
    char                icmpPeer [30];
    extern int          netTaskPriority;
    int                 oldTaskPriority;


    char		muxDevName[8];




     

    if ((bootString != ((void *)0)) && (*bootString != '\0'))
	strcpy (((char *) ((0x00100000)+0x1200)), bootString);

     

    if (usrBootLineCrack (((char *) ((0x00100000)+0x1200)), &params) != 0)
	return ((-1));

     

    bootParamsShow (((char *) ((0x00100000)+0x1200)));

     

    sysFlags = params.flags;
    sysProcNumSet (params.procNum);


# 1981 "d:/Tornado2.2/target/config/all/bootConfig.c"



    if (strncmp (params.bootDev, "fd", 2) == 0)
	{
	int type = 0;
	int drive = 0;

	if (strlen (params.bootDev) == 2)
	    return ((-1));
	else
	    sscanf (params.bootDev, "%*2s%*c%d%*c%d", &drive, &type);

	if (fdLoad (drive, type, params.bootFile, pEntry) != 0)
	    {
	    printErr ("\nError loading file: errno = 0x%x.\n", (*__errno()));
	    return ((-1));
	    }

	return (0);
	}




# 2027 "d:/Tornado2.2/target/config/all/bootConfig.c"



    if (strncmp (params.bootDev, "ata", 3) == 0)
	{
	int ctrl  = 0;
	int drive = 0;

	if (strlen (params.bootDev) == 3)
	    return ((-1));
	else
	    sscanf (params.bootDev, "%*3s%*c%d%*c%d", &ctrl, &drive);

	if (ataLoad (ctrl, drive, params.bootFile, pEntry) != 0)
	    {
	    printErr ("\nError loading file: errno = 0x%x.\n", (*__errno()));
	    return ((-1));
	    }

	return (0);
	}




# 2074 "d:/Tornado2.2/target/config/all/bootConfig.c"


# 2099 "d:/Tornado2.2/target/config/all/bootConfig.c"


# 2114 "d:/Tornado2.2/target/config/all/bootConfig.c"









     

     

    if (sockLibInit (50) == (-1))
        return ((-1));


     

    if (sockLibAdd ((FUNCPTR) bsdSockLibInit, 100, 2) == (-1))
        return ((-1));
    if (sockLibAdd ((FUNCPTR) bsdSockLibInit, 17, 17) == (-1))
        return ((-1));


     


    if (sockLibAdd ((FUNCPTR) bsdSockLibInit, 2, 2) == (-1))
        return ((-1));

 
    hostTblInit ();		 
    usrNetProtoInit ();          
    netLibInit ();







     

    if (strncmp (params.bootDev, "ppp", 3) == 0)
        {
         

        if (usrPPPInit (params.bootDev, params.unitNum, params.ead, 
                        ((params.gad[0] == '\0')? params.had : params.gad)) 
                        == (-1))
            return ((-1));
        }
    else if (strncmp (params.bootDev, "sl", 2) == 0)
        {
        if (usrSlipInit (params.bootDev, params.unitNum, params.ead, 
	                 ((params.gad[0] == '\0')? params.had : params.gad)) 
			 == (-1))
	    return ((-1));
        }
    else
	{
        strncpy (bootDev, params.bootDev, sizeof (bootDev));

	if ((strncmp (params.bootDev, "bp", 2) != 0) &&
            (strncmp (params.bootDev, "sm", 2) != 0))
	    {
	    pBootAddr = params.ead;
	    backplaneBoot = 0;
	    }
        else
	    {
	    if (sysProcNumGet () == 0)
		{
                printf (
                  "Error: processor number must be non-zero to boot from bp\n");
	        return ((-1));
                }

	    if (usrBpInit (bootDev, params.unitNum, 0) == (-1))
		return ((-1));

	    pBootAddr = params.bad;
	    backplaneBoot = 1;
	    }

         

        result = bootLeaseExtract (pBootAddr, &leaseLen, ((void *)0));
        if (result < 0)
            {
            printf ("Error reading target address information.\n");
            return ((-1));
            }

         

        if (result == 2)
            {
             




            if (leaseLen != (ULONG)~0)
                {
                 

                if (sysFlags & 0x40)
                    *pBootAddr = '\0';     
                else
                    {
                     








                    result = 0;     
                    }
                }
            }


# 2261 "d:/Tornado2.2/target/config/all/bootConfig.c"

        netmask = 0;
        bootNetmaskExtract (pBootAddr, &netmask);

	 



	 

        pCookie=findCookie(params.unitNum, bootDev);
	if (!attached && (pCookie != ((void *)0)))
	    {
            if (muxDevStart (pCookie) != 0)
                {
                printf("Failed to start device %s\n", bootDev);
                return ((-1));
                }






	     

	    muxAddrResFuncAdd (6, 0x800, ipEtherResolvRtn);

	    if (ipAttach (params.unitNum, bootDev) != 0)
		{
		printf ("Failed to attach TCP/IP to device %s", muxDevName);
		return ((-1));
		}

	    printf ("Attached TCP/IP interface to %s%d.\n", bootDev,
		     params.unitNum);

	    attached = 1;
	    }



# 2317 "d:/Tornado2.2/target/config/all/bootConfig.c"

	if (!attached)
	    return (-1);	 

         






        sprintf (netDev, "%s%d", bootDev, params.unitNum);

        if ( (sysFlags & 0x40) || (sysFlags & 0x100) ||
            (netmask == 0))
            {
            struct ifnet *	pIf;
                
             
                
            if ( (pIf = ifunit (netDev)) == ((void *)0)) 
                {
                printf ("invalid device \"%s\"\n", netDev);
                return ((-1));			 
                }
                
            if (pIf->if_init != ((void *)0))
                {
                if ( (*pIf->if_init) (pIf->if_unit) != 0)
                    {
                    printf ("initialization failed for device \"%s\"\n",netDev);
                    return ((-1));
                    }
                }
            }


# 2377 "d:/Tornado2.2/target/config/all/bootConfig.c"

        if (sysFlags & 0x100)
            {

# 2390 "d:/Tornado2.2/target/config/all/bootConfig.c"
            printf ("proxy client requested but not included.\n");
            return ((-1));

            }

         

        if (sysFlags & 0x40)
            {
            if (bootpGet (netDev, pBootAddr, params.bootFile, params.had,
                          &netmask) == (-1))
                return ((-1));





            }

         

        if (usrNetIfConfig (bootDev, params.unitNum, pBootAddr, 
                            (char *) ((void *)0), netmask) != 0)
            return ((-1));

        if (netmask == 0)
            {
	    if (params.gad [0] == '\0')
                strcpy (icmpPeer, params.had);
            else
	        strcpy (icmpPeer, params.gad);

            (void) icmpMaskGet (netDev, pBootAddr, backplaneBoot ?
                                ((void *)0) : icmpPeer, &netmask);

            if (netmask != 0)
                {
                sprintf (bootDev, "%s%d", bootDev, params.unitNum);
                ifMaskSet (bootDev, netmask);
		printf ("Obtained subnet mask 0x%x from %s.\n", netmask,
			icmpPeer);
                }
	    else
	        printf ("Warning: no netmask specified.\n");
            }

 	 


# 2458 "d:/Tornado2.2/target/config/all/bootConfig.c"

        if (netmask != 0)		 
            {
            sprintf (buf, ":%x", netmask);
            strcat  (pBootAddr, buf);
            }

         





        if (!(sysFlags & 0x40) && result == 1)
            {
             





            if (netmask == 0) 	 
                sprintf (buf, "::%lx", leaseLen);
            else 		 
                sprintf(buf, ":%lx", leaseLen);

            strcat (pBootAddr, buf);
            }


# 2510 "d:/Tornado2.2/target/config/all/bootConfig.c"

        bootStructToString (((char *) ((0x00100000)+0x1200)), &params);
        }

    usrNetIfAttach ("lo", 0, "127.0.0.1");
    usrNetIfConfig ("lo", 0, "127.0.0.1", "localhost", 0);

     



    if (params.gad[0] != '\0')
        {
	inet_netof_string (params.had, nad);
	routeAdd (nad, params.gad);
        }

     

    hostAdd (params.hostName, params.had);

     

    taskPriorityGet (0, &oldTaskPriority);
    taskPrioritySet (0, netTaskPriority + 1);

    if (netLoad (params.had, params.bootFile, params.usr,
		 params.passwd, pEntry) != 0)
	{
	printf ("\nError loading file: errno = 0x%x.\n", (*__errno()));
        taskPrioritySet (0, oldTaskPriority);
	return ((-1));
	}

    taskPrioritySet (0, oldTaskPriority);

    return (0);
    }


 
# 2560 "d:/Tornado2.2/target/config/all/bootConfig.c"

static void* findCookie
    (
    int unitNo,
    char* devName
    )
    {
    int count;
    for(count=0;count<32;count++)
	{
	if((cookieTbl[count].unitNo==unitNo) && 
	    ((strcmp(cookieTbl[count].devName, devName) == 0 ? 1 : 0)))
        return(cookieTbl[count].pCookie);
	}
    return (((void *)0));
    }


 
# 2590 "d:/Tornado2.2/target/config/all/bootConfig.c"

static STATUS netLoad 
    (
    char *hostName,
    char *fileName,
    char *usr,
    char *passwd,
    FUNCPTR *pEntry
    )
    {
    int fd;
    int errFd;		 
    char command [160 + 20];
    BOOL bootFtp = (passwd[0] != '\0');
    BOOL bootRsh = 0;

    printf ("Loading... ");


    if (sysFlags & 0x80)		 
        {
	if (tftpXfer (hostName, 0, fileName, "get", "binary", &fd,
		      &errFd) == (-1))
	    return ((-1));
	}

   else

       {
	if (bootFtp)
	    {

	    if (ftpXfer (hostName, usr, passwd, "", "RETR %s", "", fileName,
		         &errFd, &fd) == (-1))
		return ((-1));
	    }
	else
	    {
	    bootRsh = 1;
	    sprintf (command, "cat %s", fileName);

	    fd = rcmd (hostName, 514, usr, usr, command, &errFd);
	    if (fd == (-1))
		return ((-1));
	    }
	}

    if (bootLoadModule (fd, pEntry) != 0)
	goto readErr;


     





    if (sysFlags & 0x80)  
	{

	 




        while ((iosFdValue(fd) != (-1))
	       && (read (fd, command, sizeof (command)) > 0));
        return (0);
	}



    if (bootRsh == 0)
	{

	 

	while ((read (fd, command, sizeof (command))) > 0);

         

        close (fd);

	if (bootFtp)
	    (void) ftpCommand (errFd, "QUIT",0,0,0,0,0,0);
	}
    else 
        close (fd);

    close (errFd);
    return (0);

readErr:
     

    if (bootRsh == 0)
	{

	 

	while ((read (fd, command, sizeof (command))) > 0);

         

        close (fd);

	if (bootFtp)
	    {
	    (void) ftpReplyGet (errFd, 0);  
	    (void) ftpCommand (errFd, "QUIT",0,0,0,0,0,0);
	    }
	}
    else
	{
	char buf [160 + 20];
	int errBytesRecv = fioRead (errFd, buf, sizeof (buf));

	if (errBytesRecv > 0)
	    {
	     

	    buf [errBytesRecv] = '\0';
	    printf ("\n%s:%s: %s\n", hostName, fileName, buf);
	    }

        close (fd);

	}

    close (errFd);

    return ((-1));
    }









 
# 2744 "d:/Tornado2.2/target/config/all/bootConfig.c"

void devSplit 
    (
    register char *fullFileName,	 
    register char *devName		 
    )
    {
    register int nChars = 0;

    if (fullFileName != ((void *)0))
	{
	char *p0 = fullFileName;
	char *p1 = devName;

	while ((nChars < 2) && (*p0 != '\0'))
	    {
	    if (*p0 == '/')
		nChars++;

	    *p1++ = *p0++;
	    }
	*p1 = '\0';
	}
    else
	{
	(void) strcpy (devName, "");
	}
    }




# 3010 "d:/Tornado2.2/target/config/all/bootConfig.c"



# 1 "d:/Tornado2.2/target/src/config/usrFd.c" 1
 

 

 
# 19 "d:/Tornado2.2/target/src/config/usrFd.c"

 










# 1 "d:/Tornado2.2/target/h/dcacheCbio.h" 1
 

 

 
# 16 "d:/Tornado2.2/target/h/dcacheCbio.h"








 


 
extern int dcacheUpdTaskId ;		 
extern int dcacheUpdTaskPriority ;	 
extern int dcacheUpdTaskStack ;		 

 

extern CBIO_DEV_ID dcacheDevCreate (
    CBIO_DEV_ID subDev,	   
    char  *   pRamAddr,     
    int       memSize,	   
    char *    pDesc  
    ) ;

extern STATUS dcacheDevTune (
    CBIO_DEV_ID dev,		 
    int		dirtyMax,	 
    int		bypassCount,	 
    int		readAhead,	 
    int		syncInterval	 
    ) ;

extern void dcacheShow (
    CBIO_DEV_ID dev,	 
    int verbose		 
    ) ;

extern STATUS dcacheDevMemResize
    (
    CBIO_DEV_ID dev,		 
    size_t	newSize		 
    ) ;

extern STATUS dcacheDevEnable
    (
    CBIO_DEV_ID dev   
    );

extern STATUS dcacheDevDisable
    (
    CBIO_DEV_ID dev    
    );







# 32 "d:/Tornado2.2/target/src/config/usrFd.c" 2


 

 





 
# 67 "d:/Tornado2.2/target/src/config/usrFd.c"

STATUS usrFdConfig
    (
    int     drive,	 
    int     type,	 
    char *  fileName	 
    )
    {
    BLK_DEV *pBootDev;
    CBIO_DEV_ID cbio ;
    char bootDir [160];

    if( type == (-1))
	return 0;

    if ((UINT)drive >= 4)
	{
	printErr ("drive is out of range (0-%d).\n", 4 - 1);
	return ((-1));
	}

     

    if ((pBootDev = fdDevCreate (drive, type, 0, 0)) == ((void *)0))
	{
        printErr ("fdDevCreate failed.\n");
        return ((-1));
	}

     
    cbio = dcacheDevCreate( (CBIO_DEV_ID) pBootDev, ((void *)0), 
                           0x0, bootDir );

    if( cbio == ((void *)0) )
	{
	 
	cbio = cbioWrapBlkDev (pBootDev);
	}

     

    devSplit (fileName, bootDir);

     

    if (dosFsDevCreate (bootDir, cbio, 20, (-1)) == (-1))
	{
        printErr ("dosFsDevCreate failed.\n");
        return ((-1));
	}

    return (0);
    }


# 3014 "d:/Tornado2.2/target/config/all/bootConfig.c" 2

 






static STATUS fdLoad 
    (
    int     drive,
    int     type,
    char    *fileName,
    FUNCPTR *pEntry
    )
    {
    int fd;

    if (fdDrv (((0x20 + 0x06)), 0x06) != 0)
	{
	printErr ("Could not initialize.\n");
	return ((-1));
	}

    printf ("Attaching to floppy disk device... ");

    dosFsInit (20);         

    if (usrFdConfig (drive, type, fileName) == (-1))
	{
        printErr ("usrFdConfig failed.\n");
        return ((-1));
	}

    printErr ("done.\n");

     

    printErr ("Loading %s... ", fileName);

    if ((fd = open (fileName, 0, 0)) == (-1))
	{
        printErr ("\nCannot open \"%s\".\n", fileName);
        return ((-1));
	}

    if (bootLoadModule (fd, pEntry) != 0)
        goto fdLoadErr;

    close (fd);
    return (0);

fdLoadErr:

    close (fd);
    return ((-1));
    }




# 3137 "d:/Tornado2.2/target/config/all/bootConfig.c"




# 1 "d:/Tornado2.2/target/src/config/usrAta.c" 1
 

 

 
# 24 "d:/Tornado2.2/target/src/config/usrAta.c"

 
# 36 "d:/Tornado2.2/target/src/config/usrAta.c"













 

 





 
# 88 "d:/Tornado2.2/target/src/config/usrAta.c"

STATUS usrAtaConfig
    (
    int     ctrl,	  
    int     drive,	  
    char    *devNames     
    )
    {
    BLK_DEV *pBlkDev;
    CBIO_DEV_ID cbio, masterCbio;
    STATUS  stat = 0;
    char    *tmp; 
    char    *devNamesCopy;
    char    *freePtr;
    char    *sysType;
    char    *devName[24];
    int     pn; 
    int     numPart = 0;

     

    if( ((void *)0) == devNames || '\0' == *devNames )
        {
	printErr ("usrAtaConfig: Invalid device name.\n");

	return ((-1));
        }

    if (2 <= (UINT) drive)
	{
	printErr ("usrAtaConfig: drive is out of range (0-%d).\n", 
                  2 - 1);

	return ((-1));
	}

    if (2 <= (UINT) ctrl)
        {
        printErr ("usrAtaConfig: controller is out of range (0-%d).\n",
                  2 - 1);

        return ((-1));
        }

     




    devNamesCopy = malloc (1 + (int) (strlen (devNames)));   

     

    if (((void *)0) == devNamesCopy)       
        {
	printErr ("usrAtaConfig: malloc returned NULL\n");

        return ((-1)); 
        }

     
   
    freePtr = devNamesCopy;

     

    strcpy (devNamesCopy, devNames); 
    
     

    sysType = index (devNamesCopy, '(');

    if (sysType != ((void *)0))
        {
        *sysType = '\0';
        sysType++;
        tmp = index( sysType, ')' );

        if (tmp != ((void *)0))
            {
            *tmp = '\0';
            }
	}
    else
        {
        sysType = "dos";
        }

     

    for (numPart = 0; numPart < 24; numPart++)
	{

	if ('\0' == *devNamesCopy)
	    break;

	tmp = devNamesCopy ;
	devName[numPart] = devNamesCopy ;
	tmp = index (tmp, ',');

	if (((void *)0) == tmp)
	    {
	    numPart++;

	    break;
	    }

	*tmp = '\0' ;
	devNamesCopy = tmp+1;
	}

     

    if ((pBlkDev = ataDevCreate (ctrl, drive, 0, 0)) == (BLK_DEV *) ((void *)0))
        {
        printErr ("Error during ataDevCreate: %x\n", (*__errno()));
        free (freePtr);

        return ((-1));
        }

    if (strcmp (sysType, "dos") == 0)
        {

         

        cbio = dcacheDevCreate ((CBIO_DEV_ID) pBlkDev, ((void *)0), 0x0, freePtr);

        if (((void *)0) == cbio)
            {
             

            printErr ("WARNING: Failed to create %d bytes of disk cache"
                      " ATA disk %s configured without cache\n",
                      0x0, devNames);
            cbio = cbioWrapBlkDev (pBlkDev);
            }

         

        masterCbio = dpartDevCreate (cbio, numPart, usrFdiskPartRead);

        if (((void *)0) == masterCbio)
            {
            printErr ("Error creating partition manager: %x\n", (*__errno()));
            free (freePtr);

            return ((-1));
            }

         

        for (pn = 0; pn < numPart; pn ++)
            {
            stat = dosFsDevCreate (devName[pn], dpartPartGet (masterCbio, pn),
                                   20, (-1));

            if (stat == (-1))
                {
                printErr ("Error creating dosFs device %s, errno=%x\n",
                          devName[pn], (*__errno()));
                free (freePtr);

                return ((-1));
                }
            }
        }

# 271 "d:/Tornado2.2/target/src/config/usrAta.c"

    else
        {
        printErr ("Unknown or un-included filesystem type: \"%s\"\n", sysType);
        free (freePtr);

        return ((-1));
        }

    free (freePtr);

    return (0);
    }

 






void usrAtaInit (void)
    {
    int ix;
    ATA_RESOURCE *pAtaResource;

    for (ix = 0; ix < 2; ix++)
        {
        pAtaResource = &ataResources[ix];

        if (pAtaResource->ctrlType == 0)

            if ((ataDrv (ix, pAtaResource->drives, pAtaResource->intVector,
                   pAtaResource->intLevel, pAtaResource->configType,
                   pAtaResource->semTimeout, pAtaResource->wdgTimeout))
               == (-1))
                {
                printf ("ataDrv returned ERROR from usrRoot.\n");
                }
        }
    }


# 3142 "d:/Tornado2.2/target/config/all/bootConfig.c" 2

 






static STATUS ataLoad 
    (
    int     ctrl,
    int     drive,
    char    *fileName,
    FUNCPTR *pEntry
    )
    {
    extern ATA_RESOURCE ataResources[];
    ATA_RESOURCE *pAtaResource	= &ataResources[ctrl];
    int fd;
    char tmp[160];

    if (ataDrv (ctrl, pAtaResource->drives, pAtaResource->intVector,
		pAtaResource->intLevel, pAtaResource->configType,
		pAtaResource->semTimeout, pAtaResource->wdgTimeout) == (-1))
	{
	printErr ("Could not initialize.\n");
	return ((-1));
	}

    printf ("Attaching to ATA disk device... ");

    dosFsInit (20);         

    devSplit (fileName, tmp);

    if (usrAtaConfig (ctrl, drive, tmp) == (-1))
	{
        printErr ("usrAtaConfig failed.\n");
        return ((-1));
	}

    printErr ("done.\n");

     

    printErr ("Loading %s... ", fileName);

    if ((fd = open (fileName, 0, 0)) == (-1))
	{
        printErr ("\nCannot open \"%s\".\n", fileName);
        return ((-1));
	}

    if (bootLoadModule (fd, pEntry) != 0)
        goto ataLoadErr;

    close (fd);
    return (0);

ataLoadErr:

    close (fd);
    return ((-1));
    }




# 3262 "d:/Tornado2.2/target/config/all/bootConfig.c"


# 3329 "d:/Tornado2.2/target/config/all/bootConfig.c"


# 3427 "d:/Tornado2.2/target/config/all/bootConfig.c"



 




static void netifAdrsPrint 
    (
    char *ifname		 
    )
    {
    extern struct ifnet *ifunit ();
    struct ifnet *ifp;
    char *buf;
    char  devName [10];
    int i, value;

    if (ifname == ((void *)0) || *ifname == '\0')
	{
	printf ("Interface not specified\n");
	return;
	}

    while (*ifname == ' ')
	ifname++;        

    if (*ifname == '\0')
	{
	printf ("Interface not specified\n");
	return;
	}

     
    i = 0;
    while (!(__ctype[(int)ifname[i]] & (0x4)) && !(__ctype[(int)ifname[i]] & (0x8 | 0x20)) && ifname[i] != '\0')
       i++;

    if (ifname[i] == '\0')           
       value = 0;
 
    buf = &ifname[i];
    if (bootScanNum (&buf, &value, 0) != 0)   
       value = 0;

    ifname[i] = '\0';
    sprintf (devName, "%s%d", ifname, value);

    if (strncmp (devName, "bp", 2) == 0)
	{
	 

	printf ("Address for device \"%s\" == 00:00:00:00:00:%02x\n",
		devName,  sysProcNumGet ());
	return;
	}

     

    hostTblInit ();		 
    netLibInit ();

    if ((ifp = ifunit (devName)) == ((void *)0))
	{
	if ((usrNetIfAttach (ifname, value, "0") != 0) ||
	    (usrNetIfConfig (ifname, value, "0", (char *) ((void *)0), 0) != 0))
	    {
	    printf ("Cannot initialize interface named \"%s\"\n", devName);
	    return;
	    }

	if ((ifp = ifunit (devName)) == ((void *)0))
	    {
	    printf ("Device named \"%s\" doesn't exist.\n", devName);
	    return;
	    }
	}

    if (!(ifp->if_flags & 0x10) &&
	!(ifp->if_flags & 0x8))
	{
        printf ("Address for device \"%s\" == %02x:%02x:%02x:%02x:%02x:%02x\n",
		devName,
		((struct arpcom *)ifp)->ac_enaddr [0],
		((struct arpcom *)ifp)->ac_enaddr [1],
		((struct arpcom *)ifp)->ac_enaddr [2],
		((struct arpcom *)ifp)->ac_enaddr [3],
		((struct arpcom *)ifp)->ac_enaddr [4],
		((struct arpcom *)ifp)->ac_enaddr [5]);
	}

    if_dettach (ifunit (devName));	 
    }



 




static void go 
    (
    FUNCPTR entry
    )
    {
    printf ("Starting at 0x%x...\n\n", (int) entry);

    taskDelay (sysClkRateGet ());	 


    ifreset ();				 

   
     

    (void) muxDevStopAll (0);      








    cacheClear (DATA_CACHE, ((void *)0), (2147483647L * 2UL + 1));	 




    sysClkDisable ();			 
    sysIntLock ();			 

# 3574 "d:/Tornado2.2/target/config/all/bootConfig.c"


     



    intLock(); 

    (entry) ();		 
    }

 
# 3602 "d:/Tornado2.2/target/config/all/bootConfig.c"

static void m 
    (
    char *adrs		 
    )
    {
    char line [160 + 1];	 
    char *pLine;		 
    int value;			 
    char excess;

     

    for (adrs = (char *) ((int) adrs & 0xfffffffe);	 
         ;						 
	 adrs = (char *) (((short *) adrs) + 1))	 
	{
	 

	printf ("%06x:  %04x-", (int) adrs, (*(short *)adrs) & 0x0000ffff);

	 




	if (fioRdString (0, line, 160) == (-1))
	    break;

	line [160] = '\0';	 

	 

	for (pLine = line; (__ctype[(UINT) * pLine] & (0x8 | 0x20)); ++pLine)
	    ;

	if (*pLine == '\0')			 
	    continue;

	if (sscanf (pLine, "%x%1s", &value, &excess) != 1)
	    break;				 

	* (short *) adrs = value;		 
	}

    printf ("\n");
    }
 
# 3658 "d:/Tornado2.2/target/config/all/bootConfig.c"

static void d 
    (
    register char *adrs,	 
    int	       nwords	 
    )			 
    {
    static char *last_adrs;
    static int dNbytes = 128;
    char ascii [17];
    register int nbytes;
    register int byte;

    ascii [16] = '\0';			 

    nbytes = 2 * nwords;

    if (nbytes == 0)
	nbytes = dNbytes;	 
    else
	dNbytes = nbytes;	 

    if (adrs == 0)
	adrs = last_adrs;	 

    adrs = (char *) ((int) adrs & ~1);	 


     

    bfill ((char *) ascii, 16, '.');

    printf ("%06x:  ", (int) adrs & ~0xf);

    for (byte = 0; byte < ((int) adrs & 0xf); byte++)
	{
	printf ("  ");
	if (byte & 1)
	    printf (" ");	 
	if (byte == 7)
	    printf (" ");	 

	ascii [byte] = ' ';
	}


     

    while (nbytes-- > 0)
	{
	if (byte == 16)
	    {
	     


	    printf ("  *%16s*\n%06x:  ", ascii, (int) adrs);

	    bfill ((char *) ascii, 16, '.');	 
	    byte = 0;				 
	    }





     
    if ( (long)adrs & 1)
        {
        printf ("%02x", *((char *)((long)adrs & 0xfffffffe)) & 0x000000ff);
        }
    else
        {
        printf ("%02x", *((char *)((long)adrs + 1)) & 0x000000ff);
        }


	if (byte & 1)
	    printf (" ");	 
	if (byte == 7)
	    printf (" ");	 

	if (* adrs == ' ' ||
			(((unsigned) ((UINT) * adrs) <= 0177) && (__ctype[(UINT) * adrs] & (0x10 | 0x1 | 0x2 | 				       0x8 | 0x4))))
	    ascii [byte] = (UINT) * adrs;

	adrs++;
	byte++;
	}


     

    for (; byte < 16; byte++)
	{
	printf ("  ");
	if (byte & 1)
	    printf (" ");	 
	if (byte == 7)
	    printf (" ");	 

	ascii [byte] = ' ';
	}

    printf ("  *%16s*\n", ascii);	 

    last_adrs = adrs;
    }
 




static void bootExcHandler 
    (
    int tid		 
    )
    {
    REG_SET regSet;        

     

    if (taskRegsGet (tid, &regSet) != (-1))
        {
        trcStack (&regSet, (FUNCPTR) ((void *)0), tid);
        taskRegsShow (tid);
        }
    else
        printf ("bootExcHandler: exception caught but no valid task.\n");

    taskDelay (sysClkRateGet ());        

    reboot (0x01);
    }
 







static void skipSpace 
    (
    register char **strptr	 
    )
    {
    while ((__ctype[(UINT) ** strptr] & (0x8 | 0x20)))
	++ * strptr;
    }
 






static void printExcMsg 
    (
    char *string
    )
    {
    printf ("\n");

    while (((unsigned) ((UINT) * string) <= 0177) && ((__ctype[(UINT) * string] & (0x10 | 0x1 | 0x2 | 				       0x8 | 0x4)) ||
						(__ctype[(UINT) * string] & (0x8 | 0x20))))
	printf ("%c", * string++);

    printf ("\n");
    }

 
# 3839 "d:/Tornado2.2/target/config/all/bootConfig.c"

static STATUS getArg 
    (
    register char **ppString,	 
    int *	pValue,		 
    BOOL	defaultHex,	 
    BOOL	optional	 
    )
    {
    skipSpace (ppString);


     

    if (**ppString == '\0')
	{
	if (!optional)
	    {
	    printf ("missing parameter\n");
	    return ((-1));
	    }
	else
	    return (0);
	}


     

    if (bootScanNum (ppString, pValue, defaultHex) != 0)
	{
	printf ("invalid parameter\n");
	return ((-1));
	}

    skipSpace (ppString);

     

    if (**ppString == ',')
	{
	++*ppString;
	return (0);
	}

     

    if (**ppString == '\0')
	return (0);

     

    printf ("invalid parameter\n");
    return ((-1));
    }


 



 
# 3908 "d:/Tornado2.2/target/config/all/bootConfig.c"

static void usrBootLineInit 
    (
    int startType
    )
    {
    if (startType & 0x02)
	{
	 

	if ((sysNvRamGet (((char *) ((0x00100000)+0x1200)), 255, 0) == (-1)) ||
	    (*((char *) ((0x00100000)+0x1200)) == '\0'))
	    {
	     

	    strcpy (((char *) ((0x00100000)+0x1200)), "ata=0,0(0,0)host:/ata0a/vxWorks h=192.100.69.200 e=192.100.69.13 u=mcu1 pw=mcu1 tn=target o=lnPci");
	    }
	}
    }
 
# 3937 "d:/Tornado2.2/target/config/all/bootConfig.c"

static STATUS usrBootLineCrack 
    (
    char *	 bootString,
    BOOT_PARAMS *pParams
    )
    {
    register char *	pS;

    pS = bootStringToStruct (bootString, pParams);

    if (*pS != '\0')
	{
	bootParamsErrorPrint (bootString, pS);
	return ((-1));
	}


     

    if ((checkInetAddrField (pParams->ead, 1) != 0) ||
	(checkInetAddrField (pParams->bad, 1) != 0) ||
	(checkInetAddrField (pParams->had, 0) != 0) ||
	(checkInetAddrField (pParams->gad, 0) != 0))
	{
	return ((-1));
	}


    return (0);
    }



 




static STATUS checkInetAddrField 
    (
    char *pInetAddr,
    BOOL subnetMaskOK
    )
    {
    char inetAddr [30];
    int netmask;

     






    bzero (inetAddr, sizeof(inetAddr));

    if (*pInetAddr == '\0')
	return (0);

    strncpy (inetAddr, pInetAddr, sizeof (inetAddr) - 1);

    if (subnetMaskOK)
	{
	if (bootNetmaskExtract (inetAddr, &netmask) < 0)
	    {
	    printf ("Error: invalid netmask in boot field \"%s\".\n", inetAddr);
	    return ((-1));
	    }
	}

    if (inet_addr (inetAddr) == (ULONG) (-1))
	{
	printf ("Error: invalid inet address in boot field \"%s\".\n",inetAddr);
	return ((-1));
	}

    return (0);
    }

 
# 4028 "d:/Tornado2.2/target/config/all/bootConfig.c"

static STATUS usrNetIfAttach 
    (
    char *devName,
    int  unitNum,
    char *inetAdrs
    )
    {
    register NETIF *	pNif;
    STATUS 		status;
    char                buf [40];      


# 4052 "d:/Tornado2.2/target/config/all/bootConfig.c"

     
    sprintf(buf, "%s%d", devName, unitNum);

    for (pNif = netIf; pNif->ifName != 0; pNif++)
	{
	if (strcmp (buf, pNif->ifName) == 0)
	    break;
	}

     



    if (pNif->ifName == 0 && unitNum == 0)
        {
        for (pNif = netIf; pNif->ifName != 0; pNif++)
            {
            if (strcmp (devName, pNif->ifName) == 0)
                break;
            }
        }

    if (pNif->ifName == 0)
	{
	printf ("Network interface %s unknown.\n", devName);
	return ((-1));
	}

    if (pNif->attachRtn == ((void *)0))
        {
	printf ("Network interface %s has no attach routine.\n", devName);
	return (0);
	}

    printf ("Attaching network interface %s... ", buf);







# 4109 "d:/Tornado2.2/target/config/all/bootConfig.c"

    status = pNif->attachRtn (unitNum, pNif->arg1, pNif->arg2, pNif->arg3,
			      pNif->arg4, pNif->arg5, pNif->arg6, pNif->arg7, 
                              pNif->arg8);
    if (status != 0)
	{
        if ((*__errno()) == ((13 << 16) | 5))
            printf ("failed.\nError: S_iosLib_CONTROLLER_NOT_PRESENT.\n");
        else if ((*__errno()) == ((13 << 16) | 7))
	    printf ("failed: S_iosLib_INVALID_ETHERNET_ADDRESS, use N command\n");
	else
	    printf ("failed: errno = %#x.\n", (*__errno()));
	return ((-1));
	}

    printf ("done.\n");

    return (0);
    }

 








static STATUS usrNetIfConfig 
    (
    char *	devName,		 
    int         unitNum,                 
    char *	inetAdrs,		 
    char *	inetName,		 
    int 	netmask			 
    )
    {
    char 	ifname [20];






     

    if (inetAdrs[0] == '\0')
	{
	printf ("No inet address specified for interface %s.\n", devName);
	return ((-1));
	}

     

    sprintf (ifname, "%s%d", devName, unitNum);

     

    if (netmask != 0)
	ifMaskSet (ifname, netmask);

     

    if (ifAddrSet (ifname, inetAdrs) != 0)
        {
        printf ("Error setting inet address of %s to %s, errno = %#x\n",
                ifname, inetAdrs, (*__errno()));
        return ((-1));
        }

     

    if ((inetName != ((void *)0)) && (*inetName != '\0'))
	hostAdd (inetName, inetAdrs);

    return (0);
    }

 
# 4197 "d:/Tornado2.2/target/config/all/bootConfig.c"

static STATUS usrBpInit 
    (
    char *	devName,	 
    int         unitNum,         
    u_long	startAddr	 
    )
    {

# 4291 "d:/Tornado2.2/target/config/all/bootConfig.c"

    printf ("\nError: backplane driver referenced but not included.\n");
    return ((-1));

    }


 






static STATUS usrSlipInit 
    (
    char *pBootDev,		 
    int  unitNum,                
    char *localAddr,		 
    char *peerAddr		 
    )
    {

# 4370 "d:/Tornado2.2/target/config/all/bootConfig.c"
    printf ("\nError: slip not included.\n");
    return ((-1));

    }


 






static STATUS usrPPPInit (pBootDev, unitNum, localAddr, peerAddr)
    char *      pBootDev;                
    int         unitNum;                 
    char *      localAddr;               
    char *      peerAddr;                
    {

# 4458 "d:/Tornado2.2/target/config/all/bootConfig.c"
    printf ("\nError: ppp not included.\n");
    return ((-1));

    }

 
# 4486 "d:/Tornado2.2/target/config/all/bootConfig.c"

static STATUS bootpGet 
    (
    char *pNetDev,		 
    char *pBootDevAddr,		 
    char *pBootFile,		 
    char *pHostAddr,		 
    int  *pMask 		 
    )
    {


    struct bootpParams 		bootParams;      
    struct in_addr 		clntAddr; 	 
    struct in_addr 		hostAddr; 	 
    int 			subnetMask;	 
    struct ifnet *              pIf;             

    char	bootServer [18]; 

    subnetMask 	      = 0;

    bzero ( (char *)&clntAddr, sizeof (struct in_addr));
    bzero ( (char *)&hostAddr, sizeof (struct in_addr));
    bzero (bootServer, 18);
    bzero ((char *)&bootParams, sizeof (struct bootpParams));

    pIf = ifunit (pNetDev);
    if (pIf == ((void *)0))
	return ((-1));

     

    if ( (strncmp (pNetDev, "bp", 2) == 0) || 
            (strncmp (pNetDev, "sm", 2) == 0))
	{
	if (pBootDevAddr [0] == '\0')
	    return ((-1));

        clntAddr.s_addr = inet_addr (pBootDevAddr);
        if (clntAddr.s_addr == (ULONG)(-1))
            return ((-1));
	}

     

    bootParams.netmask = (struct in_addr *)&subnetMask;

    printf ("Getting boot parameters via network interface %s", pNetDev);

    if (bootpLibInit (14) == (-1))
        return ((-1));

    if (bootpParamsGet (pIf, 3, &clntAddr, &hostAddr,
		        ((void *)0), pBootFile, &bootParams) == (-1))
	return ((-1));

    inet_ntoa_b (hostAddr, bootServer);

    printf ("\nBootp Server:%s\n", bootServer);

    if (pBootFile [0] == '\0')
	return ((-1));				 

    printf ("    Boot file: %s\n", pBootFile);

     

    if (pHostAddr [0] == '\0')			 
	{
	strncpy (pHostAddr, bootServer, 18);
	printf ("    Boot host: %s\n", pHostAddr);
	}

     




    if (pBootDevAddr [0] == '\0')		 
	{
        inet_ntoa_b (clntAddr, pBootDevAddr);
	printf ("    Boot device Addr (%s): %s\n", pNetDev, pBootDevAddr);
	}

     

    if ((*pMask == 0) && (subnetMask != 0))
	{
        *pMask = ((((subnetMask) & 0x000000ff) << 24) | 			 (((subnetMask) & 0x0000ff00) <<  8) | 			 (((subnetMask) & 0x00ff0000) >>  8) | 			 (((subnetMask) & 0xff000000) >> 24));
	printf ("    Subnet mask: 0x%x\n", *pMask);
	}

    return (0);







    }


# 4790 "d:/Tornado2.2/target/config/all/bootConfig.c"


# 4899 "d:/Tornado2.2/target/config/all/bootConfig.c"

 
# 4912 "d:/Tornado2.2/target/config/all/bootConfig.c"

static STATUS usrNetProtoInit (void)
    {
    ipLibInit (&ipCfgParams);            
    rawIpLibInit ();                     
    rawLibInit ();


    udpLibInit (&udpCfgParams);          



    tcpLibInit (&tcpCfgParams);          



    icmpLibInit (&icmpCfgParams);        



    igmpLibInit ();                      






    return (0);
    }



